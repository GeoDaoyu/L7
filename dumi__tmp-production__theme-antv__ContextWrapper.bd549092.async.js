"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[2643],{34542:function(n,e,a){a.r(e),a.d(e,{default:function(){return r}});a(92379);var t=a(87397),o=a(84273),s=a(651);function r(){var n=(0,t.pC)();return(0,s.jsx)(o.w.Provider,{value:{meta:{exampleTopics:[{id:"gallery",title:{zh:"官方精品库",en:"Featured"},icon:"gallery",examples:[{demos:[{id:"grid",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*h-AMQodd7s4AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { ThreeLayer, ThreeRender } from '@antv/l7-three';\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nfunction getImageData(img) {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const { width, height } = img;\n  canvas.width = width;\n  canvas.height = height;\n\n  ctx.drawImage(img, 0, 0, width, height);\n  const imageData = ctx.getImageData(0, 0, width, height);\n\n  return imageData;\n}\n\nfunction getLatData(data) {\n  const size = Math.floor(Math.sqrt(data.length));\n\n  const arr = [];\n  const startLng = 110,\n    lngStep = 5 / (size - 1);\n  const startLat = 30,\n    latStep = -5 / (size - 1);\n  for (let i = 0; i < size; i++) {\n    const arr2 = [];\n    for (let j = 0; j < size; j++) {\n      const index = i + j * size;\n      const x = startLng + lngStep * i;\n      const y = startLat + latStep * j;\n\n      arr2.push([x, y, data[index]]);\n    }\n    arr.push(arr2);\n  }\n  return arr;\n}\n\nfunction getLngData(data) {\n  const size = Math.floor(Math.sqrt(data.length));\n  const arr = [];\n  const startLng = 110,\n    lngStep = 5 / (size - 1);\n  const startLat = 30,\n    latStep = -5 / (size - 1);\n\n  for (let i = 0; i < size; i++) {\n    const arr2 = [];\n    for (let j = 0; j < size; j++) {\n      const index = i * size + j;\n      const x = startLng + lngStep * j;\n      const y = startLat + latStep * i;\n\n      arr2.push([x, y, data[index]]);\n    }\n    arr.push(arr2);\n  }\n  return arr;\n}\n\nfunction getR(data) {\n  const arr = [];\n  for (let i = 0; i < data.length; i += 4) {\n    arr.push(data[i]);\n  }\n  return arr;\n}\n\nfunction setMaterial(object) {\n  if (object.children && object.children.length && object.children.length > 0) {\n    object.children.map((child) => setMaterial(child));\n  } else if (object.material) {\n    object.material.wireframe = true;\n    object.material.opacity = 0.6;\n  }\n}\n\nconst airPorts = [\n  {\n    name: '常德桃花源机场',\n    lng: 111.641101,\n    lat: 28.91165,\n  },\n  {\n    name: '芷江机场',\n    lng: 109.709699,\n    lat: 27.442172,\n  },\n  {\n    name: '铜仁凤凰机场',\n    lng: 109.313971,\n    lat: 27.880629,\n  },\n  {\n    name: '永州零陵机场',\n    lng: 111.616049,\n    lat: 26.335053,\n  },\n  {\n    name: '桂林两江国际机场',\n    lng: 110.049256,\n    lat: 25.210065,\n  },\n  {\n    name: '长沙黄花国际机场',\n    lng: 113.216412,\n    lat: 28.183613,\n  },\n  {\n    name: '井冈山机场',\n    lng: 114.745845,\n    lat: 26.852646,\n  },\n];\nconst planeTarget = {\n  lng2: 111.616049,\n  lat2: 26.335053,\n};\nconst airLineData = [\n  {\n    name: '常德桃花源机场',\n    lng: 111.641101,\n    lat: 28.91165,\n    ...planeTarget,\n  },\n  {\n    name: '芷江机场',\n    lng: 109.709699,\n    lat: 27.442172,\n    ...planeTarget,\n  },\n  {\n    name: '铜仁凤凰机场',\n    lng: 109.313971,\n    lat: 27.880629,\n    ...planeTarget,\n  },\n  {\n    name: '桂林两江国际机场',\n    lng: 110.049256,\n    lat: 25.210065,\n    ...planeTarget,\n  },\n  {\n    name: '长沙黄花国际机场',\n    lng: 113.216412,\n    lat: 28.183613,\n    ...planeTarget,\n  },\n  {\n    name: '井冈山机场',\n    lng: 114.745845,\n    lat: 26.852646,\n    ...planeTarget,\n  },\n];\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [113, 29],\n    pitch: 70,\n    zoom: 7.5,\n    rotation: 170,\n    style: 'blank',\n  }),\n});\nscene.setBgColor('#000');\n\nscene.registerRenderService(ThreeRender);\n\nconst threeJSLayer = new ThreeLayer({\n  enableMultiPassRenderer: false,\n  // @ts-ignore\n  onAddMeshes: (threeScene, layer) => {\n    threeScene.add(new THREE.AmbientLight(0xffffff));\n    const sunlight = new THREE.DirectionalLight(0xffffff, 0.25);\n    sunlight.position.set(0, 800000, 1000000);\n    sunlight.matrixWorldNeedsUpdate = true;\n    threeScene.add(sunlight);\n\n    // 使用 Three.js glTFLoader 加载模型\n    const loader = new GLTFLoader();\n    loader.load(\n      'https://gw.alipayobjects.com/os/bmw-prod/3ca0a546-92d8-4ba0-a89c-017c218d5bea.gltf',\n      (gltf) => {\n        const antModel = gltf.scene;\n        setMaterial(antModel);\n        layer.adjustMeshToMap(antModel);\n        layer.setMeshScale(antModel, 2000, 2000, 2000);\n        layer.setObjectLngLat(antModel, [113, 29], 0);\n\n        const animations = gltf.animations;\n        if (animations && animations.length) {\n          const mixer = new THREE.AnimationMixer(antModel);\n          const animation = animations[1];\n          const action = mixer.clipAction(animation);\n          action.timeScale = 1;\n          action.play();\n          layer.addAnimateMixer(mixer);\n        }\n        antModel.rotation.y = Math.PI;\n        threeScene.add(antModel);\n        layer.render();\n        return '';\n      },\n    );\n  },\n  zIndex: 1,\n});\n\nscene.addImage(\n  'plane',\n  'https://gw.alipayobjects.com/zos/bmw-prod/96327aa6-7fc5-4b5b-b1d8-65771e05afd8.svg',\n);\nconst airPrtsLayer = new PointLayer()\n  .source(airPorts, {\n    parser: {\n      type: 'json',\n      x: 'lng',\n      y: 'lat',\n    },\n  })\n  .shape('name', 'text')\n  .color('rgb(22,119,255)')\n  .size(10);\n\nconst airLineLayer = new LineLayer({ blend: 'normal' })\n  .source(airLineData, {\n    parser: {\n      type: 'json',\n      x: 'lng',\n      y: 'lat',\n      x1: 'lng2',\n      y1: 'lat2',\n    },\n  })\n  .shape('arc3d')\n  .size(1)\n  .color('#f00')\n  .style({\n    sourceColor: 'rgb(22,119,255)',\n    targetColor: 'rgba(242,246,250,0.1)',\n  });\n\nconst airPlaneLayer = new LineLayer({ blend: 'normal', zIndex: 1 })\n  .source(airLineData, {\n    parser: {\n      type: 'json',\n      x: 'lng2',\n      y: 'lat2',\n      x1: 'lng',\n      y1: 'lat',\n    },\n  })\n  .shape('arc3d')\n  .texture('plane')\n  .size(30)\n  .color('#f00')\n  .animate({\n    duration: 0.2,\n    interval: 0.2,\n    trailLength: 0.2,\n  })\n  .style({\n    textureBlend: 'replace',\n    lineTexture: true, // 开启线的贴图功能\n    iconStep: 6, // 设置贴图纹理的间距\n  });\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/ec5351c9-d22b-4918-ad6c-1838064d3a64.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const layer = new LineLayer({}).source(data).size(10000).shape('wall').style({\n      opacity: 0.4,\n      sourceColor: '#0DCCFF',\n      targetColor: 'rbga(255,255,255, 0)',\n      heightfixed: true,\n    });\n    scene.addLayer(layer);\n\n    const nameLayer = new PointLayer({ zIndex: 3 })\n      .source(data)\n      .color('rgb(22,119,255)')\n      .size(15)\n      .shape('name', 'text');\n    scene.addLayer(nameLayer);\n  });\n\nconst img = new Image();\nimg.crossOrigin = 'none';\nimg.src = 'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*UkvYRYS5jTAAAAAAAAAAAAAAARQnAQ';\nimg.onload = function () {\n  const data = getImageData(img);\n  const rData = getR(data.data);\n  const d1 = getLngData(rData);\n  const d2 = getLatData(rData);\n  const geoData = {\n    type: 'FeatureCollection',\n    features: [\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'MultiLineString',\n          coordinates: d1,\n        },\n      },\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'MultiLineString',\n          coordinates: d2,\n        },\n      },\n    ],\n  };\n  const layer = new LineLayer({})\n    .source(geoData)\n    .size(1)\n    .shape('simple')\n    .color('rgb(22, 119, 255)')\n    .style({\n      vertexHeightScale: 2000,\n      opacity: 0.4,\n    });\n  scene.addLayer(layer);\n};\nconst pointData = [\n  { lng: 113, lat: 29, size: 10000 },\n  { lng: 113.5, lat: 29.5, size: 30000 },\n  { lng: 110.23681640625, lat: 29.64509464986076, size: 74020.50373907911 },\n  { lng: 115.01586914062499, lat: 26.88777988202911, size: 22908.885529976185 },\n  { lng: 111.181640625, lat: 28.724313406473463, size: 73359.37302978932 },\n  { lng: 112.686767578125, lat: 29.257648503615542, size: 18500.90838085843 },\n  { lng: 114.664306640625, lat: 28.98892237190413, size: 20293.183968726793 },\n  { lng: 113.90075683593749, lat: 28.17855984939698, size: 18051.412077639496 },\n  { lng: 111.51123046875, lat: 27.45466493898314, size: 37645.94186119526 },\n  { lng: 110.67626953125, lat: 28.004101830368654, size: 4214.588023703825 },\n  { lng: 114.43359375, lat: 29.477861195816843, size: 61722.01580332115 },\n  { lng: 110.445556640625, lat: 26.96124577052697, size: 70806.75519747598 },\n  { lng: 113.75244140624999, lat: 27.88278388425912, size: 70930.24993464859 },\n];\nconst waveLayer = new PointLayer({ zIndex: 2, blend: 'additive' })\n  .source(pointData, {\n    parser: {\n      type: 'json',\n      x: 'lng',\n      y: 'lat',\n    },\n  })\n  .shape('circle')\n  .color('rgb(22, 119, 255)')\n  .size('size', (v) => v)\n  .animate(true)\n  .style({\n    unit: 'meter',\n  });\n\nconst barLayer = new PointLayer({ zIndex: 2, depth: false })\n  .source(pointData, {\n    parser: {\n      type: 'json',\n      x: 'lng',\n      y: 'lat',\n    },\n  })\n  .shape('cylinder')\n  .color('rgb(22, 119, 255)')\n  .size('size', (v) => [5, 5, v / 350])\n  .animate(true)\n  .style({\n    opacityLinear: {\n      enable: true,\n      dir: 'up',\n    },\n    lightEnable: false,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(waveLayer);\n  scene.addLayer(barLayer);\n  scene.addLayer(threeJSLayer);\n\n  scene.addLayer(airPrtsLayer);\n  scene.addLayer(airLineLayer);\n  scene.addLayer(airPlaneLayer);\n});\n",title:"网格地图",filename:"grid.js",isNew:!1},{id:"build_sweep",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*TVs2R4bBH6wAAAAAAAAAAAAAARQnAQ",source:"import { CityBuildingLayer, LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [120.145, 30.238915],\n    pitch: 60,\n    zoom: 13.2,\n  }),\n});\nfetch('https://gw.alipayobjects.com/os/rmsportal/ggFwDClGjjvpSMBIrcEx.json').then(async (res) => {\n  const pointLayer = new CityBuildingLayer();\n  pointLayer\n    .source(await res.json())\n    .size('floor', [0, 500])\n    .color('rgba(242,246,250,1.0)')\n    .animate({\n      enable: true,\n    })\n    .active({\n      color: '#0ff',\n      mix: 0.5,\n    })\n    .style({\n      opacity: 0.7,\n      baseColor: 'rgb(16, 16, 16)',\n      windowColor: 'rgb(30, 60, 89)',\n      brightColor: 'rgb(255, 176, 38)',\n      sweep: {\n        enable: true,\n        sweepRadius: 2,\n        sweepColor: '#1990FF',\n        sweepSpeed: 0.5,\n        sweepCenter: [120.145319, 30.238915],\n      },\n    });\n  scene.addLayer(pointLayer);\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/67130c6c-7f49-4680-915c-54e69730861d.json')\n  .then((data) => data.json())\n  .then(({ lakeBorderData, lakeData, landData }) => {\n    const lakeLayer = new PolygonLayer()\n      .source(lakeData)\n      .shape('fill')\n      .color('#1E90FF')\n      .style({\n        opacity: 0.4,\n        opacityLinear: {\n          enable: true,\n          dir: 'out', // in - out\n        },\n      });\n    const landLayer = new PolygonLayer()\n      .source(landData)\n      .shape('fill')\n      .color('#3CB371')\n      .style({\n        opacity: 0.4,\n        opacityLinear: {\n          enable: true,\n          dir: 'in', // in - out\n        },\n      });\n\n    const lakeBorderLayer = new PolygonLayer()\n      .source(lakeBorderData)\n      .shape('fill')\n      .color('#ccc')\n      .style({\n        opacity: 0.5,\n        opacityLinear: {\n          enable: true,\n          dir: 'in', // in - out\n        },\n      });\n\n    scene.addLayer(lakeLayer);\n    scene.addLayer(lakeBorderLayer);\n    scene.addLayer(landLayer);\n  });\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/40ef2173-df66-4154-a8c0-785e93a5f18e.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const layer = new LineLayer({\n      zIndex: 0,\n      depth: true,\n    })\n      .source(data)\n      .size(1)\n      .shape('line')\n      .color('#1990FF')\n      .animate({\n        interval: 1, // 间隔\n        duration: 2, // 持续时间，延时\n        trailLength: 2, // 流线长度\n      });\n    scene.addLayer(layer);\n  });\n",title:"圆形扫光城市",filename:"build_sweep.js",isNew:!1},{id:"animate_path_texture",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*0DwvSIHihVEAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.15, 30.246],\n    zoom: 13.5,\n    style: 'dark',\n    pitchEnable: false,\n    rotation: -90,\n  }),\n});\n\nscene.on('loaded', () => {\n  scene.addImage(\n    'arrow',\n    'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg',\n  );\n\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/67130c6c-7f49-4680-915c-54e69730861d.json')\n    .then((data) => data.json())\n    .then(({ lakeBorderData, lakeData, landData }) => {\n      const lakeLayer = new PolygonLayer()\n        .source(lakeData)\n        .shape('fill')\n        .color('#1E90FF')\n        .style({\n          opacity: 0.4,\n          opacityLinear: {\n            enable: true,\n            dir: 'out', // in - out\n          },\n        });\n      const landLayer = new PolygonLayer()\n        .source(landData)\n        .shape('fill')\n        .color('#3CB371')\n        .style({\n          opacity: 0.4,\n          opacityLinear: {\n            enable: true,\n            dir: 'in', // in - out\n          },\n        });\n\n      const lakeBorderLayer = new PolygonLayer()\n        .source(lakeBorderData)\n        .shape('fill')\n        .color('#ccc')\n        .style({\n          opacity: 0.5,\n          opacityLinear: {\n            enable: true,\n            dir: 'in', // in - out\n          },\n        });\n\n      scene.addLayer(lakeLayer);\n      scene.addLayer(lakeBorderLayer);\n      scene.addLayer(landLayer);\n    });\n\n  fetch('https://gw.alipayobjects.com/os/basement_prod/40ef2173-df66-4154-a8c0-785e93a5f18e.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size(3)\n        .shape('line')\n        .texture('arrow')\n        .color('rgb(22,119,255)')\n        .animate({\n          interval: 1, // 间隔\n          duration: 1, // 持续时间，延时\n          trailLength: 2, // 流线长度\n        })\n        .style({\n          opacity: 0.6,\n          lineTexture: true, // 开启线的贴图功能\n          iconStep: 10, // 设置贴图纹理的间距\n          borderWidth: 0.4, // 默认文 0，最大有效值为 0.5\n          borderColor: '#fff', // 默认为 #ccc\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"路径贴图",filename:"animate_path_texture.js",isNew:!1},{id:"turin",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*P1o6R7jm0JsAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [7.65, 45.053],\n    zoom: 12,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/98a5d9ec-be97-44bd-bff0-5742d929c003.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .shape('line')\n        .color('highway', (v) => {\n          switch (v) {\n            case 'motorway':\n              return '#F9D371';\n            case 'motorway_link':\n              return '#3DB2FF';\n            case 'trunk':\n              return 'green';\n            case 'trunk_link':\n              return '#6E85B2';\n            case 'primary':\n              return '#F47340';\n            case 'primary_link':\n              return '#F6A9A9';\n            case 'secondary':\n              return '#EF2F88';\n            case 'secondary_link':\n              return '#5F7A61';\n            case 'tertiary':\n              return '#1ee3cf';\n            case 'tertiary_link':\n              return '#C2F784';\n            case 'pedestrian':\n              return '#FFF89A';\n            case 'residential':\n              return 'rgba(22, 119, 255, .5)';\n            case 'road':\n              return '#93FFD8';\n            case 'path':\n              return '#BAFFB4';\n            case 'unclassified':\n              return '#D3DEDC';\n            case 'service':\n              return '#AEFEFF';\n            case 'living_street':\n              return '#9B0000';\n            case 'track':\n              return '#F5F5F5';\n            case 'highway':\n              return 'red';\n            case 'rail':\n              return '#08ffc8';\n            default:\n              return '#FFE3E3';\n          }\n        })\n        .animate({\n          interval: 1, // 间隔\n          duration: 1, // 持续时间，延时\n          trailLength: 2, // 流线长度\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"都灵道路图",filename:"turin.js",isNew:!1},{id:"3d_base_map",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4fj2TY9qGq4AAAAAAAAAAAAADmJ7AQ/original",source:"/* eslint-disable no-undef */\nimport { LineLayer, Marker, PointLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\nimport 'district-data';\n\nconst pointData = [\n  {\n    data: [113.177855, 23.068432],\n    longitude: '113.177855',\n    latitude: '23.068432',\n    to_longitude: '108.484899',\n    to_latitude: '22.826101',\n    text: '广州',\n    color: 'rgb(57,255,20)',\n    value: '1',\n    unit: '天',\n  },\n  {\n    data: [108.484899, 22.826101],\n    longitude: '108.484899',\n    latitude: '22.826101',\n    to_longitude: '106.467366',\n    to_latitude: '26.64921',\n    text: '南宁',\n    color: 'rgb(57,255,20)',\n    value: '6',\n    unit: '小时',\n  },\n  {\n    data: [106.467366, 26.64921],\n    longitude: '106.467366',\n    latitude: '26.64921',\n    text: '贵阳',\n    color: 'rgb(57,255,20)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [106.563516, 29.618267],\n    longitude: '106.563516',\n    latitude: '29.618267',\n    text: '重庆',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [125.403053, 43.907546],\n    longitude: '125.403053',\n    latitude: '43.907546',\n    text: '长春',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [113.607498, 34.794084],\n    longitude: '113.607498',\n    latitude: '34.794084',\n    to_longitude: '125.403053',\n    to_latitude: '43.907546',\n    text: '郑州',\n    color: 'rgb(57,255,20)',\n    value: '1',\n    unit: '天',\n  },\n  {\n    data: [114.63332, 38.174659],\n    longitude: '114.63332',\n    latitude: ' 38.174659',\n    text: '石家庄',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [101.740747, 36.558335],\n    longitude: '101.740747',\n    latitude: '36.558335',\n    text: '西宁',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [111.677604, 40.853815],\n    longitude: '111.677604',\n    latitude: '40.853815',\n    to_longitude: '106.563516',\n    to_latitude: '29.618267',\n    text: '呼和浩特',\n    color: 'rgb(255,255,255)',\n    value: '1',\n    unit: '天',\n  },\n  {\n    data: [120.152667, 30.195612],\n    longitude: '120.152667',\n    latitude: '30.195612',\n    text: '杭州',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [115.804205, 28.766485],\n    longitude: '115.804205',\n    latitude: '28.766485',\n    to_longitude: '120.152667',\n    to_latitude: '30.195612',\n    text: '南昌',\n    color: 'rgb(255,255,255)',\n    value: '1',\n    unit: '天',\n  },\n  {\n    data: [126.520858, 45.842367],\n    longitude: '126.520858',\n    latitude: '45.842367',\n    text: '哈尔滨',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [123.459186, 41.711976],\n    longitude: '123.459186',\n    latitude: '41.711976',\n    to_longitude: '126.520858',\n    to_latitude: '45.842367',\n    text: '沈阳',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n  {\n    data: [117.113981, 36.624459],\n    longitude: '117.113981',\n    latitude: '36.624459',\n    to_longitude: '114.63332',\n    to_latitude: '38.174659',\n    text: '济南',\n    color: 'rgb(255,255,255)',\n    value: '3',\n    unit: '小时',\n  },\n];\n\nconst source = new District.RDBSource({\n  version: 2023,\n});\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [111.4453125, 32.84267363195431],\n    pitch: 35,\n    zoom: 3,\n  }),\n});\n\nscene.addImage(\n  '00',\n  'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*PPo0QYHNResAAAAAAAAAAAAADmJ7AQ/original',\n);\nscene.addImage(\n  '01',\n  'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*epXiTZ8B1McAAAAAAAAAAAAADmJ7AQ/original',\n);\nscene.addImage(\n  '02',\n  'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*6WGaQKkJppIAAAAAAAAAAAAADmJ7AQ/original',\n);\nscene.setBgColor('#131722');\nscene.on('loaded', () => {\n  const map = document.getElementById('map');\n  map.style.background = '#131722';\n  for (let i = 0; i < pointData.length; i++) {\n    const el = document.createElement('label');\n    el.className = 'labelclass';\n    el.textContent = pointData[i].value + pointData[i].unit;\n    el.style.background = '#e24c4c8c';\n    el.style.borderRadius = '50%'; // 圆角半径设为半个宽度/高度，形成圆形\n    el.style.width = '40px';\n    el.style.height = '40px';\n    el.style.borderColor = '#e24c4c8c';\n    el.style.textAlign = 'center';\n    el.style.lineHeight = '40px';\n    el.style.color = '#fff';\n    const marker = new Marker({\n      element: el,\n      offsets: [50, 10],\n    }).setLnglat({\n      lng: Number(pointData[i].longitude) * 1,\n      lat: Number(pointData[i].latitude),\n    });\n    scene.addMarker(marker);\n  }\n  source\n    .getData({\n      level: 'province',\n      precision: 'low',\n    })\n    .then((data) => {\n      const newFeatures = data.features.filter((item) => {\n        return item.properties.name;\n      });\n      const newData = {\n        type: 'FeatureCollection',\n        features: newFeatures,\n      };\n      // 省份边界\n      const lineDown = new LineLayer({\n        zIndex: 10,\n      })\n        .source(newData)\n        .shape('line')\n        .color('#989494')\n        .size(0.6)\n        .style({\n          raisingHeight: 650000,\n          opacity: 0.8,\n        });\n\n      scene.addLayer(lineDown);\n      return '';\n    });\n\n  source\n    .getData({\n      level: 'country',\n      precision: 'low',\n    })\n    .then((data) => {\n      // 中国地图填充面\n      const provincelayer = new PolygonLayer({\n        autoFit: true,\n      })\n        .source(data)\n        .size(650000)\n        .shape('extrude')\n        .color('#5886CF')\n        .style({\n          heightfixed: true,\n          pickLight: true,\n          opacity: 0.8,\n        });\n      // 国界线 九段线\n      const boundaryLine = new LineLayer({ zIndex: 10 })\n        .source(data)\n        .shape('line')\n        .color('#5DDDFF')\n        .size(1)\n        .style({\n          raisingHeight: 650000,\n        });\n\n      scene.addLayer(boundaryLine);\n\n      scene.addLayer(provincelayer);\n\n      return '';\n    });\n  const flyLine3 = new LineLayer({\n    blend: 'normal',\n  })\n    .source(pointData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n        x1: 'to_longitude',\n        y1: 'to_latitude',\n      },\n    })\n    .size(2)\n    .shape('arc3d')\n    .color('rgb(0, 191, 255)')\n    .animate({\n      interval: 0.1,\n      trailLength: 0.4,\n      duration: 0.5,\n    })\n    .style({\n      sourceColor: 'rgb(0, 191, 255)',\n      targetColor: 'rgb(57,255,20)',\n      thetaOffset: 1,\n      opacity: 1,\n    });\n  const pointLayer = new PointLayer({\n    depth: false,\n    zIndex: 11,\n    heightFixed: true,\n  })\n    .source(pointData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n      },\n    })\n    .shape('cylinder')\n    .size([4, 4, 90])\n    .active(true)\n    .color('color')\n    .style({\n      opacity: 1,\n      opacityLinear: {\n        enable: true, // true - false\n        dir: 'up', // up - down\n      },\n      lightEnable: false,\n    });\n  const pointLayer2 = new PointLayer({ zIndex: 10 })\n    .source(pointData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n      },\n    })\n    .shape('circle')\n    .active(true)\n    .animate(true)\n    .size(40)\n    .color('color');\n\n  const textLayer = new PointLayer({ zIndex: 2 })\n    .source(pointData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n      },\n    })\n    .shape('text', 'text')\n    .size(14)\n    .color('#0ff')\n    .style({\n      textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n      spacing: 2, // 字符间距\n      padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n      stroke: '#0ff', // 描边颜色\n      strokeWidth: 0.2, // 描边宽度\n      raisingHeight: 2551000,\n      textAllowOverlap: true,\n      heightFixed: true,\n    });\n  const imageLayer = new PointLayer({ zIndex: 15 })\n    .source(pointData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n      },\n    })\n    .shape('text', ['00', '01', '02'])\n    .size(10)\n    .style({\n      raisingHeight: 110,\n    });\n  scene.addLayer(textLayer);\n  scene.addLayer(imageLayer);\n  scene.addLayer(pointLayer);\n  scene.addLayer(pointLayer2);\n  scene.addLayer(flyLine3);\n  return '';\n});\n",title:"3D底图",filename:"3d_base_map.js",isNew:!1}],icon:"",id:"animate",title:{en:"Recommend",zh:"推荐"},api:null,childrenKey:"demos",order:0},{demos:[{id:"province_map",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HyCxTKbk-lsAAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    pitch: 0,\n    style: 'light',\n    center: [118, 24.8],\n    zoom: 6,\n  }),\n});\nscene.on('loaded', async () => {\n  scene.addImage(\n    'province',\n    'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hvqeQa9I6ccAAAAAAAAAAAAADmJ7AQ/original',\n  );\n  scene.addImage(\n    'city',\n    'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*sBlgRp8Ah7sAAAAAAAAAAAAADmJ7AQ/original',\n  );\n  scene.addImage(\n    'county',\n    'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ufrWTqCNCScAAAAAAAAAAAAADmJ7AQ/original',\n  );\n  // 获取数据\n  const dataList = [\n    // 市级行政区\n    'https://mdn.alipayobjects.com/afts/file/A*jPjCTad_s24AAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA.json',\n    // 市级行政区一级群列岛名\n    'https://mdn.alipayobjects.com/afts/file/A*HW8yQb2joA8AAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E4%B8%80%E7%BA%A7%E7%BE%A4%E5%88%97%E5%B2%9B%E5%90%8D.json',\n    ///市级行政区一级河流名.json\n    'https://mdn.alipayobjects.com/afts/file/A*EjtNRrENGToAAAAAAAAAAAAADrd2AQ/市级行政区一级河流名.json',\n    //市级行政区一级港湾名.json\n    'https://mdn.alipayobjects.com/afts/file/A*lqxATobbMLwAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E4%B8%80%E7%BA%A7%E6%B8%AF%E6%B9%BE%E5%90%8D.json',\n    //市级行政区一级岛屿名.json\n    'https://mdn.alipayobjects.com/afts/file/A*xyeHRZCF8DsAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E4%B8%80%E7%BA%A7%E5%B2%9B%E5%B1%BF%E5%90%8D.json',\n    //市级行政区县级行政中心.json\n    'https://mdn.alipayobjects.com/afts/file/A*vrDfSrB8J4sAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%8E%BF%E7%BA%A7%E8%A1%8C%E6%94%BF%E4%B8%AD%E5%BF%83.json',\n    //市级行政区县级行政区.json\n    'https://mdn.alipayobjects.com/afts/file/A*lfffQ5ej7AEAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%8E%BF%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA.json',\n    // 市级行政区省级行政中心.json\n    'https://mdn.alipayobjects.com/afts/file/A*jtlsTqxTJkoAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E7%9C%81%E7%BA%A7%E8%A1%8C%E6%94%BF%E4%B8%AD%E5%BF%83.json',\n    //市级行政区山峰.json\n    'https://mdn.alipayobjects.com/afts/file/A*DRSfRqBs9qsAAAAAAAAAAAAADrd2AQ/市级行政区山峰.json',\n    //市级行政区色带.json\n    'https://mdn.alipayobjects.com/afts/file/A*KRD4QbjkZCMAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E8%89%B2%E5%B8%A6.json',\n    //市级行政区面状水域.json\n    'https://mdn.alipayobjects.com/afts/file/A*3e9nSJwXqu0AAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E9%9D%A2%E7%8A%B6%E6%B0%B4%E5%9F%9F.json',\n    //市级行政区境界线.json\n    'https://mdn.alipayobjects.com/afts/file/A*tA8nSqhulQQAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%A2%83%E7%95%8C%E7%BA%BF.json',\n    //市级行政区河流.json\n    'https://mdn.alipayobjects.com/afts/file/A*2vGmRrYpTjEAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E6%B2%B3%E6%B5%81.json',\n    //市级行政区海岸线.json\n    'https://mdn.alipayobjects.com/afts/file/A*juI9TpBcQ74AAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E6%B5%B7%E5%B2%B8%E7%BA%BF.json',\n    //市级行政区二级群列岛名.json\n    'https://mdn.alipayobjects.com/afts/file/A*E4ReSqdYq-cAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E4%BA%8C%E7%BA%A7%E7%BE%A4%E5%88%97%E5%B2%9B%E5%90%8D.json',\n    //市级行政区地级市行政中心.json\n    'https://mdn.alipayobjects.com/afts/file/A*I3HSQaYyQ_UAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%9C%B0%E7%BA%A7%E5%B8%82%E8%A1%8C%E6%94%BF%E4%B8%AD%E5%BF%83.json',\n    //市级行政区大型水库名.json\n    'https://mdn.alipayobjects.com/afts/file/A*xxXKTpte0VUAAAAAAAAAAAAADrd2AQ/%E5%B8%82%E7%BA%A7%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%A4%A7%E5%9E%8B%E6%B0%B4%E5%BA%93%E5%90%8D.json',\n  ];\n\n  const result = await Promise.all(dataList.map(async (url) => await (await fetch(url)).json()));\n  const cityLayer = new PolygonLayer({\n    autoFit: true,\n  })\n    .source(result[6])\n    .shape('fill')\n    .scale('COLOR', {\n      type: 'cat',\n      domain: ['Y', 'P', 'G', 'R'],\n    })\n    .color('COLOR', ['#f7f6c6', '#fceaea', '#e0e7d5', '#f3e4cf']);\n\n  // 陆上轮廓\n  const layer2 = new PolygonLayer().source(result[9]).shape('fill').color('#b4cad7');\n\n  // 水域\n  const waterLayer = new PolygonLayer().source(result[10]).shape('fill').color('#bcebfe');\n  // 面状河流线\n  const waterLayerLine = new PolygonLayer()\n    .source(result[10])\n    .shape('line')\n    .size(0.5)\n    .color('#50aac8');\n\n  // 线河流线\n  const river_Line = new PolygonLayer().source(result[12]).shape('line').size(0.5).color('#50aac8');\n  // 群岛标注图层\n  const island_name = new PointLayer({\n    minZoom: 8,\n  })\n    .source(result[1])\n    .shape('NAME', 'text')\n    .size(15)\n    .color('#3b474e');\n\n  // 河流标注图层\n  const river_name = new PointLayer({ minZoom: 5 })\n    .source(result[2])\n    .shape('NAME', 'text')\n    .size(15)\n    .color('#4aa1bd')\n    .style({\n      fontWeight: 800,\n    });\n  // 港湾标注\n  const gangwan_name = new PointLayer({\n    minZoom: 6,\n  })\n    .source(result[3])\n    .shape('NAME', 'text')\n    .size(15)\n    .color('#4eaed9')\n    .style({\n      fontWeight: 800,\n    });\n  // 群岛\n  const island_name1 = new PointLayer({\n    minZoom: 8,\n  })\n    .source(result[4])\n    .shape('NAME', 'text')\n    .size(15)\n    .color('#3b474e')\n    .style({\n      fontWeight: 600,\n    });\n\n  // 县界\n  const county_Line = new PolygonLayer({\n    minZoom: 5,\n  })\n    .source(result[11])\n    .shape('line')\n    .size(0.3)\n    .color('#a59f97');\n  // 城市界\n  const city_Line = new PolygonLayer().source(result[0]).shape('line').size(0.5).color('#787269');\n\n  // 海岸线\n  const sea_Line = new PolygonLayer().source(result[13]).shape('line').size(0.5).color('#50aac8');\n\n  // 城市标注\n  const cityName = new PointLayer({\n    maxZoom: 8,\n    minZoom: 5,\n  })\n    .source(result[15])\n    .shape('NAME', 'text')\n    .size(14)\n    .color('#000')\n    .style({\n      fontWeight: 800,\n      textAnchor: 'top',\n      textAllowOverlap: true,\n      textOffset: [0, 12],\n    });\n\n  // 城市点位\n\n  const cityPoint = new PointLayer({\n    maxZoom: 7,\n    minZoom: 5,\n  })\n    .source(result[15])\n    .shape('city')\n    .size(5);\n\n  // 省级市标注\n  const provinceCityName = new PointLayer({\n    minZoom: 5,\n    maxZoom: 7,\n  })\n    .source(result[7])\n    .shape('NAME', 'text')\n    .size(14)\n    .color('#000')\n    .style({\n      fontWeight: 800,\n      textAnchor: 'top',\n      textOffset: [0, 12],\n    });\n\n  // 省级市点位\n  const provincePoint = new PointLayer({\n    minZoom: 5,\n    maxZoom: 7,\n  })\n    .source(result[7])\n    .shape('province')\n    .size(5);\n\n  // 县标注\n  const countyName = new PointLayer({\n    minZoom: 8,\n  })\n    .source(result[5])\n    .shape('NAME', 'text')\n    .size(14)\n    .color('#333')\n    .style({\n      fontWeight: 600,\n      textAnchor: 'top',\n      textOffset: [0, 12],\n    });\n  7;\n  // 县点位\n  const countyPoint = new PointLayer({\n    minZoom: 8,\n  })\n    .source(result[5])\n    .shape('county')\n    .size(5);\n\n  // 县标注\n  const mountainPoint = new PointLayer({\n    minZoom: 6,\n  })\n    .source(result[8])\n    .shape('triangle')\n    .size(6)\n    .color('#326648');\n\n  // 山标注\n  const mountainPoint_name = new PointLayer({\n    minZoom: 6,\n  })\n    .source(result[8])\n    .shape('NAME', 'text')\n    .size(14)\n    .color('#326648')\n    .style({\n      fontWeight: 800,\n      textAnchor: 'top',\n      textOffset: [0, 12],\n    });\n\n  scene.addLayer(cityLayer);\n  scene.addLayer(layer2);\n  scene.addLayer(waterLayer);\n  scene.addLayer(waterLayerLine);\n  scene.addLayer(river_Line);\n  scene.addLayer(county_Line);\n\n  scene.addLayer(city_Line);\n  scene.addLayer(sea_Line);\n\n  scene.addLayer(cityName);\n  scene.addLayer(cityPoint);\n  scene.addLayer(countyName);\n  scene.addLayer(countyPoint);\n  scene.addLayer(provinceCityName);\n  scene.addLayer(provincePoint);\n  scene.addLayer(island_name);\n  scene.addLayer(island_name1);\n  scene.addLayer(gangwan_name);\n  scene.addLayer(river_name);\n  scene.addLayer(mountainPoint);\n  scene.addLayer(mountainPoint_name);\n  console.log(result);\n});\n",title:"福建省地图",filename:"province_map.ts",isNew:!0},{id:"column_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FGjMT4CenkkAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 35.210526315789465,\n    style: 'dark',\n    center: [104.288144, 31.239692],\n    zoom: 4.4,\n  }),\n});\nconsole.log('111');\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('cylinder')\n        .size('t', function (level) {\n          return [2, 2, level * 2 + 20];\n        })\n        .animate(true)\n        .active(true)\n        .color('t', [\n          '#094D4A',\n          '#146968',\n          '#1D7F7E',\n          '#289899',\n          '#34B6B7',\n          '#4AC5AF',\n          '#5FD3A6',\n          '#7BE39E',\n          '#A1EDB8',\n          '#CEF8D6',\n        ]);\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"3D柱图深色",filename:"column_dark.js",isNew:!1},{id:"arc-circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hX_VQ5q77xMAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [107.77791556935472, 35.443286920228644],\n    zoom: 2.9142882493605033,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({\n        blend: 'additive',\n      })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng1',\n            y: 'lat1',\n            x1: 'lng2',\n            y1: 'lat2',\n          },\n        })\n        .size(1)\n        .shape('arc')\n        .color('#8C1EB2')\n        .style({\n          opacity: 0.8,\n          blur: 0.99,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"弧线地图",filename:"arc-circle.js",isNew:!1},{id:"bus_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cvU2R7WFfeAAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [103.83735604457024, 1.360253881403068],\n    pitch: 4.00000000000001,\n    zoom: 10.210275860702593,\n    rotation: 19.313180925794313,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/ee07641d-5490-4768-9826-25862e8019e1.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            coordinates: 'path',\n            type: 'json',\n          },\n        })\n        .size('level', (level) => {\n          return [1.0, level * 1];\n        })\n        .shape('line')\n        .color(\n          'level',\n          [\n            '#312B60',\n            '#4A457E',\n            '#615C99',\n            '#816CAD',\n            '#A67FB5',\n            '#C997C7',\n            '#DEB8D4',\n            '#F5D4E6',\n            '#FAE4F1',\n            '#FFF3FC',\n          ].slice(0, 8),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"公交线路深色",filename:"bus_dark.js",isNew:!1},{id:"light",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PtMUR6hsN9EAAAAAAAAAAAAAARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 43,\n    center: [120.13383079335335, 29.651873105004427],\n    zoom: 7.068989519212174,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/a1a8158d-6fe3-424b-8e50-694ccf61c4d7.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 2500,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .size('sum', (sum) => {\n          return sum * 100;\n        })\n        .shape('hexagonColumn')\n        .style({\n          coverage: 0.8,\n          angle: 0,\n        })\n        .color('sum', [\n          '#094D4A',\n          '#146968',\n          '#1D7F7E',\n          '#289899',\n          '#34B6B7',\n          '#4AC5AF',\n          '#5FD3A6',\n          '#7BE39E',\n          '#A1EDB8',\n          '#C3F9CC',\n          '#DEFAC0',\n          '#ECFFB1',\n        ]);\n      scene.addLayer(layer);\n    });\n});\n",title:"蜂窝图3D",filename:"light.js",isNew:!1},{id:"swipe",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*b1WCRJjht2wAAAAAAAAAAAAADmJ7AQ/original",source:"import { Map, RasterLayer, Scene, Swipe } from '@antv/l7';\nimport * as GeoTIFF from 'geotiff';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    pitch: 0,\n    center: [-96, 37.8],\n    zoom: 14,\n  }),\n});\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n  };\n}\nscene.on('loaded', async () => {\n  const colors = [\n    '#d73027',\n    '#f46d43',\n    '#fdae61',\n    '#fee08b',\n    '#d9ef8b',\n    '#a6d96a',\n    '#66bd63',\n    '#1a9850',\n  ];\n  const ndvi1 = await getTiffData(\n    'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/file/A*sZpWQZK21NIAAAAAAAAAAAAADmJ7AQ/ndvi2022-03-01.glb',\n  );\n  const ndvi2 = await getTiffData(\n    'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/file/A*JeHQTIzN4_kAAAAAAAAAAAAADmJ7AQ/ndvi2022-10-01.NDVI.glb',\n  );\n\n  // 影像地图图层\n  const baseLayer = new RasterLayer({ zIndex: -1 }).source(\n    'https://www.google.com/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n        zoomOffset: 0,\n      },\n    },\n  );\n\n  const leftLayer = new RasterLayer({\n    autoFit: true,\n  })\n    .source(ndvi1.data, {\n      parser: {\n        type: 'raster',\n        width: ndvi1.width,\n        height: ndvi1.height,\n        extent: [-112.117293306503, 32.78212288135407, -111.77216057434428, 33.10568277278276],\n      },\n    })\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [-1, 1],\n      nodataValue: 0,\n      rampColors: {\n        type: 'linear',\n        positions: [-0.4, -0.2, 0, 0.2, 0.4, 0.6, 0.8, 1.0], // 数据需要换成 0-1\n        colors: colors,\n      },\n    });\n\n  const rightLayer = new RasterLayer({})\n    .source(ndvi2.data, {\n      parser: {\n        type: 'raster',\n        width: ndvi2.width,\n        height: ndvi2.height,\n        extent: [-112.117293306503, 32.78212288135407, -111.77216057434428, 33.10568277278276],\n      },\n    })\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [-1, 1],\n      nodataValue: 0,\n      rampColors: {\n        type: 'linear',\n        positions: [-0.4, -0.2, 0, 0.2, 0.4, 0.6, 0.8, 1.0], // 数据需要换成 0-1\n        colors: colors,\n      },\n    });\n\n  scene.addLayer(baseLayer);\n  scene.addLayer(leftLayer);\n  scene.addLayer(rightLayer);\n\n  const swipe = new Swipe({\n    orientation: 'vertical',\n    ratio: 0.5,\n    layers: [leftLayer],\n    rightLayers: [rightLayer],\n  });\n  scene.addControl(swipe);\n});\n",title:"卷帘对比-作物长势",filename:"swipe.ts",isNew:!0},{id:"normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qI2gRo_w0XoAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.417463, 31.215175],\n    style: 'dark',\n    zoom: 11,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/BElVQFEFvpAKzddxFZxJ.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const pointLayer = new PointLayer({\n        blend: 'additive',\n      })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            y: 'lat',\n            x: 'lng',\n          },\n        })\n        .size(0.5)\n        .color('#080298');\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"亮度图",filename:"normal.js",isNew:!1}],icon:"",id:"basic",title:{en:"Featured",zh:"基础可视化"},api:null,childrenKey:"demos",order:1},{demos:[{id:"gaza",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*VN1hSZkDpg0AAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, PolygonLayer, RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [121.268, 30.3628],\n    zoom: 10,\n  }),\n});\nscene.on('loaded', async () => {\n  const googleurl = 'https://www.google.com/maps/vt?lyrs=s@820&gl=cn&x={x}&y={y}&z={z}';\n  const gazafill = await (\n    await fetch(\n      'https://mdn.alipayobjects.com/afts/file/A*7h8hS5hqXkcAAAAAAAAAAAAADrd2AQ/gaza.geo.json',\n    )\n  ).json();\n  const gazacity = await (\n    await fetch(\n      'https://mdn.alipayobjects.com/afts/file/A*3xTGQ6ZeTIcAAAAAAAAAAAAADrd2AQ/gazacity.json',\n    )\n  ).json();\n\n  const fillLayer = new PolygonLayer({\n    visible: false,\n  })\n    .source(gazafill)\n    .shape('fill')\n    .color('red');\n\n  const googleMap = new RasterLayer({\n    zIndex: -1,\n    maskLayers: [fillLayer],\n    zoomOffset: 1,\n    updateStrategy: 'overlap',\n  }).source(googleurl, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n    },\n  });\n\n  const fillLine = new PolygonLayer({\n    autoFit: true,\n  })\n    .source(gazafill)\n    .shape('line')\n    .color('red')\n    .size(1);\n  const cityLayer = new PointLayer()\n    .source(gazacity)\n    .shape('circle')\n    .size(5)\n    .color('#027aff')\n    .style({ opacity: 1, stroke: '#fff', strokeWidth: 2 });\n  const cityLayerName = new PointLayer()\n    .source(gazacity)\n    .shape('city', 'text')\n    .size(12)\n    .color('#027aff')\n    .style({\n      textAnchor: 'top', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n      spacing: 2, // 字符间距\n      fontWeight: '800',\n      textOffset: [0, 30],\n      padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n      stroke: '#ffffff', // 描边颜色\n      strokeWidth: 2, // 描边宽度\n      textAllowOverlap: true,\n    });\n  scene.addLayer(googleMap);\n  scene.addLayer(fillLine);\n  scene.addLayer(fillLayer);\n  scene.addLayer(cityLayer);\n  scene.addLayer(cityLayerName);\n});\n",title:"加沙",filename:"gaza.js",isNew:!0},{id:"yidaiyilu",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*9UiMQ4FVlS8AAAAAAAAAAAAADmJ7AQ/original",source:"import { LineLayer, PointLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [60.268, 30.3628],\n    zoom: 1.5,\n  }),\n});\nscene.on('loaded', async () => {\n  scene.addImage('local', 'https://gw.alipayobjects.com/zos/rmsportal/xZXhTxbglnuTmZEwqQrE.png');\n  const belt = await (\n    await fetch('https://gw.alipayobjects.com/os/rmsportal/UpapMomPYUeiBjbHNAma.json')\n  ).json();\n  const line = await (\n    await fetch('https://gw.alipayobjects.com/os/rmsportal/kwUdcXnxQtexeGRvTGtA.json')\n  ).json();\n  const line2 = await (\n    await fetch('https://gw.alipayobjects.com/os/rmsportal/dzpMOiLYBKxpdmsgBLoE.json')\n  ).json();\n  const point = await (\n    await fetch('https://gw.alipayobjects.com/os/rmsportal/opYqFyDGyGUAUXkLUhBV.json')\n  ).json();\n  const fillLayer = new PolygonLayer({\n    autoFit: false,\n  })\n    .source(belt)\n    .color('cname', function (value) {\n      return value == '中国' ? 'rgba(46,149,169,0.45)' : 'rgba(227,244,244,1)';\n    })\n    .shape('fill');\n\n  const linelayer = new LineLayer().source(line).color('rgb(79,147,234)').size(1.5).shape('line');\n\n  const linelayer2 = new LineLayer()\n    .source(line2)\n    .color('rgb(11,94,69)')\n    .size(1.5)\n    .shape('line')\n    .style({\n      // 'lineType':'solid'\n    });\n\n  const pointlayer = new PointLayer({}).source(point).size(12.0).shape('local');\n\n  const textlayer = new PointLayer({})\n    .source(point)\n    .size(12.0)\n    .shape('name', 'text')\n    .color('#027aff')\n    .style({\n      textOffset: [0, -42],\n      stroke: '#fff',\n      strokeWidth: 2,\n      textAnchor: 'bottom',\n    });\n  scene.addLayer(fillLayer);\n  scene.addLayer(linelayer);\n  scene.addLayer(linelayer2);\n  scene.addLayer(pointlayer);\n  scene.addLayer(textlayer);\n});\n",title:"一带一路",filename:"yidaiyilu.js",isNew:!0},{id:"yidaiyilu2",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*wXUpR4OJ4SMAAAAAAAAAAAAADmJ7AQ/original",source:"import { Control, DOM, LayerPopup, LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst styleElement = document.createElement('style');\n\n// 在<style>元素中添加样式规则\nstyleElement.textContent = `\n            .info {\n                padding: 6px 8px;\n                font: 14px/16px Arial, Helvetica, sans-serif;\n                background: white;\n                background: rgba(255,255,255,0.8);\n                box-shadow: 0 0 15px rgba(0,0,0,0.2);\n                border-radius: 5px;\n            }\n            .info h4 {\n                margin: 0 0 5px;\n                color: #777;\n            }\n              .legend {\n                line-height: 18px;\n                color: #555;\n            }\n            .legend i {\n                width: 40px;\n                height: 20px;\n                float: left;\n                margin-top: 5px;\n                margin-right: 0px;\n                opacity: 1;\n                color: #000;\n                font-weight: bold;\n            }\n            `;\n\n// 将<style>元素添加到<head>元素中，实现样式注入\ndocument.head.appendChild(styleElement);\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [116.368652, 39.93866],\n    zoom: 0,\n    maxZoom: 5,\n    token: '6f025e700cbacbb0bb866712d20bb35c',\n  }),\n});\nfunction getColor(d, color) {\n  return d > 100000\n    ? color[4]\n    : d > 10000\n      ? color[3]\n      : d > 5000\n        ? color[2]\n        : d > 1000\n          ? color[1]\n          : d > 0\n            ? color[0]\n            : 'rgba(0,0,0,0)';\n}\nscene.on('loaded', async () => {\n  const data = await (\n    await fetch(\n      'https://mdn.alipayobjects.com/afts/file/A*6dU9SL6RD8IAAAAAAAAAAAAADrd2AQ/world_gdp.json',\n    )\n  ).json();\n  const data_line = await (\n    await fetch(\n      'https://mdn.alipayobjects.com/afts/file/A*5NgLQrPivBgAAAAAAAAAAAAADrd2AQ/line_2.json',\n    )\n  ).json();\n\n  const features_1 = data.features.filter((fe) => fe.properties.flag === true);\n  const features_2 = data.features.filter((fe) => fe.properties.flag === false);\n  const layer1 = new PolygonLayer({})\n    .source({\n      type: 'FeatureCollection',\n      features: features_1,\n    })\n    .color('gdp', ['#fdd49e', '#fdbb84', '#fc8d59', '#e34a33', '#b30000'])\n    .shape('fill')\n    .scale('gdp', {\n      type: 'threshold',\n      domain: [0, 1000, 5000, 10000, 100000, 300000],\n    })\n    .active(false)\n    .style({\n      opacity: 0.6,\n    });\n\n  const layer2 = new PolygonLayer({})\n    .source({\n      type: 'FeatureCollection',\n      features: features_2,\n    })\n    .color('gdp', ['#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494'])\n    .shape('fill')\n    // .filter('flag',flag=>!falg)\n    .scale('gdp', {\n      type: 'threshold',\n      domain: [0, 1000, 5000, 10000, 100000, 300000],\n    })\n    .style({\n      opacity: 0.6,\n    })\n\n    .active(false);\n  const lineLayer = new LineLayer()\n    .source(data_line)\n    .filter('type', (t) => {\n      return t === '11' || t === '1';\n    })\n    .color('#09f')\n    .size(0.6)\n    .shape('line')\n    .style({\n      lineType: 'dash',\n      dashArray: [3, 3],\n    });\n\n  const lineLayer2 = new LineLayer()\n    .source(data_line)\n    .filter('type', (t) => {\n      return t === '10';\n    })\n    .color('#09f')\n    .size(0.6)\n    .shape('line')\n    .style({\n      lineType: 'dash',\n      dashArray: [2, 2],\n    });\n\n  const lineLayer3 = new LineLayer()\n    .source(data_line)\n    .filter('type', (t) => {\n      return t === '0' || t === '9' || t === '7' || t === '2';\n    })\n    .color('type', (t) => {\n      return t === '0' ? 'red' : t === '9' || t === '2' ? '#09f ' : '#fff';\n    })\n    .size(0.8)\n    .shape('line');\n\n  // const lineLayer4 = new LineLayer().source(data_line).filter('type',(t)=>{\n  //     return t === '0'\n  // }).color('red').size(1).shape('line').style();\n  const layerPopup1 = new LayerPopup({\n    items: [\n      {\n        layer: layer1,\n        fields: [\n          {\n            field: 'NAME_CHN',\n            formatField: () => '国家',\n          },\n          {\n            field: 'gdp',\n            formatField: () => 'GDP',\n            formatValue: (val) => {\n              return val < 0.00001 ? `${val * 10000 * 10000}美元` : `${val.toFixed(2)}亿美元`;\n            },\n          },\n          {\n            field: 'industries',\n            formatField: () => '行业',\n            formatValue: (val) => {\n              return val || '';\n            },\n          },\n          {\n            field: 'relations',\n            formatField: () => '关系',\n            formatValue: (val) => {\n              return val || '';\n            },\n          },\n        ],\n      },\n    ],\n  });\n  const layerPopup2 = new LayerPopup({\n    items: [\n      {\n        layer: layer2,\n        fields: [\n          {\n            field: 'NAME_CHN',\n            formatField: () => '国家',\n          },\n          {\n            field: 'gdp',\n            formatField: () => 'GDP',\n            formatValue: (val) => {\n              return val < 0.00001 ? `${val * 10000 * 10000}美元` : `${val.toFixed(2)}亿美元`;\n            },\n          },\n        ],\n      },\n    ],\n  });\n\n  scene.addPopup(layerPopup1);\n  scene.addPopup(layerPopup2);\n\n  scene.addLayer(layer1);\n  scene.addLayer(layer2);\n  scene.addLayer(lineLayer);\n  scene.addLayer(lineLayer2);\n  scene.addLayer(lineLayer3);\n\n  const legend = new Control({ position: 'bottomright' });\n  // 0, 1000, 5000, 10000, 100000, 300000\n  legend.onAdd = () => {\n    var div = DOM.create('div', 'info legend'),\n      grades = [0, 1000, 5000, 10000, 100000, -999],\n      grades2 = [0, '1千', '5千', '1万', '10万', '30万/亿美元'];\n\n    // loop through our density intervals and generate a label with a colored square for each interval\n\n    for (var i = 0; i < grades.length; i++) {\n      if (i < grades.length - 1) {\n        div.innerHTML +=\n          '<i style=\"background:' +\n          getColor(grades[i] + 1, ['#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494']) +\n          '\"></i>';\n      } else {\n        div.innerHTML +=\n          '<i style=\" width: 100px; margin-left: 10px; background:' +\n          getColor(grades[i] + 1, ['#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494']) +\n          '\">非一带一路国家</i>';\n      }\n    }\n    div.innerHTML += '<br>';\n    for (let i = 0; i < grades.length; i++) {\n      if (i < grades.length - 1) {\n        div.innerHTML +=\n          '<i style=\"background:' +\n          getColor(grades[i] + 1, ['#fdd49e', '#fdbb84', '#fc8d59', '#e34a33', '#b30000']) +\n          '\"></i>';\n      } else {\n        div.innerHTML +=\n          '<i style=\" width: 100px; margin-left: 10px; background:' +\n          getColor(grades[i] + 1, ['#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494']) +\n          '\">一带一路国家</i>';\n      }\n    }\n    div.innerHTML += '<br>';\n\n    for (let i = 0; i < grades2.length; i++) {\n      if (i < grades.length - 1) {\n        div.innerHTML += `<i>${grades2[i]}</>`;\n      } else {\n        div.innerHTML += `<i style=\" width: 100px;\">${grades2[i]}</>`;\n      }\n    }\n    return div;\n  };\n\n  scene.addControl(legend);\n});\n",title:"一带一路GDP",filename:"yidaiyilu2.js",isNew:!0}],icon:"",id:"story",title:{en:"Story",zh:"数据故事"},api:null,childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"map",title:{zh:"地图底图",en:"BaseMap"},icon:"map",examples:[{demos:[{id:"gaodemap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*C4BvT5gcclMAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nnew Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [107.054293, 35.246265],\n    zoom: 4.056,\n  }),\n});\n",title:"高德底图",filename:"gaodemap.js",isNew:!1},{id:"amapInstance",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*A4BOR4hBNcUAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nfunction initMap() {\n  // 全局加载高德地图API\n  const map = new AMap.Map('map', {\n    viewMode: '3D',\n    mapStyle: 'amap://styles/darkblue',\n    center: [121.435159, 31.256971],\n    zoom: 14.89,\n    minZoom: 10,\n  });\n  const scene = new Scene({\n    id: 'map',\n    map: new GaodeMap({\n      mapInstance: map,\n    }),\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new PointLayer()\n          .source(data, {\n            parser: {\n              type: 'json',\n              x: 'longitude',\n              y: 'latitude',\n            },\n          })\n          .shape('name', [\n            'circle',\n            'triangle',\n            'square',\n            'pentagon',\n            'hexagon',\n            'octogon',\n            'hexagram',\n            'rhombus',\n            'vesica',\n          ])\n          .size('unit_price', [10, 25])\n          .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n          .style({\n            opacity: 0.3,\n            strokeWidth: 2,\n          });\n        scene.addLayer(pointLayer);\n      });\n  });\n}\ninitMap();\n",title:"高德地图实例化",filename:"amapInstance.js",isNew:!1},{id:"baidumap",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*goagTZojjWEAAAAAAAAAAAAADmJ7AQ/original",source:"import { Scene } from '@antv/l7';\nimport { BaiduMap } from '@antv/l7-maps';\n\nnew Scene({\n  id: 'map',\n  map: new BaiduMap({\n    center: [107.054293, 35.246265],\n    zoom: 4.056,\n    style: 'c17b1c2b528429a7b04bbc8d3eb8bae9',\n    // 百度地图的logo是否可见，默认true\n    logoVisible: false,\n  }),\n});\n",title:"百度底图",filename:"baidumap.js",isNew:!1},{id:"bmapInstance",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*A4BOR4hBNcUAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { BaiduMap } from '@antv/l7-maps';\n\nfunction initMap() {\n  // 全局加载百度地图API\n  // eslint-disable-next-line no-undef\n  const map = new BMapGL.Map('map', {\n    minZoom: 5,\n    maxZoom: 18,\n  });\n  // 百度地图需要执行centerAndZoom进行初始化\n  // eslint-disable-next-line no-undef\n  map.centerAndZoom(new BMapGL.Point(110.435159, 31.256971), 6);\n  // 默认滚轮缩放禁用，需要如下执行开启\n  map.enableScrollWheelZoom();\n  map.setMapStyleV2({\n    styleId: '344b005fd5b4220a55241c25e7733e81',\n  });\n\n  const scene = new Scene({\n    id: 'map',\n    map: new BaiduMap({\n      mapInstance: map,\n    }),\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new PointLayer({\n          autoFit: true,\n        })\n          .source(data, {\n            parser: {\n              type: 'json',\n              x: 'longitude',\n              y: 'latitude',\n            },\n          })\n          .shape('name', [\n            'circle',\n            'triangle',\n            'square',\n            'pentagon',\n            'hexagon',\n            'octogon',\n            'hexagram',\n            'rhombus',\n            'vesica',\n          ])\n          .size('unit_price', [10, 25])\n          .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n          .style({\n            opacity: 0.3,\n            strokeWidth: 2,\n          });\n        scene.addLayer(pointLayer);\n      });\n  });\n}\ninitMap();\n",title:"百度地图实例化",filename:"bmapInstance.js",isNew:!1},{id:"tencentmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*C4BvT5gcclMAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { TencentMap } from '@antv/l7-maps';\n\nnew Scene({\n  id: 'map',\n  map: new TencentMap({\n    style: 'style1',\n    center: [107.054293, 35.246265],\n    zoom: 4.056,\n  }),\n});\n",title:"腾讯底图",filename:"tencentmap.js",isNew:!1},{id:"tmapInstance",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2v8KSpMdVK0AAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { TencentMap } from '@antv/l7-maps';\n\nfunction initMap() {\n  const scene = new Scene({\n    id: 'map',\n    map: new TencentMap({\n      zoom: 10,\n      minZoom: 5,\n      maxZoom: 18,\n    }),\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new PointLayer()\n          .source(data, {\n            parser: {\n              type: 'json',\n              x: 'longitude',\n              y: 'latitude',\n            },\n          })\n          .shape('name', [\n            'circle',\n            'triangle',\n            'square',\n            'pentagon',\n            'hexagon',\n            'octogon',\n            'hexagram',\n            'rhombus',\n            'vesica',\n          ])\n          .size('unit_price', [10, 25])\n          .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n          .style({\n            opacity: 0.3,\n            strokeWidth: 2,\n          });\n        scene.addLayer(pointLayer);\n      });\n  });\n}\ninitMap();\n",title:"腾讯地图实例化",filename:"tmapInstance.js",isNew:!1},{id:"mapbox",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*twTiRJv0c5EAAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { Mapbox } from '@antv/l7-maps';\n\nfunction initMap() {\n  const scene = new Scene({\n    id: 'map',\n    map: new Mapbox({\n      zoom: 10,\n      minZoom: 0,\n      maxZoom: 18,\n      token:\n        'pk.eyJ1Ijoic2tvcm5vdXMiLCJhIjoiY2s4dDBkNjY1MG13ZTNzcWEyZDYycGkzMyJ9.tjfwvJ8G_VDmXoClOyxufg',\n    }),\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new PointLayer({\n          autoFit: true,\n        })\n          .source(data, {\n            parser: {\n              type: 'json',\n              x: 'longitude',\n              y: 'latitude',\n            },\n          })\n          .shape('name', [\n            'circle',\n            'triangle',\n            'square',\n            'pentagon',\n            'hexagon',\n            'octogon',\n            'hexagram',\n            'rhombus',\n            'vesica',\n          ])\n          .size('unit_price', [10, 25])\n          .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n          .style({\n            opacity: 1,\n            strokeWidth: 2,\n          });\n        scene.addLayer(pointLayer);\n      });\n  });\n}\ninitMap();\n",title:"Mapbox 地图",filename:"mapbox.js",isNew:!1},{id:"maplibre",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*tTFVRbgUdfMAAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { MapLibre } from '@antv/l7-maps';\n\nfunction initMap() {\n  const scene = new Scene({\n    id: 'map',\n    map: new MapLibre({\n      zoom: 10,\n      style: 'https://api.maptiler.com/maps/streets/style.json?key=YbCPLULzWdf1NplssEIc', // style URL\n      minZoom: 0,\n      maxZoom: 18,\n    }),\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n      .then((res) =>\n        res.json({\n          autoFit: true,\n        }),\n      )\n      .then((data) => {\n        const pointLayer = new PointLayer({\n          autoFit: true,\n        })\n          .source(data, {\n            parser: {\n              type: 'json',\n              x: 'longitude',\n              y: 'latitude',\n            },\n          })\n          .shape('name', [\n            'circle',\n            'triangle',\n            'square',\n            'pentagon',\n            'hexagon',\n            'octogon',\n            'hexagram',\n            'rhombus',\n            'vesica',\n          ])\n          .size('unit_price', [10, 25])\n          .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n          .style({\n            opacity: 1,\n            strokeWidth: 2,\n          });\n        scene.addLayer(pointLayer);\n      });\n  });\n}\ninitMap();\n",title:"MapLibre 地图",filename:"maplibre.js",isNew:!1},{id:"tianditu",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*10TuSJ9OF7EAAAAAAAAAAAAADmJ7AQ/original",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { TMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  logoPosition: 'bottomright',\n  map: new TMap({\n    center: [107.054293, 35.246265],\n    zoom: 5,\n  }),\n});\nscene.on('loaded', () => {\n  // fetch('https://tile0.tianditu.gov.cn/vts?t=vt&pk=agjda&tk=75f0434f240669f4a2df6359275146d2&v=1.0').then((res) => {\n  //     res.arrayBuffer().then((arrayBuffer) => {\n  //         console.log(arrayBuffer);\n  //     });\n  //  });\n  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({\n        autoFit: true,\n      })\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .shape('name', [\n          'circle',\n          'triangle',\n          'square',\n          'pentagon',\n          'hexagon',\n          'octogon',\n          'hexagram',\n          'rhombus',\n          'vesica',\n        ])\n        .size('unit_price', [10, 25])\n        .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n        .style({\n          opacity: 1,\n          strokeWidth: 2,\n        });\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"天地图",filename:"tianditu.js",isNew:!0}],icon:"",id:"map",title:{en:"Map",zh:"地图"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"point",title:{zh:"点图层",en:"Point Layer"},icon:"point",examples:[{demos:[{id:"point",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BGJfT5GYaZAAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [140.067171, 36.26186],\n    zoom: 5.32,\n    maxZoom: 10,\n  }),\n});\nscene.on('loaded', () => {\n  const plane = initPlane();\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data)\n        .shape('circle')\n        .size('mag', [1, 25])\n        .color('mag', (mag) => {\n          return mag > 4.5 ? '#5B8FF9' : '#5CCEA1';\n        })\n        .active(true)\n        .style({\n          opacity: 0.3,\n          strokeWidth: 1,\n        });\n      scene.addLayer(pointLayer);\n      pointLayer.on('click', (e) => {\n        const { lng, lat } = e.lngLat;\n        scene.setCenter([lng, lat], {\n          padding: {\n            right: 120,\n          },\n        });\n        plane.style.right = '0px';\n        plane.innerHTML = `\n          <p>click info</>\n          <p>featureId: ${e.featureId}</p>\n          <p>lng: ${lng}</p>\n          <p>lat: ${lat}</p>\n        `;\n      });\n      pointLayer.on('unclick', () => {\n        plane.style.right = '-120px';\n        scene.setCenter([140.067171, 36.26186], {\n          padding: {\n            right: 0,\n          },\n        });\n      });\n    });\n});\n\nfunction initPlane() {\n  const el = document.createElement('div');\n  el.style.background = '#fff';\n  el.style.position = 'absolute';\n  el.style.padding = '10px';\n  el.style.top = '0';\n  el.style.right = '-120px';\n  el.style.width = '100px';\n  el.style.height = '100%';\n  el.style.zIndex = '10';\n  el.style.transition = '0.5s';\n  // el.innerText = '123'\n  const wrap = document.getElementById('map');\n  wrap.appendChild(el);\n  return el;\n}\n",title:"气泡图（点击拾取）",filename:"point.js",isNew:!1},{id:"color",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*p48-TK_yGZ8AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [121.435159, 31.256971],\n    zoom: 14.89,\n    minZoom: 10,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .shape('name', [\n          'circle',\n          'triangle',\n          'square',\n          'pentagon',\n          'hexagon',\n          'octogon',\n          'hexagram',\n          'rhombus',\n          'vesica',\n        ])\n        .size('unit_price', [10, 25])\n        .active(true)\n        .color('name', ['#5B8FF9', '#5CCEA1', '#5D7092', '#F6BD16', '#E86452'])\n        .style({\n          opacity: 0.3,\n          strokeWidth: 2,\n        });\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"形状映射",filename:"color.js",isNew:!1},{id:"world",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ecV4T63Yk40AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [96.99215001469588, 29.281597225674773],\n    zoom: 2.194613775109773,\n    maxZoom: 10,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json')\n    .then((res) => res.json())\n    .then((data) => {\n      data.features = data.features.filter((item) => {\n        return item.properties.capacity > 800;\n      });\n      const pointLayer = new PointLayer({})\n        .source(data)\n        .shape('circle')\n        .size('capacity', [0, 16])\n        .color('capacity', ['#34B6B7', '#4AC5AF', '#5FD3A6', '#7BE39E', '#A1EDB8', '#CEF8D6'])\n        .active(true)\n        .style({\n          opacity: 0.5,\n          strokeWidth: 0,\n        });\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"气泡图",filename:"world.js",isNew:!1},{id:"scatter",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Jd4HQpnWQaQAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    version: '2.1.0',\n    center: [112, 23.69],\n    zoom: 2.5,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/9078fd36-ce8d-4ee2-91bc-605db8315fdf.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'Longitude',\n            y: 'Latitude',\n          },\n        })\n        .shape('circle')\n        .active(true)\n        .animate(true)\n        .size(56)\n        .color('#4cfd47');\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"气泡图动画",filename:"scatter.js",isNew:!1}],icon:"",id:"bubble",title:{en:"Bubble Map",zh:"气泡地图"},api:null,childrenKey:"demos",order:0},{demos:[{id:"cluster",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*_KdAR67mrNUAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.19382669582967, 30.258134],\n    style: 'dark',\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          cluster: true,\n        })\n        .shape('circle')\n        .scale('point_count', {\n          type: 'quantile',\n        })\n        .size('point_count', [5, 10, 15, 20, 25])\n        .active(true)\n        .color('yellow')\n        .style({\n          opacity: 0.5,\n          strokeWidth: 1,\n        });\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"聚合图",filename:"cluster.js",isNew:!1},{id:"cluster2",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ATjEQKEScq8AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene, Source } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.19382669582967, 30.258134],\n    style: 'dark',\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/87e40417-a5da-4fdb-8313-c796ea15f982.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const dataSource = new Source(data, {\n        parser: {\n          type: 'csv',\n          x: 'lng',\n          y: 'lat',\n        },\n        cluster: true,\n      });\n      const pointLayer = new PointLayer({\n        autoFit: true,\n      })\n        .source(dataSource)\n        .shape('circle')\n        .scale('point_count', {\n          type: 'quantile',\n        })\n        .size('point_count', [5, 10, 15, 20, 25])\n        .active(true)\n        .color('rgb(73,167,86)')\n        .style({\n          strokeWidth: 1,\n          stroke: '#fff',\n        });\n\n      // 聚合图标注\n      const pointLayerText = new PointLayer({\n        autoFit: false,\n      })\n        .source(dataSource)\n        .shape('point_count', 'text')\n        .size(15)\n        .active(true)\n        .color('#fff')\n        .style({\n          strokeWidth: 0,\n          stroke: '#fff',\n        });\n\n      scene.addLayer(pointLayer);\n      scene.addLayer(pointLayerText);\n    });\n});\n",title:"充电桩分布聚合图",filename:"cluster2.js",isNew:!1}],icon:"",id:"cluster",title:{en:"Cluster Map",zh:"聚合图"},api:null,childrenKey:"demos",order:1},{demos:[{id:"normal2",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OiQxQKq-P9MAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 64.88,\n    style: 'dark',\n    center: [114.060288, 22.53684],\n    zoom: 15.63,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data)\n        .size(2)\n        .color('h8', [\n          '#0A3663',\n          '#1558AC',\n          '#3771D9',\n          '#4D89E5',\n          '#64A5D3',\n          '#72BED6',\n          '#83CED6',\n          '#A6E1E0',\n          '#B8EFE2',\n          '#D7F9F0',\n        ]);\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"城市亮度图",filename:"normal2.js",isNew:!1},{id:"normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*qI2gRo_w0XoAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [121.417463, 31.215175],\n    zoom: 11,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/BElVQFEFvpAKzddxFZxJ.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const pointLayer = new PointLayer({\n        blend: 'additive',\n      })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            y: 'lat',\n            x: 'lng',\n          },\n        })\n        .size(0.5)\n        .color('#080298');\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"海量点",filename:"normal.js",isNew:!1}],icon:"",id:"dot",title:{en:"Dot Intensity",zh:"亮度图"},api:null,childrenKey:"demos",order:1},{demos:[{id:"scatter",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hH8lT6AWcqEAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [-121.24357, 37.58264],\n    zoom: 6.45,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/6c4bb5f2-850b-419d-afc4-e46032fc9f94.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'Longitude',\n            y: 'Latitude',\n          },\n        })\n        .shape('circle')\n        .size(4)\n        .active(true)\n        .color('Magnitude', [\n          '#0A3663',\n          '#1558AC',\n          '#3771D9',\n          '#4D89E5',\n          '#64A5D3',\n          '#72BED6',\n          '#83CED6',\n          '#A6E1E0',\n          '#B8EFE2',\n          '#D7F9F0',\n        ])\n        .style({\n          opacity: 0.5,\n          strokeWidth: 0,\n        });\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"散点图",filename:"scatter.js",isNew:!1},{id:"scatter_style_map",screenshot:"https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*F_QoSr-W0BwAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [112, 30.267069],\n    style: 'dark',\n    zoom: 6,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/450b2d95-006c-4bad-8269-15729269e142.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new PointLayer()\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('circle')\n        .color('color')\n        .size('value', (v) => 5 + 15 * v)\n        .style({\n          stroke: {\n            field: 'strokeColor',\n          },\n          strokeWidth: 1,\n          strokeOpacity: 1,\n          opacity: {\n            field: 'opacity',\n          },\n        })\n        .active(true);\n      scene.addLayer(layer);\n    });\n});\n",title:"样式映射散点",filename:"scatter_style_map.js",isNew:!1},{id:"blur",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*v7v6SacA_5AAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [112, 30.267069],\n    style: 'dark',\n    zoom: 3.8,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/450b2d95-006c-4bad-8269-15729269e142.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new PointLayer({ blend: 'additive' })\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('circle')\n        .color('#f00')\n        .size('value', (v) => 15 + 15 * v)\n        .style({\n          blur: 2.5,\n          opacity: {\n            field: 'opacity',\n          },\n        })\n        .active(true);\n      scene.addLayer(layer);\n    });\n});\n",title:"模糊点",filename:"blur.js",isNew:!1},{id:"animatepoint",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*N7KDR4kfIDQAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [112, 23.69],\n    zoom: 2.5,\n  }),\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/9078fd36-ce8d-4ee2-91bc-605db8315fdf.csv')\n  .then((res) => res.text())\n  .then((data) => {\n    const pointLayer = new PointLayer({})\n      .source(data, {\n        parser: {\n          type: 'csv',\n          x: 'Longitude',\n          y: 'Latitude',\n        },\n      })\n      .shape('circle')\n      .active(true)\n      .animate(true)\n      .size(40)\n      .color('#ffa842')\n      .style({\n        offsets: [40, 40],\n      });\n    const pointLayer2 = new PointLayer({})\n      .source(data, {\n        parser: {\n          type: 'csv',\n          x: 'Longitude',\n          y: 'Latitude',\n        },\n      })\n      .shape('circle')\n      .active(true)\n      .animate(true)\n      .size(50)\n      .color('#f00');\n\n    scene.addLayer(pointLayer);\n    scene.addLayer(pointLayer2);\n  });\n",title:"水波散点",filename:"animatepoint.js",isNew:!1},{id:"radarpoint",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*nfAwRaTOYj0AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120, 30],\n    zoom: 13,\n  }),\n});\n\nconst layer = new PointLayer()\n  .source(\n    [\n      {\n        lng: 120,\n        lat: 30,\n      },\n    ],\n    {\n      parser: {\n        type: 'json',\n        x: 'lng',\n        y: 'lat',\n      },\n    },\n  )\n  .shape('radar')\n  .size(100)\n  .color('#d00')\n  .style({\n    speed: 5,\n  })\n  .animate(true);\n\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n});\n",title:"雷达图",filename:"radarpoint.js",isNew:!1}],icon:"",id:"scatter",title:{en:"Scatter Map",zh:"散点地图"},api:null,childrenKey:"demos",order:1},{demos:[{id:"point_text",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*QAfOQr1alNoAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [110, 36],\n    style: 'dark',\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('m', 'text')\n        .size(12)\n        .color('#084081')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [0, 0], // 文本相对锚点的偏移量 [水平, 垂直]\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          strokeWidth: 2, // 描边宽度\n          strokeOpacity: 1.0,\n          // rotation: 60, // 常量旋转\n          rotation: {\n            // 字段映射旋转\n            field: 't',\n            value: [30, 270],\n          },\n        });\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"点数据标注",filename:"point_text.js",isNew:!1},{id:"polygon_text",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1iRfT56__38AAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [-96, 37.8],\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new PolygonLayer({})\n        .source(data)\n        .color('blue')\n        .shape('name', 'text')\n        .size(18)\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [0, 0], // 文本相对锚点的偏移量 [水平, 垂直]\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          strokeWidth: 0.3, // 描边宽度\n          strokeOpacity: 1.0,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"面数据标注",filename:"polygon_text.js",isNew:!1},{id:"iconfont",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1Ox-T7mht18AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [110, 30],\n    style: 'amap://styles/453e2f8e11603fc8f7548fe18959e9e9',\n    zoom: 5,\n  }),\n});\nconst fontFamily = 'iconfont';\nconst fontPath = '//at.alicdn.com/t/font_2534097_fcae9o2mxbv.woff2?t=1622200439140';\nscene.addFontFace(fontFamily, fontPath);\nscene.addIconFont('icon1', '&#xe6d4;');\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/70408903-80db-4278-a318-461604acb2df.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('icon', 'text')\n        .size(20)\n        .color('w', ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'])\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          padding: [0, 0], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          fontFamily,\n          iconfont: true,\n          textAllowOverlap: true,\n        });\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"图标标注",filename:"iconfont.js",isNew:!1},{id:"iconfonts",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NCz5R7YA3VIAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.5, 30.2],\n    style: 'dark',\n    zoom: 8.5,\n    zooms: [8, 10],\n  }),\n});\nconst fontFamily = 'iconfont';\nconst fontPath = '//at.alicdn.com/t/font_2534097_ao9soua2obv.woff2?t=1622021146076';\nscene.addFontFace(fontFamily, fontPath);\nscene.addIconFonts([\n  ['smallRain', '&#xe6f7;'],\n  ['middleRain', '&#xe61c;'],\n  ['hugeRain', '&#xe6a6;'],\n  ['sun', '&#xe6da;'],\n  ['cloud', '&#xe8da;'],\n]);\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/9eb3f1b5-0c3b-49b2-8221-191d4ba8aa5e.json')\n    .then((res) => res.json())\n    .then((originData) => {\n      const layer = new PointLayer()\n        .source(originData, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('circle')\n        .color('backgoundColor')\n        .size(42);\n      scene.addLayer(layer);\n\n      const pointIconFontLayer = new PointLayer({})\n        .source(originData, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('iconType', 'text')\n        .size(30)\n        .color('iconColor')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [-10, 10], // 文本相对锚点的偏移量 [水平, 垂直]\n          fontFamily,\n          iconfont: true,\n          textAllowOverlap: true,\n        });\n      scene.addLayer(pointIconFontLayer);\n\n      const textLayer = new PointLayer({})\n        .source(originData, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('temperature', 'text')\n        .size(10)\n        .color('#ffffff')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [5, -55], // 文本相对锚点的偏移量 [水平, 垂直]\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          strokeWidth: 0.3, // 描边宽度\n          strokeOpacity: 1.0,\n          fontFamily: 'Times New Roman',\n          textAllowOverlap: true,\n        });\n      scene.addLayer(textLayer);\n\n      const textLayer2 = new PointLayer({})\n        .source(originData, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('weather', 'text')\n        .size(14)\n        .color('#ffffff')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [5, -15], // 文本相对锚点的偏移量 [水平, 垂直]\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          strokeWidth: 0.3, // 描边宽度\n          strokeOpacity: 1.0,\n          fontFamily: 'Times New Roman',\n          textAllowOverlap: true,\n        });\n      scene.addLayer(textLayer2);\n    });\n});\n",title:"天气图标标注",filename:"iconfonts.js",isNew:!1},{id:"style_map",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cfShR4lVaUYAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.5, 30.2],\n    style: 'dark',\n    zoom: 7.5,\n    zooms: [8, 10],\n  }),\n});\n\nconst fontFamily = 'iconfont';\nconst fontPath = '//at.alicdn.com/t/font_2534097_ao9soua2obv.woff2?t=1622021146076';\nscene.addIconFonts([\n  ['smallRain', '&#xe6f7;'],\n  ['middleRain', '&#xe61c;'],\n  ['hugeRain', '&#xe6a6;'],\n  ['sun', '&#xe6da;'],\n  ['cloud', '&#xe8da;'],\n]);\nscene.addFontFace(fontFamily, fontPath);\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/f7d083e2-ad55-44fd-b324-15e1b549948a.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointIconFontLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('iconType', 'text')\n        .size(30)\n        .color('red')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          // textOffset: 'textOffset', // 文本相对锚点的偏移量 [水平, 垂直]\n          fontFamily,\n          iconfont: true,\n          textAllowOverlap: true,\n        });\n      scene.addLayer(pointIconFontLayer);\n\n      const textLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('weather', 'text')\n        .size(16)\n        .color('#fff')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [0, 0], // 文本相对锚点的偏移量 [水平, 垂直]\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          fontFamily: 'Times New Roman',\n          textAllowOverlap: true,\n        });\n      scene.addLayer(textLayer);\n    });\n});\n",title:"文本动态偏移",filename:"style_map.js",isNew:!1},{id:"temperture",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*nvwuQIi8_9oAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PointLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 40,\n    center: [118.8, 32.056],\n    zoom: 12.5,\n  }),\n});\nconst fontFamily = 'iconfont';\nconst fontPath = '//at.alicdn.com/t/font_2534097_x6rsov3i1g.woff2?t=1622107341225';\nscene.addIconFont('icon', '&#xe69e;');\nscene.addFontFace(fontFamily, fontPath);\n\nconst colors = [\n  '#87CEFA',\n  '#00BFFF',\n\n  '#7FFFAA',\n  '#00FF7F',\n  '#32CD32',\n\n  '#F0E68C',\n  '#FFD700',\n\n  '#FF7F50',\n  '#FF6347',\n  '#FF0000',\n];\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/94763191-2816-4c1a-8d0d-8bcf4181056a.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const filllayer = new PolygonLayer({\n        name: 'fill',\n        zIndex: 3,\n      })\n        .source(data)\n        .shape('fill')\n        .color('count', ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#756bb1', '#54278f'])\n        .style({\n          opacity: 0.6,\n          opacityLinear: {\n            enable: true,\n            dir: 'out', // in - out\n          },\n        });\n      scene.addLayer(filllayer);\n\n      const linelayer = new LineLayer({\n        zIndex: 5,\n        name: 'line2',\n      })\n        .source(data)\n        .shape('line')\n        .size(1)\n        .color('#fff')\n        .style({\n          opacity: 0.3,\n        });\n      scene.addLayer(linelayer);\n\n      const pointLayer = new PointLayer({\n        zIndex: 10,\n      })\n        .source(data)\n        .shape('icon', 'text')\n        .size(25)\n        .color('count', (t) => {\n          const c = Number(t.replace('℃', ''));\n          return colors[Math.floor(((c - 18) / 16) * 10)];\n        })\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [-25, 15],\n          padding: [2, 2],\n          fontFamily,\n          iconfont: true,\n          textAllowOverlap: true,\n        });\n      scene.addLayer(pointLayer);\n\n      const tempertureLayer = new PointLayer({\n        zIndex: 10,\n      })\n        .source(data)\n        .shape('count', 'text')\n        .size(12)\n        .color('count', (t) => {\n          const c = Number(t.replace('℃', ''));\n          return colors[Math.floor(((c - 18) / 16) * 10)];\n        })\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [35, 30],\n          padding: [1, 1],\n        });\n      scene.addLayer(tempertureLayer);\n    });\n});\n",title:"气温图标标注",filename:"temperture.js",isNew:!1},{id:"simplecoordinate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OXlZRKw7AoUAAAAAAAAAAAAAARQnAQ",source:"import { ImageLayer, PointLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [500, 500],\n    zoom: 3,\n    version: 'SIMPLE',\n    mapSize: 1000,\n    maxZoom: 5,\n    minZoom: 2,\n    pitchEnabled: false,\n    rotateEnabled: false,\n  }),\n});\nscene.setBgColor('rgb(94, 182, 140)');\n\nconst imagelayer = new ImageLayer({}).source(\n  'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*I0X5R4jAUQ4AAAAAAAAAAAAAARQnAQ',\n  {\n    parser: {\n      type: 'image',\n      extent: [360, 400, 640, 600],\n    },\n  },\n);\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/7dc0d454-fabc-4461-a5d5-d404dadb49a9.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const textlayer = new PointLayer({ zIndex: 2 })\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'x',\n            y: 'y',\n          },\n        })\n        .shape('t', 'text')\n        .size(12)\n        .active({\n          color: '#00f',\n          mix: 0.9,\n        })\n        .color('rgb(86, 156, 214)')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          spacing: 2, // 字符间距\n          fontWeight: '800',\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#ffffff', // 描边颜色\n          strokeWidth: 2, // 描边宽度\n          textAllowOverlap: true,\n        });\n      scene.addLayer(textlayer);\n    });\n\n  scene.addLayer(imagelayer);\n});\n",title:"平面区域标注",filename:"simplecoordinate.js",isNew:!1}],icon:"",id:"text",title:{en:"label",zh:"文本标注"},api:null,childrenKey:"demos",order:1},{demos:[{id:"image",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*uzwBSLxwZGMAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [121.434765, 31.256735],\n    zoom: 14.83,\n  }),\n});\nscene.addImage(\n  '00',\n  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n);\nscene.addImage(\n  '01',\n  'https://gw.alipayobjects.com/zos/basement_prod/30580bc9-506f-4438-8c1a-744e082054ec.svg',\n);\nscene.addImage(\n  '02',\n  'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',\n);\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const imageLayer = new PointLayer()\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .shape('name', ['00', '01', '02'])\n        .size(10);\n      const imageLayerText = new PointLayer()\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .shape('name', 'text')\n        .color('#f00')\n        .size(25)\n        .style({\n          textOffset: [0, 20],\n        });\n      scene.addLayer(imageLayer);\n      scene.addLayer(imageLayerText);\n    });\n});\n",title:"符号图",filename:"image.js",isNew:!1},{id:"locate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*rkFFQYBOJt4AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [116.276227, 35.256776],\n    zoom: 6,\n  }),\n});\nscene.addImage(\n  'marker',\n  'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*BJ6cTpDcuLcAAAAAAAAAAABkARQnAQ',\n);\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/e2fc6e0a-af2a-4320-96e5-d9f5a5fda442.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const imageLayer = new PointLayer().source(data).shape('marker').size(12);\n      scene.addLayer(imageLayer);\n    });\n});\n",title:"精确符号",filename:"locate.js",isNew:!1},{id:"weather",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CC5YRp2OY3gAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [120.5969, 29.7918],\n    pitch: 35,\n    zoom: 7,\n    rotation: 4.183582,\n  }),\n});\nscene.on('loaded', () => {\n  scene.addImage(\n    '00',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*kzTMQqS2QdUAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '01',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*jH1XRb7F7hMAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '02',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*YaKSTr3L5i8AAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '04',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*dmniQrDpCYwAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '11',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*YaKSTr3L5i8AAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '15',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*YNlXQYCIzroAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '07',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*DccRTI6ZRLoAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '16',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*iQKoS6I-rO8AAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '06',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*f-wyS7ad5p0AAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '08',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*lHhzQrOW4AQAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '17',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*9Q0QS4GdaYcAAAAAAAAAAABkARQnAQ',\n  );\n  scene.addImage(\n    '05',\n    'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*LyuVRowl6nAAAAAAAAAAAABkARQnAQ',\n  );\n  fetch('https://gw.alipayobjects.com/os/basement_prod/c6042c6b-45fd-4e2e-adf8-fdbf060441e8.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const imageLayer = new PointLayer()\n        .source(data)\n        .shape('w', function (w) {\n          return w;\n        })\n        .size(15);\n      scene.addLayer(imageLayer);\n    });\n});\n",title:"天气",filename:"weather.js",isNew:!1},{id:"monsoon",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Zq5ZTKNeU6sAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [105, 35],\n    zoom: 2.5,\n  }),\n});\n\nscene.addImage(\n  'arrRed',\n  'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*KWGqT6Oz50EAAAAAAAAAAAAAARQnAQ',\n);\nscene.addImage(\n  'arrBlue',\n  'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ZKhURq53OgIAAAAAAAAAAAAAARQnAQ',\n);\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/4c02515b-cb7a-47be-93cf-5596731ef982.json')\n    .then((res) => res.json())\n    .then((monsoon) => {\n      const { data, borderData } = monsoon;\n      const imageLayer = new PointLayer()\n        .source(data)\n        .shape('wind', (wind) => {\n          if (wind === 'up') {\n            return 'arrBlue';\n          }\n          return 'arrRed';\n        })\n        .size(15)\n        .style({\n          rotation: {\n            field: 'r',\n            value: [0, 90, 180, 270],\n          },\n          billboard: false, // 图片图层只有非精灵模式支持旋转\n        });\n      scene.addLayer(imageLayer);\n\n      const border = new LineLayer()\n        .source(borderData)\n        .size(1.5)\n        .color('#575757')\n        .style({\n          lineType: 'dash',\n          dashArray: [5, 5],\n        });\n      scene.addLayer(border);\n\n      const text = new PointLayer({ zIndex: 2 })\n        .source(\n          [\n            { lng: 90, lat: 35, n: '非季风区' },\n            { lng: 125, lat: 30, n: '季风区' },\n          ],\n          {\n            parser: {\n              type: 'json',\n              x: 'lng',\n              y: 'lat',\n            },\n          },\n        )\n        .shape('n', 'text')\n        .size(25)\n        .color('#575757')\n        .style({\n          spacing: 20,\n        });\n\n      scene.addLayer(text);\n    });\n});\n",title:"季风分布",filename:"monsoon.js",isNew:!1}],icon:"",id:"image",title:{en:"Symbol Map",zh:"符号地图"},api:null,childrenKey:"demos",order:2},{demos:[{id:"column_light",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*UGw1T6ms2D0AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 60,\n    style: 'dark',\n    center: [110, 31.847],\n    rotation: 0,\n    zoom: 4,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({ depth: false })\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('cylinder')\n        .size('t', function (level) {\n          return [1, 1, level * 2 + 20];\n        })\n        .active(true)\n        .color('#006CFF')\n        .style({\n          opacity: 0.6,\n          opacityLinear: {\n            enable: true, // true - false\n            dir: 'up', // up - down\n          },\n          lightEnable: false,\n        });\n      pointLayer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>${e.feature.s}: ${e.feature.t}℃</span>`);\n        scene.addPopup(popup);\n      });\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"3D柱图 光标",filename:"column_light.js",isNew:!1},{id:"column_linear",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GJhASbfQTK8AAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 70,\n    style: 'dark',\n    center: [105, 31.847],\n    rotation: 0,\n    zoom: 4.2,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({ depth: false })\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('cylinder')\n        .size('t', function (level) {\n          return [1, 1, level * 2 + 20];\n        })\n        .animate(true)\n        .active(true)\n        .color('#006CFF')\n        .style({\n          opacity: 0.8,\n          sourceColor: 'red',\n          targetColor: 'yellow',\n          lightEnable: false,\n        });\n      pointLayer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>${e.feature.s}: ${e.feature.t}℃</span>`);\n        scene.addPopup(popup);\n      });\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"3D 渐变柱图",filename:"column_linear.js",isNew:!1},{id:"column_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*FG4fT7h5AYMAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 40,\n    style: 'dark',\n    center: [104.288144, 31.239692],\n    zoom: 4.4,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data.list, {\n          parser: {\n            type: 'json',\n            x: 'j',\n            y: 'w',\n          },\n        })\n        .shape('cylinder')\n        .size('t', function (level) {\n          return [2, 2, level * 2 + 20];\n        })\n        .animate(true)\n        .active(true)\n        .color('t', [\n          '#094D4A',\n          '#146968',\n          '#1D7F7E',\n          '#289899',\n          '#34B6B7',\n          '#4AC5AF',\n          '#5FD3A6',\n          '#7BE39E',\n          '#A1EDB8',\n          '#CEF8D6',\n        ]);\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"3D柱图 深色底图",filename:"column_dark.js",isNew:!1},{id:"clumn_shape",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*9EoxQpBxNyIAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 66.02383,\n    style: 'dark',\n    center: [121.400257, 31.25287],\n    zoom: 14.55,\n    rotation: 134.95,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .animate(true)\n        .active(true)\n        .shape('name', ['cylinder', 'triangleColumn', 'hexagonColumn', 'squareColumn'])\n        .size('unit_price', (h) => {\n          return [6, 6, h / 500];\n        })\n        .color('name', ['#739DFF', '#61FCBF', '#FFDE74', '#FF896F']);\n\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"3D 深色柱图",filename:"clumn_shape.js",isNew:!1}],icon:"",id:"column",title:{en:"Column Map",zh:"3D 柱状地图"},api:null,childrenKey:"demos",order:4},{demos:[{id:"simple",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NHMmTr0SMFQAAAAAAAAAAAAAARQnAQ",source:"import { PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 20,\n    style: 'light',\n    center: [120, 20],\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data)\n        .shape('simple')\n        .size(15)\n        .color('mag', (mag) => {\n          return mag > 4.5 ? '#5B8FF9' : '#5CCEA1';\n        })\n        .active(true)\n        .style({\n          opacity: 0.6,\n          strokeWidth: 3,\n        });\n      scene.addLayer(pointLayer);\n    });\n});\n",title:"简单点图层",filename:"simple.js",isNew:!1}],icon:"",id:"simple",title:{en:"Simple Point",zh:"简单点"},api:null,childrenKey:"demos",order:4},{demos:[{id:"custom",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*7FgbRppWc38AAAAAAAAAAAAAARQnAQ",source:"import { CanvasLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nlet x = 0;\nfunction draw(option) {\n  const { size, ctx, mapService } = option;\n  const [width, height] = size;\n\n  const radius = 30,\n    rectWidth = radius * 2;\n  const rectHeight = rectWidth;\n\n  ctx.clearRect(0, 0, width, height);\n\n  const points = [\n    {\n      lng: 108.544921875,\n      lat: 30.977609093348686,\n      level: 85,\n      color: 'rgba(\t220,20,60, 0.6)',\n    },\n    {\n      lng: 110.654296875,\n      lat: 31.090574094954192,\n      level: 75,\n      color: 'rgba(\t255,140,0, 0.6)',\n    },\n    {\n      lng: 112.5,\n      lat: 29.80251790576445,\n      level: 65,\n      color: 'rgba(255,165,0, 0.6)',\n    },\n    {\n      lng: 114.78515624999999,\n      lat: 30.64867367928756,\n      level: 40,\n      color: 'rgba(30,144,255, 0.6)',\n    },\n    {\n      lng: 116.49902343749999,\n      lat: 29.84064389983441,\n      level: 50,\n      color: 'rgba(30,144,255, 0.6)',\n    },\n    {\n      lng: 118.21289062499999,\n      lat: 31.16580958786196,\n      level: 20,\n      color: 'rgba(\t127,255,0, 0.6)',\n    },\n    {\n      lng: 119.091796875,\n      lat: 32.509761735919426,\n      level: 50,\n      color: 'rgba(30,144,255, 0.6)',\n    },\n    {\n      lng: 121.0693359374999,\n      lat: 31.80289258670676,\n      level: 45,\n      color: 'rgba(30,144,255, 0.6)',\n    },\n  ];\n  ctx.fillStyle = 'rgb(35,75,225)';\n  ctx.font = 'normal small-caps bold 14px arial';\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n\n  points.map((point) => {\n    const pixelCenter = mapService.lngLatToContainer([point.lng, point.lat]);\n    pixelCenter.x *= window.devicePixelRatio;\n    pixelCenter.y *= window.devicePixelRatio;\n    const rectStartX = pixelCenter.x - radius;\n    const rectStartY = pixelCenter.y - radius;\n\n    ctx.save();\n\n    ctx.fillText(point.level + '%', pixelCenter.x, pixelCenter.y);\n\n    ctx.beginPath();\n    ctx.arc(pixelCenter.x, pixelCenter.y, radius, 0, Math.PI * 2);\n    ctx.fillStyle = 'rgba(135,206,250,0.2)';\n    ctx.closePath();\n    ctx.fill();\n    ctx.clip();\n\n    ctx.beginPath();\n    ctx.fillStyle = point.color;\n    ctx.moveTo(rectStartX, pixelCenter.y);\n\n    const waterheight = rectStartY + ((100 - point.level) / 100) * rectHeight;\n    for (let i = 0; i <= rectWidth; i += 10) {\n      ctx.lineTo(rectStartX + i, waterheight + Math.sin(Math.PI * 2 * (i / rectWidth) + x) * 3 + 1);\n    }\n\n    ctx.lineTo(pixelCenter.x + radius, pixelCenter.y + radius);\n    ctx.lineTo(rectStartX, pixelCenter.y + radius);\n    ctx.lineTo(rectStartX, pixelCenter.y);\n    ctx.closePath();\n\n    ctx.fill();\n\n    ctx.restore();\n    return '';\n  });\n  return '';\n}\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'fresh',\n    center: [115, 31],\n    zoom: 5.0,\n  }),\n});\nscene.on('loaded', () => {\n  const layer = new CanvasLayer({\n    zIndex: 10,\n    trigger: 'change',\n  });\n  layer.draw(draw);\n  scene.addLayer(layer);\n\n  setInterval(() => {\n    x += 0.1;\n    scene.render();\n    return '';\n  }, 30);\n\n  layer.on('add', () => {\n    layer.getCanvas().addEventListener('click', (e) => {\n      console.log(e);\n    });\n  });\n});\n",title:"自定义水位图",filename:"custom.js",isNew:!1},{id:"custom2",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*SsiSTaYwCBgAAAAAAAAAAAAAARQnAQ",source:"import { CanvasLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'fresh',\n    center: [90, 31],\n    zoom: 2,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new CanvasLayer({}).style({\n        zIndex: 10,\n        update: 'dragend',\n        drawingOnCanvas: (option) => {\n          const { size, ctx, mapService } = option;\n          const [width, height] = size;\n\n          ctx.clearRect(0, 0, width, height);\n          ctx.fillStyle = 'rgba(0, 200, 0, 0.2)';\n          data.features.map((feature) => {\n            const pixelCenter = mapService.lngLatToContainer(feature.geometry.coordinates);\n            pixelCenter.x *= window.devicePixelRatio;\n            pixelCenter.y *= window.devicePixelRatio;\n            if (\n              pixelCenter.x < 0 ||\n              pixelCenter.y < 0 ||\n              pixelCenter.x > width ||\n              pixelCenter.y > height\n            ) {\n              return '';\n            }\n            ctx.beginPath();\n            ctx.arc(\n              pixelCenter.x,\n              pixelCenter.y,\n              feature.properties.capacity / 200,\n              0,\n              Math.PI * 2,\n            );\n            ctx.fill();\n            ctx.closePath();\n            return '';\n          });\n          return '';\n        },\n      });\n\n      scene.addLayer(layer);\n      return '';\n    });\n  return '';\n});\n",title:"自定义气泡图",filename:"custom2.js",isNew:!1},{id:"bar",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*XEPUSISnWUAAAAAAAAAAAAAAARQnAQ",source:"import * as G2 from '@antv/g2';\nimport { Marker, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [2.6125016864608597, 49.359131],\n    zoom: 4.19,\n  }),\n});\nscene.on('loaded', () => {\n  addChart();\n  scene.render();\n});\nfunction addChart() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/0b96cca4-7e83-449a-93d0-2a77053e74ab.json')\n    .then((res) => res.json())\n    .then((data) => {\n      data.nodes.forEach(function (item) {\n        const el = document.createElement('div');\n        const total = item.gdp.Agriculture + item.gdp.Industry + item.gdp.Service;\n\n        const size = Math.min(parseInt(total / 30000, 10), 70);\n        if (size < 30) {\n          return;\n        }\n        const itemData = [\n          {\n            item: 'Agriculture',\n            count: item.gdp.Agriculture,\n            percent: item.gdp.Agriculture / total,\n          },\n          {\n            item: 'Industry',\n            count: item.gdp.Industry,\n            percent: item.gdp.Industry / total,\n          },\n          {\n            item: 'Service',\n            count: item.gdp.Service,\n            percent: item.gdp.Service / total,\n          },\n        ];\n\n        const chart = new G2.Chart({\n          container: el,\n          width: size,\n          height: size,\n          render: 'svg',\n          padding: 0,\n        });\n        chart.legend(false);\n        chart.data(itemData);\n        chart.tooltip(false);\n\n        chart.axis('count', false);\n        chart.axis('item', false);\n        chart.interval().position('item*count').color('item', ['#5CCEA1', '#5D7092', '#5B8FF9']);\n        chart.render();\n        const marker = new Marker({\n          element: el,\n        }).setLnglat({\n          lng: item.coordinates[0],\n          lat: item.coordinates[1],\n        });\n        scene.addMarker(marker);\n      });\n    });\n}\n",title:"柱图",filename:"bar.js",isNew:!1},{id:"chart",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EqfuRqkVZG4AAAAAAAAAAAAAARQnAQ",source:"import * as G2 from '@antv/g2';\nimport { Marker, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [2.6125016864608597, 49.359131],\n    zoom: 4.19,\n  }),\n});\nscene.on('loaded', () => {\n  addChart();\n  scene.render();\n});\nfunction addChart() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/0b96cca4-7e83-449a-93d0-2a77053e74ab.json')\n    .then((res) => res.json())\n    .then((data) => {\n      data.nodes.forEach(function (item) {\n        const el = document.createElement('div');\n        const total = item.gdp.Agriculture + item.gdp.Industry + item.gdp.Service;\n\n        const size = Math.min(parseInt(total / 30000, 10), 70);\n        if (size < 30) {\n          return;\n        }\n        const itemData = [\n          {\n            item: 'Agriculture',\n            count: item.gdp.Agriculture,\n            percent: item.gdp.Agriculture / total,\n          },\n          {\n            item: 'Industry',\n            count: item.gdp.Industry,\n            percent: item.gdp.Industry / total,\n          },\n          {\n            item: 'Service',\n            count: item.gdp.Service,\n            percent: item.gdp.Service / total,\n          },\n        ];\n\n        const chart = new G2.Chart({\n          container: el,\n          width: size,\n          height: size,\n          render: 'svg',\n          padding: 0,\n        });\n        console.log(chart);\n        chart.legend(false);\n        chart.data(itemData);\n        chart.coord('theta', {\n          innerRadius: 0.6,\n        });\n        chart.tooltip(false);\n        chart\n          .interval()\n          .adjust('stack')\n          .position('percent')\n          .color('item', ['#5CCEA1', '#5D7092', '#5B8FF9'])\n          .shape('sliceShape');\n        chart.render();\n        const marker = new Marker({\n          element: el,\n        }).setLnglat({\n          lng: item.coordinates[0],\n          lat: item.coordinates[1],\n        });\n        scene.addMarker(marker);\n      });\n    });\n}\n",title:"环图",filename:"chart.js",isNew:!1}],icon:"",id:"chart",title:{en:"Chart Map",zh:"复合图表地图"},api:null,childrenKey:"demos",order:6}],childrenKey:"examples"},{id:"line",title:{zh:"线图层",en:"Line Layer"},icon:"line",examples:[{demos:[{id:"shanghai_bus",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EkhYRbNGkswAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.472644, 31.231706],\n    zoom: 8.15,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/0290a972-eedd-42f6-b69e-50a35e8a0824.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            coordinates: 'coordinates',\n          },\n        })\n        .size(0.5)\n        .shape('line')\n        .active(true)\n        .color('length', [\n          '#0A3663',\n          '#1558AC',\n          '#3771D9',\n          '#4D89E5',\n          '#64A5D3',\n          '#72BED6',\n          '#83CED6',\n          '#A6E1E0',\n          '#B8EFE2',\n          '#D7F9F0',\n        ]);\n      scene.addLayer(layer);\n    });\n});\n",title:"上海公交",filename:"shanghai_bus.js",isNew:!1},{id:"bus_light",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*sSx9TIOthmkAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [103.83735604457024, 1.360253881403068],\n    zoom: 9.4678190476727,\n    pitch: 20,\n    style: 'light',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/ee07641d-5490-4768-9826-25862e8019e1.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            coordinates: 'path',\n          },\n        })\n        .size('level', (level) => {\n          return [0.8, level * 0.1];\n        })\n        .shape('line')\n        .active(true)\n        .color(\n          'level',\n          [\n            '#0A3663',\n            '#1558AC',\n            '#3771D9',\n            '#4D89E5',\n            '#64A5D3',\n            '#72BED6',\n            '#83CED6',\n            '#A6E1E0',\n            '#B8EFE2',\n            '#D7F9F0',\n          ]\n            .reverse()\n            .slice(0, 8),\n        );\n      layer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>车次: ${e.feature.number}</span>`);\n        scene.addPopup(popup);\n      });\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 公交线路-亮",filename:"bus_light.js",isNew:!1},{id:"bus_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*92cnRJiUIf4AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [103.83735, 1.3602538],\n    zoom: 9.4678190476727,\n    pitch: 20,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/ee07641d-5490-4768-9826-25862e8019e1.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            coordinates: 'path',\n          },\n        })\n        .size('level', (level) => {\n          return [0.8, level * 0.1];\n        })\n        .shape('line')\n        .color(\n          'level',\n          [\n            '#312B60',\n            '#4A457E',\n            '#615C99',\n            '#816CAD',\n            '#A67FB5',\n            '#C997C7',\n            '#DEB8D4',\n            '#F5D4E6',\n            '#FAE4F1',\n            '#FFF3FC',\n          ].slice(0, 8),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 公交线路-暗",filename:"bus_dark.js",isNew:!1},{id:"road_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Zq3ORrdexZwAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [116.3956, 39.9392],\n    pitch: 20,\n    zoom: 10,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/0d2f0113-f48b-4db9-8adc-a3937243d5a3.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size(4)\n        .shape('line')\n        .color('标准名称', ['#5B8FF9', '#5CCEA1', '#F6BD16'])\n        .style({\n          borderWidth: 0.4,\n          borderColor: '#fff',\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"路径边框",filename:"road_dark.js",isNew:!1},{id:"line_blur",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*VLqpRZprB18AAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [122, 28],\n    zoom: 5,\n    style: 'dark',\n  }),\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/55304d8d-4cb0-49e0-9d95-9eeacbe1c80a.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const blurLine = new LineLayer().source(data).size(5).style({\n      opacity: 0.8,\n      sourceColor: '#f00',\n      targetColor: '#ff0',\n      linearDir: 'horizontal',\n    });\n    scene.addLayer(blurLine);\n  });\n",title:"路径 blur",filename:"line_blur.js",isNew:!1},{id:"road_dark_dash",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*vZFUTaBCGoEAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [116.3956, 39.9392],\n    zoom: 10,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/0d2f0113-f48b-4db9-8adc-a3937243d5a3.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size(1.5)\n        .shape('line')\n        .color('标准名称', ['#5B8FF9', '#5CCEA1', '#F6BD16'])\n        .style({\n          lineType: 'dash',\n          dashArray: [5, 5],\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"路径虚线",filename:"road_dark_dash.js",isNew:!1}],icon:"",id:"path",title:{en:"Path Map",zh:"路径地图"},api:null,childrenKey:"demos",order:0},{demos:[{id:"wind_animate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*wH50SZfOywcAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [60, 40.7128],\n    zoom: 2,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/7455fead-1dc0-458d-b91a-fb4cf99e701e.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({ blend: 'normal' })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng1',\n            y: 'lat1',\n            x1: 'lng2',\n            y1: 'lat2',\n          },\n        })\n        .size(1)\n        .shape('arc')\n        .color('#6495ED')\n        .animate({\n          duration: 4,\n          interval: 0.2,\n          trailLength: 0.6,\n        });\n      // .forward(false)\n      scene.addLayer(layer);\n    });\n});\n",title:"风场动画",filename:"wind_animate.js",isNew:!1},{id:"line_animate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*eckNS70gTfwAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [107.77791556935472, 35.443286920228644],\n    zoom: 2.9142882493605033,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({\n        blend: 'normal',\n      })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng1',\n            y: 'lat1',\n            x1: 'lng2',\n            y1: 'lat2',\n          },\n        })\n        .size(1)\n        .shape('greatcircle')\n        .animate({\n          enable: true,\n          interval: 0.1,\n          trailLength: 0.5,\n          duration: 2,\n        })\n        .color('#8C1EB2')\n        .style({\n          opacity: 0.8,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"直线动画",filename:"line_animate.js",isNew:!1},{id:"plane_animate2",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*2wDIS5hXKYwAAAAAAAAAAAAAARQnAQ",source:"/* eslint-disable no-eval */\nimport { LineLayer, PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 40,\n    center: [40, 40.16797],\n    style: 'dark',\n    zoom: 2.5,\n  }),\n});\nscene.addImage(\n  'plane',\n  'https://gw.alipayobjects.com/zos/bmw-prod/0ca1668e-38c2-4010-8568-b57cb33839b9.svg',\n);\nscene.on('loaded', () => {\n  Promise.all([\n    fetch(\n      'https://gw.alipayobjects.com/os/bmw-prod/2960e1fc-b543-480f-a65e-d14c229dd777.json',\n    ).then((d) => d.json()),\n    fetch(\n      'https://gw.alipayobjects.com/os/basement_prod/4472780b-fea1-4fc2-9e4b-3ca716933dc7.json',\n    ).then((d) => d.text()),\n    fetch(\n      'https://gw.alipayobjects.com/os/basement_prod/a5ac7bce-181b-40d1-8a16-271356264ad8.json',\n    ).then((d) => d.text()),\n  ]).then(function onLoad([world, dot, flyline]) {\n    const dotData = eval(dot);\n    // @ts-ignore\n    const flydata = eval(flyline).map((item) => {\n      // @ts-ignore\n      const latlng1 = item.from.split(',').map((e) => {\n        return e * 1;\n      });\n      // @ts-ignore\n      const latlng2 = item.to.split(',').map((e) => {\n        return e * 1;\n      });\n      return { coord: [latlng1, latlng2] };\n    });\n\n    const worldLine = new LineLayer().source(world).color('#41fc9d').size(0.5).style({\n      opacity: 0.4,\n    });\n    const dotPoint = new PointLayer()\n      .source(dotData, {\n        parser: {\n          type: 'json',\n          x: 'lng',\n          y: 'lat',\n        },\n      })\n      .shape('circle')\n      .color('#ffed11')\n      .animate(true)\n      .size(40);\n    const flyLine = new LineLayer({ blend: 'normal' })\n      .source(flydata, {\n        parser: {\n          type: 'json',\n          coordinates: 'coord',\n        },\n      })\n      .color('#ff6b34')\n      .texture('plane')\n      .shape('arc')\n      .size(15)\n      .animate({\n        duration: 1,\n        interval: 0.2,\n        trailLength: 0.05,\n      })\n      .style({\n        textureBlend: 'replace',\n        lineTexture: true, // 开启线的贴图功能\n        iconStep: 10, // 设置贴图纹理的间距\n      });\n\n    const flyLine2 = new LineLayer()\n      .source(flydata, {\n        parser: {\n          type: 'json',\n          coordinates: 'coord',\n        },\n      })\n      .color('#ff6b34')\n      .shape('arc')\n      .size(1)\n      .style({\n        lineType: 'dash',\n        dashArray: [5, 5],\n        opacity: 0.5,\n      });\n    scene.addLayer(worldLine);\n    scene.addLayer(dotPoint);\n    scene.addLayer(flyLine2);\n    scene.addLayer(flyLine);\n  });\n});\n",title:"航向图",filename:"plane_animate2.js",isNew:!1},{id:"trip_animate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cmB1SLuyB1cAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 60,\n    style: 'light',\n    center: [-74.05371169148452, 40.72573640479783],\n    zoom: 12.45977,\n    rotation: -38.39999999999969,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/bd33a685-a17e-4686-bc79-b0e6a89fd950.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({\n        blend: 'normal',\n      })\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'start station longitude',\n            y: 'start station latitude',\n            x1: 'end station longitude',\n            y1: 'end station latitude',\n          },\n        })\n        .size(2)\n        .shape('arc3d')\n        .color('#0C47BF')\n        .animate({\n          interval: 0.5,\n          trailLength: 0.5,\n          duration: 5,\n        })\n        .style({\n          opacity: 0.5,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 弧线动画",filename:"trip_animate.js",isNew:!1},{id:"animate_line",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*d7PjSo0izNAAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [-74.006, 40.7128],\n    zoom: 14,\n    style: 'dark',\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/5592c737-1c70-4d6b-82c1-e74e5a019b04.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const lineLayer = new LineLayer()\n        .source(data, {\n          parser: {\n            type: 'json',\n            coordinates: 'path',\n          },\n        })\n        .size(1.5)\n        .shape('line')\n        .color('color', (v) => {\n          return `rgb(${v})`;\n        })\n        .animate({\n          interval: 0.6,\n          trailLength: 1.5,\n          duration: 6,\n        });\n      scene.addLayer(lineLayer);\n    });\n});\n",title:"轨迹动画",filename:"animate_line.js",isNew:!1}],icon:"",id:"animate",title:{en:"Line Animate",zh:"线动画"},api:null,childrenKey:"demos",order:1},{demos:[{id:"arc_circle",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*6Qm_QY69sBMAAAAAAAAAAABkARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [107.77791556935472, 35.443286920228644],\n    zoom: 2.9142882493605033,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng1',\n            y: 'lat1',\n            x1: 'lng2',\n            y1: 'lat2',\n          },\n        })\n        .size(1)\n        .shape('greatcircle')\n        .color('#8C1EB2')\n        .style({\n          opacity: 0.8,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"大圆弧线",filename:"arc_circle.js",isNew:!1},{id:"trip_arc_dark",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Qg8sQ4H9RVsAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 60,\n    style: 'dark',\n    center: [104.34278, 41.12554],\n    zoom: 2.94888,\n    rotation: 42.3999,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/e495c407-953b-44cc-8f77-87b9cf257578.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'from_lon',\n            y: 'from_lat',\n            x1: 'to_lon',\n            y1: 'to_lat',\n          },\n        })\n        .size(1)\n        .shape('arc3d')\n        .color('#FF7C6A')\n        .style({\n          segmentNumber: 15,\n          opacity: 0.8,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 弧线",filename:"trip_arc_dark.js",isNew:!1},{id:"trip_arc_dark_linear",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*8DYQTZeQyZ4AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 57.999999999999964,\n    style: 'dark',\n    center: [101.94365594271085, 40.46139674355291],\n    zoom: 2.7484264183323437,\n    rotation: -21.600099999999884,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng1',\n            y: 'lat1',\n            x1: 'lng2',\n            y1: 'lat2',\n          },\n        })\n        .size(1)\n        .shape('arc3d')\n        .color('#FF7C6A')\n        .style({\n          opacity: 0.8,\n          sourceColor: '#f00',\n          targetColor: '#6F19FF',\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 弧线（渐变）",filename:"trip_arc_dark_linear.js",isNew:!1},{id:"trip_arc",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*xvaaQo2c0gMAAAAAAAAAAABkARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 60,\n    style: 'light',\n    center: [-74.06967, 40.720399],\n    zoom: 12.45977,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/bd33a685-a17e-4686-bc79-b0e6a89fd950.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'start station longitude',\n            y: 'start station latitude',\n            x1: 'end station longitude',\n            y1: 'end station latitude',\n          },\n        })\n        .size(1)\n        .shape('arc3d')\n        .color('#0C47BF')\n        .style({\n          blur: 0.9,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 弧线",filename:"trip_arc.js",isNew:!1}],icon:"",id:"arc",title:{en:"Arc Line Map",zh:"弧线地图"},api:null,childrenKey:"demos",order:1},{demos:[{id:"flow",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*k21nTJuG4XQAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, PointLayer, PolygonLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [8.654789284720719, 47.412606122294044],\n    zoom: 5,\n    style: 'dark',\n    // pitch: 60\n  }),\n});\n\nfetch('https://mdn.alipayobjects.com/afts/file/A*O7PBQoWAMP4AAAAAAAAAAAAADrd2AQ/locations.json')\n  .then((res) => res.json())\n  .then((fill) => {\n    const filllayer = new PolygonLayer({\n      autoFit: true,\n    })\n      .source(fill)\n      .shape('fill')\n      .color('#aaa');\n    scene.addLayer(filllayer);\n\n    const pointdata = fill.features.map((item: any) => {\n      return item.properties;\n    });\n\n    const circleLayer = new PointLayer({\n      zIndex: 1,\n    })\n      .source(pointdata, {\n        parser: {\n          type: 'json',\n          coordinates: 'centroid',\n        },\n      })\n      .shape('circle')\n      .size(10)\n      .color('rgb(8, 64, 129)')\n      .style({\n        stroke: '#fff',\n        strokeWidth: 2,\n      });\n\n    scene.addLayer(circleLayer);\n\n    fetch(\n      'https://mdn.alipayobjects.com/afts/file/A*Q_x7TLOMcrAAAAAAAAAAAAAADrd2AQ/flows-2016.json',\n    )\n      .then((res) => res.json())\n      .then((lineData) => {\n        const pointObj = {};\n        pointdata.forEach((item: any) => {\n          pointObj[item.abbr] = item;\n        });\n\n        const oddata = lineData\n          .map((item: any) => {\n            return {\n              ...item,\n              coordinates: [pointObj[item.origin].centroid, pointObj[item.dest].centroid],\n            };\n          })\n          .sort((a: any, b: any) => {\n            return a.count - b.count;\n          });\n\n        const layer = new LineLayer({\n          zIndex: 0,\n        })\n          .source(oddata, {\n            parser: {\n              type: 'json',\n              coordinates: 'coordinates',\n            },\n          })\n          .scale('count', {\n            type: 'quantile',\n          })\n          .size('count', [0.5, 1, 1.5, 1, 2, 4, 6, 8])\n          .shape('flowline')\n          .color('count', [\n            '#fef6b5',\n            '#ffdd9a',\n            '#ffc285',\n            '#ffa679',\n            '#fa8a76',\n            '#f16d7a',\n            '#e15383',\n          ])\n          .style({\n            opacity: {\n              field: 'count',\n              value: [0.2, 0.4, 0.6, 0.8],\n            },\n            gapWidth: 2,\n            offsets: {\n              field: 'count',\n              value: () => {\n                return [10 + Math.random() * 20, 10 + Math.random() * 20];\n              },\n            }, // 支持数据映射\n            strokeWidth: 1,\n            strokeOpacity: 1,\n            stroke: '#000',\n          });\n        scene.addLayer(layer);\n      });\n  });\n",title:"流向图",filename:"flow.ts",isNew:!1}],icon:"",id:"flow",title:{en:"Isoline Map",zh:"流向图"},api:null,childrenKey:"demos",order:2},{demos:[{id:"ele",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*p6LsTp3M144AAAAAAAAAAABkARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 53.6305,\n    style: 'light',\n    center: [102.600579, 23.114887],\n    zoom: 13.5,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/ZVfOvhVCzwBkISNsuKCc.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size('ELEV', (h) => {\n          return [h % 50 === 0 ? 1.0 : 0.5, (h - 1400) * 20];\n        })\n        .shape('line')\n        .scale('ELEV', {\n          type: 'quantize',\n        })\n        .style({\n          heightfixed: true,\n        })\n        .color(\n          'ELEV',\n          [\n            '#E4682F',\n            '#FF8752',\n            '#FFA783',\n            '#FFBEA8',\n            '#FFDCD6',\n            '#EEF3FF',\n            '#C8D7F5',\n            '#A5C1FC',\n            '#7FA7F9',\n            '#5F8AE5',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"等高线",filename:"ele.js",isNew:!1},{id:"ele_dark",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*jJd0Qq_E3_UAAAAAAAAAAABkARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 45.06995336442376,\n    style: 'dark',\n    center: [102.597971, 23.110479],\n    zoom: 13.34,\n    rotation: 360,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/rmsportal/ZVfOvhVCzwBkISNsuKCc.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size('ELEV', (h) => {\n          return [h % 50 === 0 ? 1.0 : 0.5, (h - 1400) * 20];\n        })\n        .shape('line')\n        .scale('ELEV', {\n          type: 'quantize',\n        })\n        .style({\n          heightfixed: true,\n        })\n        .color('ELEV', [\n          '#094D4A',\n          '#146968',\n          '#1D7F7E',\n          '#289899',\n          '#34B6B7',\n          '#4AC5AF',\n          '#5FD3A6',\n          '#7BE39E',\n          '#A1EDB8',\n          '#CEF8D6',\n        ]);\n      scene.addLayer(layer);\n    });\n});\n",title:"等高线",filename:"ele_dark.js",isNew:!1},{id:"isoline",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*RLvsSbS4PJMAAAAAAAAAAABkARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [104.117492, 36.492696],\n    zoom: 3.89,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/9f6afbcd-3aec-4a26-bd4a-2276d3439e0d.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .scale('value', {\n          type: 'quantile',\n        })\n        .size('value', [0.5, 1, 1.5, 2])\n        .shape('line')\n        .color(\n          'value',\n          [\n            '#0A3663',\n            '#1558AC',\n            '#3771D9',\n            '#4D89E5',\n            '#64A5D3',\n            '#72BED6',\n            '#83CED6',\n            '#A6E1E0',\n            '#B8EFE2',\n            '#D7F9F0',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"等高线",filename:"isoline.js",isNew:!1},{id:"height",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*AARcS4YKlTYAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 60,\n    style: 'dark',\n    center: [120.958472, 23.464292],\n    zoom: 7.65,\n    rotation: 33.375609237091055,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/65589ef3-7f1d-440f-ba5d-86b03ee6ba7e.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data)\n        .size(1)\n        .shape('line')\n        .style({\n          vertexHeightScale: 30,\n        })\n        .color('#0D5EFF');\n\n      scene.addLayer(layer);\n    });\n});\n",title:"海拔线",filename:"height.js",isNew:!1}],icon:"",id:"isoline",title:{en:"Isoline Map",zh:"等值线地图"},api:null,childrenKey:"demos",order:2},{demos:[{id:"hangzhou_wall",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*aIKDQaTiGkkAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [119.297868, 29.732983],\n    zoom: 7.11,\n    rotation: 1.22,\n    pitch: 45.42056074766357,\n    style: 'dark',\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/93a55259-328e-4e8b-8dc2-35e05844ed31.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({}).source(data).size(40).shape('wall').style({\n        opacity: 1,\n        sourceColor: '#0DCCFF',\n        targetColor: 'rbga(255,255,255, 0)',\n      });\n      scene.addLayer(layer);\n    });\n});\n",title:"杭州区县围墙",filename:"hangzhou_wall.js",isNew:!1},{id:"bus_wall",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BmYdS7zoKvYAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.461531, 31.096775],\n    zoom: 8.64,\n    rotation: 358.78,\n    pitch: 45.42056074766357,\n    style: 'dark',\n  }),\n});\n\nscene.addImage(\n  '02',\n  'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg',\n);\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/0290a972-eedd-42f6-b69e-50a35e8a0824.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new LineLayer({})\n        .source(data.slice(0, 50), {\n          parser: {\n            type: 'json',\n            coordinates: 'coordinates',\n          },\n        })\n        .animate({\n          interval: 1, // 间隔\n          duration: 1, // 持续时间，延时\n          trailLength: 2, // 流线长度\n        })\n        .size(20)\n        .shape('wall')\n        .texture('02')\n        .style({\n          opacity: 1,\n          lineTexture: true, // 开启线的贴图功能\n          iconStep: 40, // 设置贴图纹理的间距\n          iconStepCount: 4,\n          sourceColor: '#00BCD2',\n          targetColor: '#0074d0',\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"公交线路围墙",filename:"bus_wall.js",isNew:!1}],icon:"",id:"wall",title:{en:"Line Wall",zh:"线路围墙"},api:null,childrenKey:"demos",order:5}],childrenKey:"examples"},{id:"polygon",title:{zh:"面图层",en:"Polygon Layer"},icon:"polygon",examples:[{demos:[{id:"polygon",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ovizSr4Y-kYAAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [114.050008, 22.529272],\n    zoom: 14.1,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/972566c5-a2b9-4a7e-8da1-bae9d0eb0117.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new PolygonLayer({})\n        .source(data)\n        .shape('extrude')\n        .size('h20', [100, 120, 160, 200, 260, 500])\n        .color('h20', [\n          '#816CAD',\n          '#A67FB5',\n          '#C997C7',\n          '#DEB8D4',\n          '#F5D4E6',\n          '#FAE4F1',\n          '#FFF3FC',\n        ]);\n      scene.addLayer(layer);\n    });\n});\n",title:"3D 建筑面",filename:"polygon.js",isNew:!1},{id:"polygon_stylemap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*yxRiTJDOrS8AAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 50,\n    center: [118.8, 32.056],\n    zoom: 8,\n  }),\n});\nconst colors = [\n  '#87CEFA',\n  '#00BFFF',\n\n  '#7FFFAA',\n  '#00FF7F',\n  '#32CD32',\n\n  '#F0E68C',\n  '#FFD700',\n\n  '#FF7F50',\n  '#FF6347',\n  '#FF0000',\n];\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/94763191-2816-4c1a-8d0d-8bcf4181056a.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const filllayer = new PolygonLayer({\n        name: 'fill',\n        zIndex: 3,\n      })\n        .source(data)\n        .shape('extrude')\n        .color('unit_price', colors)\n        .size('unit_price')\n        .style({\n          opacity: {\n            field: 'unit_price',\n            value: [0, 1],\n          },\n        })\n        .active(true);\n      scene.addLayer(filllayer);\n    });\n});\n",title:"3D 几何体样式映射",filename:"polygon_stylemap.js",isNew:!1},{id:"floatmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*D8GeSKNZxWIAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PointLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [120, 29.732983],\n    zoom: 6.2,\n    pitch: 60,\n  }),\n});\nscene.on('loaded', () => {\n  let lineDown, lineUp, textLayer;\n\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/ecd1aaac-44c0-4232-b66c-c0ced76d5c7d.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const texts = [];\n\n      data.features.map((option) => {\n        const { name, center } = option.properties;\n        const [lng, lat] = center;\n        texts.push({ name, lng, lat });\n        return '';\n      });\n\n      textLayer = new PointLayer({ zIndex: 2 })\n        .source(texts, {\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        })\n        .shape('name', 'text')\n        .size(14)\n        .color('#0ff')\n        .style({\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          spacing: 2, // 字符间距\n          padding: [1, 1], // 文本包围盒 padding [水平，垂直]，影响碰撞检测结果，避免相邻文本靠的太近\n          stroke: '#0ff', // 描边颜色\n          strokeWidth: 0.2, // 描边宽度\n          raisingHeight: 200000 + 150000 + 10000,\n          textAllowOverlap: true,\n        });\n      scene.addLayer(textLayer);\n\n      lineDown = new LineLayer().source(data).shape('line').color('#0DCCFF').size(1).style({\n        raisingHeight: 200000,\n      });\n\n      lineUp = new LineLayer({ zIndex: 1 })\n        .source(data)\n        .shape('line')\n        .color('#0DCCFF')\n        .size(1)\n        .style({\n          raisingHeight: 200000 + 150000,\n        });\n\n      scene.addLayer(lineDown);\n      scene.addLayer(lineUp);\n      return '';\n    });\n\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/d434cac3-124e-4922-8eed-ccde01674cd3.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const lineLayer = new LineLayer().source(data).shape('wall').size(150000).style({\n        heightfixed: true,\n        opacity: 0.6,\n        sourceColor: '#0DCCFF',\n        targetColor: 'rbga(255,255,255, 0)',\n      });\n      scene.addLayer(lineLayer);\n\n      const provincelayer = new PolygonLayer({})\n        .source(data)\n        .size(150000)\n        .shape('extrude')\n        .color('#0DCCFF')\n        .active({\n          color: 'rgb(100,230,255)',\n        })\n        .style({\n          heightfixed: true,\n          pickLight: true,\n          raisingHeight: 200000,\n          opacity: 0.8,\n        });\n\n      scene.addLayer(provincelayer);\n\n      provincelayer.on('mousemove', () => {\n        provincelayer.style({\n          raisingHeight: 200000 + 100000,\n        });\n        lineDown.style({\n          raisingHeight: 200000 + 100000,\n        });\n        lineUp.style({\n          raisingHeight: 200000 + 150000 + 100000,\n        });\n        textLayer.style({\n          raisingHeight: 200000 + 150000 + 10000 + 100000,\n        });\n      });\n\n      provincelayer.on('unmousemove', () => {\n        provincelayer.style({\n          raisingHeight: 200000,\n        });\n        lineDown.style({\n          raisingHeight: 200000,\n        });\n        lineUp.style({\n          raisingHeight: 200000 + 150000,\n        });\n        textLayer.style({\n          raisingHeight: 200000 + 150000 + 10000,\n        });\n      });\n      return '';\n    });\n  return '';\n});\n",title:"漂浮地图板块",filename:"floatmap.js",isNew:!1}],icon:"",id:"3d",title:{en:"Extrude Map",zh:"3D填充图"},api:null,childrenKey:"demos",order:0},{demos:[{id:"polygon",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*fEdKQbiYq0kAAAAAAAAAAAAADmJ7AQ/original",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { Mapbox } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Mapbox({\n    style: 'dark',\n    center: [120, 29.732983],\n    zoom: 6.2,\n    pitch: 60,\n    token:\n      'pk.eyJ1IjoiZmFrZXVzZXJnaXRodWIiLCJhIjoiY2pwOGlneGI4MDNnaDN1c2J0eW5zb2ZiNyJ9.mALv0tCpbYUPtzT7YysA2g',\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch(\n    'https://mdn.alipayobjects.com/afts/file/A*CGKZTL6s_ywAAAAAAAAAAAAADrd2AQ/indoor-3d-map.json',\n  )\n    .then((res) => res.json())\n    .then((data) => {\n      const provincelayerSide = new PolygonLayer({\n        autoFit: true,\n      })\n        .source(data)\n        .size('height')\n        .shape('extrusion')\n        .color('color')\n        .style({\n          extrusionBase: {\n            field: 'base_height',\n          },\n          opacity: 1.0,\n        });\n      scene.addLayer(provincelayerSide);\n    });\n});\n",title:"室内地图",filename:"polygon.js",isNew:!0}],icon:"",id:"extrusion",title:{en:"Extrusion Map",zh:"Extrusion Map"},api:null,childrenKey:"demos",order:0},{demos:[{id:"usa",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4Kp4Qp00kq4AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PolygonLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [-96, 37.8],\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const color = [\n        'rgb(255,255,217)',\n        'rgb(237,248,177)',\n        'rgb(199,233,180)',\n        'rgb(127,205,187)',\n        'rgb(65,182,196)',\n        'rgb(29,145,192)',\n        'rgb(34,94,168)',\n        'rgb(12,44,132)',\n      ];\n      const layer = new PolygonLayer({})\n        .source(data)\n        .scale('density', {\n          type: 'quantile',\n        })\n        .color('density', color)\n        .shape('fill')\n        .active(true);\n      const layer2 = new LineLayer({\n        zIndex: 2,\n      })\n        .source(data)\n        .color('#fff')\n        .active(true)\n        .size(1)\n        .style({\n          lineType: 'dash',\n          dashArray: [2, 2],\n        });\n      scene.addLayer(layer);\n      scene.addLayer(layer2);\n\n      layer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>${e.feature.properties.name}: ${e.feature.properties.density}</span>`);\n        scene.addPopup(popup);\n      });\n    });\n});\n",title:"地图交互",filename:"usa.js",isNew:!1},{id:"fill",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*t9QJRL7uVk4AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [116.368652, 39.93866],\n    zoom: 10.07,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/1d27c363-af3a-469e-ab5b-7a7e1ce4f311.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new PolygonLayer({})\n        .source(data)\n        .color(\n          'unit_price',\n          [\n            '#1A4397',\n            '#2555B7',\n            '#3165D1',\n            '#467BE8',\n            '#6296FE',\n            '#7EA6F9',\n            '#98B7F7',\n            '#BDD0F8',\n            '#DDE6F7',\n            '#F2F5FC',\n          ].reverse(),\n        )\n        .shape('fill')\n        .active(true);\n      const layer2 = new LineLayer({\n        zIndex: 2,\n      })\n        .source(data)\n        .color('#fff')\n        .size(0.8);\n\n      scene.addLayer(layer);\n      scene.addLayer(layer2);\n    });\n});\n",title:"连续填充图",filename:"fill.js",isNew:!1},{id:"water",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*1kqvSYvWP3MAAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [-44.40673828125, -18.375379094031825],\n    zoom: 13,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/67130c6c-7f49-4680-915c-54e69730861d.json')\n    .then((data) => data.json())\n    .then(({ lakeData }) => {\n      const lakeLayer = new PolygonLayer({ autoFit: true })\n        .source(lakeData)\n        .shape('water')\n        .color('#1E90FF')\n        .style({\n          speed: 0.4,\n          // waterTexture: 'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ'\n        })\n        .animate(true);\n\n      scene.addLayer(lakeLayer);\n    });\n});\n",title:"简单水面",filename:"water.js",isNew:!1},{id:"ocean",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BiawTbtX-CYAAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [-44.40673828125, -18.375379094031825],\n    zoom: 13,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/67130c6c-7f49-4680-915c-54e69730861d.json')\n    .then((data) => data.json())\n    .then(({ lakeData }) => {\n      const lakeLayer = new PolygonLayer({ autoFit: true })\n        .source(lakeData)\n        .shape('ocean')\n        .color('#1E90FF')\n        .style({\n          watercolor: '#6D99A8',\n          // watercolor: '#0f0',\n        })\n        .animate(true);\n\n      scene.addLayer(lakeLayer);\n    });\n});\n",title:"拟真水面",filename:"ocean.js",isNew:!1},{id:"linear_in",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*pGaoSLHoAnkAAAAAAAAAAAAADmJ7AQ/original",source:"import { LineLayer, PolygonLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [-96, 37.8],\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const color = [\n        'rgb(255,255,217)',\n        'rgb(237,248,177)',\n        'rgb(199,233,180)',\n        'rgb(127,205,187)',\n        'rgb(65,182,196)',\n        'rgb(29,145,192)',\n        'rgb(34,94,168)',\n        'rgb(12,44,132)',\n      ];\n      const layer = new PolygonLayer({})\n        .source(data)\n        .scale('density', {\n          type: 'quantile',\n        })\n        .color('density', color)\n        .shape('fill')\n        .active(true)\n        .style({\n          opacityLinear: {\n            enable: true, // true - false\n            dir: 'in', // in - out\n          },\n        });\n      const layer2 = new LineLayer({\n        zIndex: 2,\n      })\n        .source(data)\n        .color('#fff')\n        .active(true)\n        .size(1)\n        .style({\n          lineType: 'dash',\n          dashArray: [2, 2],\n        });\n      scene.addLayer(layer);\n      scene.addLayer(layer2);\n\n      layer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>${e.feature.properties.name}: ${e.feature.properties.density}</span>`);\n        scene.addPopup(popup);\n      });\n    });\n});\n",title:"径向渐变 in",filename:"linear_in.js",isNew:!1},{id:"linear_out",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Yc7HQ7CVQ7wAAAAAAAAAAAAADmJ7AQ/original",source:"import { LineLayer, PolygonLayer, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [-96, 37.8],\n    zoom: 3,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d36ad90e-3902-4742-b8a2-d93f7e5dafa2.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const color = [\n        'rgb(255,255,217)',\n        'rgb(237,248,177)',\n        'rgb(199,233,180)',\n        'rgb(127,205,187)',\n        'rgb(65,182,196)',\n        'rgb(29,145,192)',\n        'rgb(34,94,168)',\n        'rgb(12,44,132)',\n      ];\n      const layer = new PolygonLayer({})\n        .source(data)\n        .scale('density', {\n          type: 'quantile',\n        })\n        .color('density', color)\n        .shape('fill')\n        .active(true)\n        .style({\n          opacityLinear: {\n            enable: true, // true - false\n            dir: 'out', // in - out\n          },\n        });\n      const layer2 = new LineLayer({\n        zIndex: 2,\n      })\n        .source(data)\n        .color('#fff')\n        .active(true)\n        .size(1)\n        .style({\n          lineType: 'dash',\n          dashArray: [2, 2],\n        });\n      scene.addLayer(layer);\n      scene.addLayer(layer2);\n\n      layer.on('mousemove', (e) => {\n        const popup = new Popup({\n          offsets: [0, 0],\n          closeButton: false,\n        })\n          .setLnglat(e.lngLat)\n          .setHTML(`<span>${e.feature.properties.name}: ${e.feature.properties.density}</span>`);\n        scene.addPopup(popup);\n      });\n    });\n});\n",title:"径向渐变 out",filename:"linear_out.js",isNew:!1}],icon:"",id:"fill",title:{en:"Choropleth Map",zh:"填充地图"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"heatmap",title:{zh:"热力图",en:"HeatMap Layer"},icon:"heatmap",examples:[{demos:[{id:"heatmap",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*QstiQq4JBOIAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [127.5671666579043, 7.445038892195569],\n    zoom: 2.632456779444394,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data)\n        .shape('heatmap')\n        .size('mag', [0, 1.0]) // weight映射通道\n        .style({\n          intensity: 2,\n          radius: 20,\n          rampColors: {\n            colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'].reverse(),\n            positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n          },\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"经典热力图2D",filename:"heatmap.js",isNew:!1},{id:"heatmap_purple",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*GD2bR7pb-yIAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [127.5671666579043, 7.445038892195569],\n    zoom: 2.632456779444394,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data)\n        .shape('heatmap')\n        .size('mag', [0, 1.0]) // weight映射通道\n        .style({\n          intensity: 2,\n          radius: 20,\n          rampColors: {\n            colors: ['#FF4818', '#F7B74A', '#FFF598', '#F27DEB', '#8C1EB2', '#421EB2'].reverse(),\n            positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n          },\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"经典热力图2D",filename:"heatmap_purple.js",isNew:!1},{id:"heatmap3d",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*dmhzTqrHpR4AAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 50,\n    center: [100, 30.6942],\n    rotation: 10,\n    zoom: 2,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data)\n        .size('capacity', [0, 1])\n        .shape('heatmap3D')\n        // weight映射通道\n        .style({\n          intensity: 5,\n          radius: 10,\n          rampColors: {\n            colors: ['#2E8AE6', '#69D1AB', '#DAF291', '#FFD591', '#FF7A45', '#CF1D49'],\n            positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n          },\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"经典热力图3D",filename:"heatmap3d.js",isNew:!1}],icon:"",id:"heatmap",title:{en:"HeatMap",zh:"经典热力图"},api:null,childrenKey:"demos",order:0},{demos:[{id:"grid_world",screenshot:"https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*1PeGSboLGUUAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'blank',\n    center: [110.097892, 33.853662],\n    zoom: 4.056,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/3dadb1f5-8f54-4449-8206-72db6e142c40.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({\n        autoFit: true,\n      })\n        .source(data, {\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 5 * 100000,\n            },\n          ],\n        })\n        .shape('circle')\n        .active(false)\n        .color('#aaa')\n        .style({\n          coverage: 0.7,\n          angle: 0,\n        });\n      scene.addLayer(layer);\n    });\n});\n",title:"网格世界地图",filename:"grid_world.js",isNew:!1},{id:"china",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*XPBuSIPPgsgAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [107.054293, 35.246265],\n    zoom: 4.056,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'grid',\n              size: 20000,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .shape('square')\n        .style({\n          coverage: 1,\n          angle: 0,\n        })\n        .color(\n          'count',\n          [\n            '#0B0030',\n            '#100243',\n            '#100243',\n            '#1B048B',\n            '#051FB7',\n            '#0350C1',\n            '#0350C1',\n            '#0072C4',\n            '#0796D3',\n            '#2BA9DF',\n            '#30C7C4',\n            '#6BD5A0',\n            '#A7ECB2',\n            '#D0F4CA',\n          ].reverse(),\n        );\n\n      scene.addLayer(layer);\n    });\n});\n",title:"网格热力图",filename:"china.js",isNew:!1},{id:"heatmap3",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*Ucz6SJ5wU_0AAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [110.097892, 33.853662],\n    zoom: 4.056,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'grid',\n              size: 20000,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .shape('circle')\n        .style({\n          coverage: 0.9,\n          angle: 0,\n        })\n        .color(\n          'count',\n          [\n            '#8C1EB2',\n            '#8C1EB2',\n            '#DA05AA',\n            '#F0051A',\n            '#FF2A3C',\n            '#FF4818',\n            '#FF4818',\n            '#FF8B18',\n            '#F77B00',\n            '#ED9909',\n            '#ECC357',\n            '#EDE59C',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"网格布局 圆形",filename:"heatmap3.js",isNew:!1},{id:"world",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*f1IDQ7AG-00AAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [110.097892, 33.853662],\n    zoom: 4.056,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'grid',\n              size: 10000,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .shape('square')\n        .style({\n          coverage: 1,\n          angle: 0,\n        })\n        .color(\n          'count',\n          [\n            '#FF3417',\n            '#FF7412',\n            '#FFB02A',\n            '#FFE754',\n            '#46F3FF',\n            '#02BEFF',\n            '#1A7AFF',\n            '#0A1FB2',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"网格热力图",filename:"world.js",isNew:!1}],icon:"",id:"grid",title:{en:"Grid Map",zh:"网格热力图"},api:null,childrenKey:"demos",order:1},{demos:[{id:"china",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*hLVeSqPl9asAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 47.49999999999995,\n    center: [112.50447776627743, 30.830476390931125],\n    zoom: 3.9879693680088626,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/7359a5e9-3c5e-453f-b207-bc892fb23b84.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 200000,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .size('sum', (value) => {\n          return value * 20;\n        })\n        .shape('hexagonColumn')\n        .color(\n          'count',\n          ['#FF4818', '#F7B74A', '#FFF598', '#FF40F3', '#9415FF', '#421EB2'].reverse(),\n        )\n        .style({\n          coverage: 0.9,\n          angle: 0,\n        });\n\n      scene.addLayer(layer);\n    });\n});\n",title:"蜂窝热力图",filename:"china.js",isNew:!1},{id:"light",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*SLcGSbvZoEwAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    pitch: 43,\n    center: [120.13383079335335, 29.651873105004427],\n    zoom: 7.068989519212174,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/a1a8158d-6fe3-424b-8e50-694ccf61c4d7.csv')\n    .then((res) => res.text())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          parser: {\n            type: 'csv',\n            x: 'lng',\n            y: 'lat',\n          },\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 2500,\n              field: 'v',\n              method: 'sum',\n            },\n          ],\n        })\n        .size('sum', (sum) => {\n          return sum * 200;\n        })\n        .shape('hexagonColumn')\n        .style({\n          coverage: 0.8,\n          angle: 0,\n        })\n        .color('sum', [\n          '#094D4A',\n          '#146968',\n          '#1D7F7E',\n          '#289899',\n          '#34B6B7',\n          '#4AC5AF',\n          '#5FD3A6',\n          '#7BE39E',\n          '#A1EDB8',\n          '#C3F9CC',\n          '#DEFAC0',\n          '#ECFFB1',\n        ]);\n      scene.addLayer(layer);\n    });\n});\n",title:"蜂窝热力图",filename:"light.js",isNew:!1},{id:"hexagon",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*JBibTKlhhWQAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    pitch: 56.499,\n    center: [114.07737552216226, 22.542656745583486],\n    rotation: 39.19,\n    zoom: 12.47985,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 100,\n              field: 'h12',\n              method: 'sum',\n            },\n          ],\n        })\n        .size('sum', [0, 600])\n        .shape('hexagonColumn')\n        .style({\n          coverage: 0.8,\n          angle: 0,\n        })\n        .color(\n          'sum',\n          [\n            '#094D4A',\n            '#146968',\n            '#1D7F7E',\n            '#289899',\n            '#34B6B7',\n            '#4AC5AF',\n            '#5FD3A6',\n            '#7BE39E',\n            '#A1EDB8',\n            '#CEF8D6',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"蜂窝热力图",filename:"hexagon.js",isNew:!1},{id:"world",screenshot:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*0uVgSoxXP-cAAAAAAAAAAABkARQnAQ",source:"import { HeatmapLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [104.995156, 31.450658],\n    zoom: 3.79,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const layer = new HeatmapLayer({})\n        .source(data, {\n          transforms: [\n            {\n              type: 'hexagon',\n              size: 90000,\n              field: 'capacity',\n              method: 'sum',\n            },\n          ],\n        })\n        .shape('hexagon')\n        .style({\n          coverage: 0.9,\n          angle: 0,\n        })\n        .color(\n          'sum',\n          [\n            '#3F4BBA',\n            '#3F4BBA',\n            '#3F4BBA',\n            '#3F4BBA',\n            '#3C73DA',\n            '#3C73DA',\n            '#3C73DA',\n            '#0F62FF',\n            '#0F62FF',\n            '#30B2E9',\n            '#30B2E9',\n            '#40C4CE',\n          ].reverse(),\n        );\n      scene.addLayer(layer);\n    });\n});\n",title:"蜂窝热力图",filename:"world.js",isNew:!1}],icon:"",id:"hexagon",title:{en:"Hexagon Map",zh:"蜂窝热力图"},api:null,childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"component",title:{zh:"组件",en:"Component"},icon:"map",examples:[{demos:[{id:"logo",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*XgipRbN_k3wAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Logo, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n  // 关闭默认 L7 Logo\n  logoVisible: false,\n});\nscene.on('loaded', () => {\n  const logo = new Logo();\n  scene.addControl(logo);\n});\n",title:{zh:"Logo",en:"Logo"},filename:"logo.ts",isNew:!1},{id:"zoom",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*PRkHRonRENYAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Scene, Zoom } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const zoom = new Zoom();\n  scene.addControl(zoom);\n});\n",title:{zh:"Zoom 缩放",en:"Zoom"},filename:"zoom.ts",isNew:!1},{id:"scale",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*5dWeRaRpOHEAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Scale, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n  logoVisible: false,\n});\nscene.on('loaded', () => {\n  const scale = new Scale();\n  scene.addControl(scale);\n});\n",title:{zh:"Scale 比例尺",en:"Scale"},filename:"scale.ts",isNew:!1},{id:"fullscreen",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*fqJlQ5vJVicAAAAAAAAAAAAAARQnAQ",source:"import { Fullscreen, GaodeMap, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const fullscreen = new Fullscreen();\n  scene.addControl(fullscreen);\n});\n",title:{zh:"Fullscreen 全屏",en:"Fullscreen"},filename:"fullscreen.ts",isNew:!1},{id:"geolocate",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*aElZR7bPFGAAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, GeoLocate, Scene } from '@antv/l7';\nimport gcoord from 'gcoord';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const geoLocate = new GeoLocate({\n    transform: (position) => {\n      // 将获取到基于 WGS84 地理坐标系 的坐标转成 GCJ02 坐标系\n      return gcoord.transform(position, gcoord.WGS84, gcoord.GCJ02);\n    },\n  });\n  scene.addControl(geoLocate);\n});\n",title:{zh:"GeoLocate 定位",en:"GeoLocate"},filename:"geolocate.ts",isNew:!1},{id:"exportimage",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*at1HRbHfipUAAAAAAAAAAAAAARQnAQ",source:"import { ExportImage, GaodeMap, PolygonLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n    WebGLParams: {\n      preserveDrawingBuffer: true,\n    },\n  }),\n});\nscene.on('loaded', () => {\n  const polygonLayer = new PolygonLayer({});\n  polygonLayer\n    .source({\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [\n              [\n                [120.143575, 30.239811],\n                [120.143575, 30.247856],\n                [120.151213, 30.247856],\n                [120.151213, 30.239811],\n                [120.143575, 30.239811],\n              ],\n            ],\n          },\n        },\n      ],\n    })\n    .color('#ff0000')\n    .style({\n      opacity: 0.5,\n    });\n  scene.addLayer(polygonLayer);\n  const exportImage = new ExportImage({\n    onExport: (base64) => {\n      alert(base64);\n    },\n  });\n  scene.addControl(exportImage);\n});\n",title:{zh:"ExportImage 导出图片",en:"ExportImage"},filename:"exportimage.ts",isNew:!1},{id:"mouselocation",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*sJF1S4JaPx8AAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, MouseLocation, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const mouseLocation = new MouseLocation({\n    position: 'bottomright',\n  });\n  scene.addControl(mouseLocation);\n});\n",title:{zh:"MouseLocation 鼠标经纬度",en:"MouseLocation"},filename:"mouselocation.ts",isNew:!1},{id:"layerswitch",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*gWO_T6xpVtwAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, LayerSwitch, LineLayer, PolygonLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const polygonLayer = new PolygonLayer({\n    name: '填充图层',\n  });\n  polygonLayer\n    .source({\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [\n              [\n                [120.143575, 30.239811],\n                [120.143575, 30.247856],\n                [120.151213, 30.247856],\n                [120.151213, 30.239811],\n                [120.143575, 30.239811],\n              ],\n            ],\n          },\n        },\n      ],\n    })\n    .color('#ff0000')\n    .style({\n      opacity: 0.5,\n    });\n  scene.addLayer(polygonLayer);\n\n  const lineLayer = new LineLayer({\n    name: '边框图层',\n  });\n  lineLayer\n    .source({\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [\n              [\n                [120.143575, 30.239811],\n                [120.143575, 30.247856],\n                [120.151213, 30.247856],\n                [120.151213, 30.239811],\n                [120.143575, 30.239811],\n              ],\n            ],\n          },\n        },\n      ],\n    })\n    .color('#700000')\n    .size(2);\n  scene.addLayer(lineLayer);\n\n  const layerSwitch = new LayerSwitch({\n    layers: [polygonLayer, lineLayer],\n  });\n  scene.addControl(layerSwitch);\n});\n",title:{zh:"LayerSwitch 图层显隐控制",en:"LayerSwitch"},filename:"layerswitch.ts",isNew:!1},{id:"layerswitch1",screenshot:"https://mdn.alipayobjects.com/huamei_k6sfo0/afts/img/A*sJVXRbmd6_UAAAAAAAAAAAAADjWqAQ/original",source:"import { GaodeMap, LayerSwitch, RasterLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const url1 = 'https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=CN&x={x}&y={y}&z={z}';\n  const rasterLayer1 = new RasterLayer({\n    zIndex: 1,\n  }).source(url1, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      zoomOffset: 0,\n    },\n  });\n\n  const url2 = 'https://gac-geo.googlecnapps.cn/maps/vt?lyrs=h&gl=CN&x={x}&y={y}&z={z}';\n  const rasterLayer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      zoomOffset: 0,\n    },\n  });\n\n  scene.addLayer(rasterLayer1);\n  scene.addLayer(rasterLayer2);\n\n  const layerSwitch = new LayerSwitch({\n    layers: [\n      {\n        layer: rasterLayer1,\n        name: '遥感影像图层',\n        img: 'https://mdn.alipayobjects.com/huamei_k6sfo0/afts/img/A*fG9HQpyNuv0AAAAAAAAAAAAADjWqAQ/original',\n      },\n      {\n        layer: rasterLayer2,\n        name: '文字标注图层',\n        img: 'https://mdn.alipayobjects.com/huamei_k6sfo0/afts/img/A*CP5pQY_8Q_YAAAAAAAAAAAAADjWqAQ/original',\n      },\n    ],\n  });\n  scene.addControl(layerSwitch);\n});\n",title:{zh:"LayerSwitch 图层显隐控制（展示图层图片）",en:"LayerSwitch"},filename:"layerswitch1.ts",isNew:!1},{id:"maptheme",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*byM3QZbjqScAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, MapTheme, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n});\nscene.on('loaded', () => {\n  const mapTheme = new MapTheme();\n  scene.addControl(mapTheme);\n});\n",title:{zh:"MapTheme 地图样式切换",en:"MapTheme"},filename:"maptheme.ts",isNew:!1},{id:"swipe",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*-bMESIfHN9IAAAAAAAAAAAAADmJ7AQ/original",source:"import { GaodeMap, RasterLayer, Scene, Swipe } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [127.5671666579043, 7.445038892195569],\n    zoom: 2.632456779444394,\n  }),\n});\nscene.on('loaded', () => {\n  // 地形地图图层\n  const leftLayer = new RasterLayer({}).source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/ter/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        maxZoom: 21,\n        minZoom: 3,\n        type: 'rasterTile',\n        tileSize: 256,\n        zoomOffset: 0,\n      },\n    },\n  );\n  // 影像地图图层\n  const rightLayer = new RasterLayer({}).source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n        zoomOffset: 0,\n      },\n    },\n  );\n\n  scene.addLayer(leftLayer);\n  scene.addLayer(rightLayer);\n\n  const swipe = new Swipe({\n    orientation: 'vertical',\n    ratio: 0.5,\n    layers: [leftLayer],\n    rightLayers: [rightLayer],\n  });\n  scene.addControl(swipe);\n});\n",title:{zh:"Swipe 卷帘对比",en:"Swipe"},filename:"swipe.ts",isNew:!1},{id:"syncScene",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*9ABcToHql7UAAAAAAAAAAAAADmJ7AQ/original",source:"import { GaodeMap, HeatmapLayer, PointLayer, Scene } from '@antv/l7';\nimport { isNumber } from 'lodash';\n\n// 通过 Scene 获取到地图引擎类型\nfunction getMapType(scene) {\n  const mapVersion = scene.getMapService().version;\n  return mapVersion?.includes('MAPBOX') ? 'Mapbox' : 'Gaode';\n}\n\n// 根据不同地图引擎类型，设置地图的状态「缩放层级、地图中心点、旋转角、倾角」\nconst updateSceneStatus = (\n  scene,\n  status = {\n    zoom,\n    center,\n    pitch,\n    rotation,\n  },\n) => {\n  const mapType = getMapType(scene);\n  const { zoom, center, pitch, rotation } = status;\n  if (mapType === 'Gaode') {\n    const map = scene?.map;\n    // 高德地图关闭动画效果\n    if (center) map.setCenter(center, true);\n    if (isNumber(zoom)) map?.setZoom(zoom + 1, true);\n    if (isNumber(rotation)) map?.setRotation(360 - rotation, true);\n    if (isNumber(pitch)) map?.setPitch(pitch, true);\n  } else {\n    if (isNumber(zoom)) scene?.setZoom(zoom);\n    if (center) scene?.setCenter(center);\n    if (isNumber(rotation)) scene.setRotation(rotation);\n    if (isNumber(pitch)) scene?.setPitch(pitch);\n  }\n};\n\nexport function syncScene(scenes, options = {}) {\n  const { zoomGap = 0, mainIndex = 0 } = options ?? {};\n  const listeners = [];\n  let handlers = [];\n\n  // 添加地图事件监听\n  const listen = (index) => {\n    const scene = scenes[index];\n    scene.on('mapmove', handlers[index]);\n    // Gaode 地图调整倾角和旋转角的事件\n    scene.on('dragging', handlers[index]);\n    // Mapbox 地图调整倾角和旋转角的事件\n    scene.on('rotate', handlers[index]);\n    scene.on('zoomchange', handlers[index]);\n\n    return () => {\n      scene.off('mapmove', handlers[index]);\n      scene.off('dragging', handlers[index]);\n      scene.off('zoomchange', handlers[index]);\n      scene.off('rotate', handlers[index]);\n    };\n  };\n\n  const clearListener = () => {\n    listeners?.forEach((call) => call());\n    listeners.length = 0;\n  };\n\n  // 根据指定索引的 scene 同步其他 scene 状态\n  const moveScenePosition = (index) => {\n    const movedScene = scenes[index];\n    const center = movedScene.getCenter();\n    const zoom = movedScene.getZoom();\n    const rotation = movedScene.getRotation();\n    const pitch = movedScene.getPitch();\n    /**\n     * 根据当前地图是否为主地图，分两种情况\n     * 1. 非主地图，则其他非主地图 zoom 设置当前 zoom ，主地图设置为 zoom - zoomGap\n     * 2. 主地图，则其他非主地图 zoom 设置为 zoom + zoomGap\n     */\n    const isMovedMainScene = index === mainIndex;\n    scenes.forEach((scene, num) => {\n      if (num !== index) {\n        // 当前需要同步的状态是不是主地图\n        const sceneZoom = isMovedMainScene\n          ? zoom + zoomGap\n          : num === mainIndex\n            ? zoom - zoomGap\n            : zoom;\n        updateSceneStatus(scene, {\n          zoom: sceneZoom,\n          center: [center.lng, center.lat],\n          rotation,\n          pitch,\n        });\n      }\n    });\n  };\n\n  const syncHandler = (index) => {\n    clearListener();\n    moveScenePosition(index);\n    initListener();\n  };\n\n  function initListener() {\n    handlers = scenes.map((value, index) => {\n      // 每个地图有自己的状态同步函数\n      return syncHandler.bind(null, index);\n    });\n    scenes.forEach((scene, index) => {\n      // 给每个地图绑定监听\n      listeners.push(listen(index));\n    });\n  }\n\n  // 初始化,先将所有地图状态同步。\n  scenes.forEach((value, index) => {\n    moveScenePosition(index);\n  });\n\n  // 添加地图事件监听\n  initListener();\n\n  // 返回清除绑定的监听事件函数\n  return clearListener;\n}\n\nconst mapDiv = document.getElementById('map');\nif (mapDiv) {\n  mapDiv.style.cssText = 'display: flex; height: 700px';\n  // 创建第一个新div并设置一些属性或内容\n  const newMapDiv1 = document.createElement('div');\n  newMapDiv1.style.cssText = 'width: 50%; height: 700px; position: relative; margin-right: 5px;';\n  newMapDiv1.id = 'map1'; // 给新div设置id\n\n  // 创建第二个新div并设置一些属性或内容\n  const newMapDiv2 = document.createElement('div');\n  newMapDiv2.style.cssText = 'width: 50%; height: 700px; position: relative;  margin-left: 5px;';\n  newMapDiv2.id = 'map2'; // 给新div设置id\n\n  mapDiv.appendChild(newMapDiv1);\n  mapDiv.appendChild(newMapDiv2);\n\n  const scene = new Scene({\n    id: 'map1',\n    map: new GaodeMap({\n      pitch: 0,\n      style: 'normal',\n      center: [114.07737552216226, 22.542656745583486],\n      rotation: 90,\n      zoom: 12.47985,\n    }),\n    // 关闭默认 L7 Logo\n    logoVisible: false,\n  });\n  scene.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new PointLayer({})\n          .source(data)\n          .shape('circle')\n          .size('h12', [2, 5])\n          .color(\n            'h12',\n            [\n              '#094D4A',\n              '#146968',\n              '#1D7F7E',\n              '#289899',\n              '#34B6B7',\n              '#4AC5AF',\n              '#5FD3A6',\n              '#7BE39E',\n            ].reverse(),\n          );\n        scene.addLayer(pointLayer);\n      });\n  });\n  const scene1 = new Scene({\n    id: 'map2',\n    map: new GaodeMap({\n      pitch: 0,\n      style: 'normal',\n      center: [114.07737552216226, 22.542656745583486],\n      rotation: 90,\n      zoom: 12.47985,\n    }),\n    // 关闭默认 L7 Logo\n    logoVisible: false,\n  });\n  scene1.on('loaded', () => {\n    fetch('https://gw.alipayobjects.com/os/basement_prod/513add53-dcb2-4295-8860-9e7aa5236699.json')\n      .then((res) => res.json())\n      .then((data) => {\n        const pointLayer = new HeatmapLayer({})\n          .source(data, {\n            transforms: [\n              {\n                type: 'hexagon',\n                size: 400,\n                field: 'h12',\n                method: 'sum',\n              },\n            ],\n          })\n          .shape('hexagon')\n          .style({\n            coverage: 0.9,\n            angle: 0,\n          })\n\n          .color(\n            'sum',\n            [\n              '#094D4A',\n              '#146968',\n              '#1D7F7E',\n              '#289899',\n              '#34B6B7',\n              '#4AC5AF',\n              '#5FD3A6',\n              '#7BE39E',\n            ].reverse(),\n          );\n        scene1.addLayer(pointLayer);\n      });\n  });\n\n  syncScene([scene, scene1]);\n}\n",title:{zh:"双屏对比",en:"SyncScene"},filename:"syncScene.ts",isNew:!0}],icon:"",id:"control",title:{en:"Controls",zh:"控件"},api:null,childrenKey:"demos",order:0},{demos:[{id:"popup",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cNMlSLwgjboAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Popup, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n  logoVisible: false,\n});\nscene.on('loaded', () => {\n  const popup = new Popup({\n    title: '自定义标题',\n    html: '<p>Popup 示例的自定义内容</p>',\n    lngLat: {\n      lng: 120.154672,\n      lat: 30.241095,\n    },\n  });\n\n  scene.addPopup(popup);\n});\n",title:{zh:"Popup 基础气泡",en:"Popup"},filename:"popup.ts",isNew:!1},{id:"popup2",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*cNMlSLwgjboAAAAAAAAAAAAAARQnAQ",source:"// @ts-ignore\nimport { PointLayer, Popup, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nasync function initMap() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json',\n  );\n  const scene = new Scene({\n    id: 'map',\n    map: new GaodeMap({\n      center: [121.4, 31.258134],\n      zoom: 12,\n      pitch: 0,\n      style: 'normal',\n    }),\n  });\n  scene.addImage(\n    '00',\n    'https://gw.alipayobjects.com/mdn/rms_fcd5b3/afts/img/A*g8cUQ7pPT9YAAAAAAAAAAAAAARQnAQ',\n  );\n  scene.addImage(\n    '01',\n    'https://gw.alipayobjects.com/mdn/rms_fcd5b3/afts/img/A*LTcXTLBM7kYAAAAAAAAAAAAAARQnAQ',\n  );\n  scene.addImage(\n    '02',\n    'https://gw.alipayobjects.com/zos/bmw-prod/904d047a-16a5-461b-a921-98fa537fc04a.svg',\n  );\n  const data = await response.json();\n  const newData = data.map((item: any) => {\n    item.type = ['00', '01', '02'][Math.floor(Math.random() * 3)];\n    return item;\n  });\n  const imageLayer = new PointLayer({})\n    .source(newData, {\n      parser: {\n        type: 'json',\n        x: 'longitude',\n        y: 'latitude',\n      },\n    })\n    .shape('type', (v: any) => {\n      return v;\n    })\n    .active(false)\n    .size(20);\n  scene.addLayer(imageLayer);\n  imageLayer.on('mousedown', (e) => {\n    console.log('mousedown', e);\n  });\n  const popup = new Popup({});\n\n  scene.addPopup(popup);\n  imageLayer.on('click', (e) => {\n    console.log(e);\n    const { lng, lat } = e.lngLat;\n\n    popup.setOptions({\n      title: e.feature.name,\n      html: e.feature.name,\n      lngLat: {\n        lng,\n        lat,\n      },\n    });\n  });\n}\n\ninitMap();\n",title:{zh:"图层点击 气泡",en:"Popup"},filename:"popup2.ts",isNew:!1},{id:"layerpopup",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*HbyzRqv6JZcAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, LayerPopup, PointLayer, Scene } from '@antv/l7';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n  logoVisible: false,\n});\nscene.on('loaded', () => {\n  const pointLayer = new PointLayer({});\n  pointLayer\n    .source(\n      [\n        {\n          lng: 120.132235,\n          lat: 30.250868,\n          value: 34.71314604052238,\n          name: '坐标点1',\n        },\n        {\n          lng: 120.156236,\n          lat: 30.260268,\n          value: 96.807880210153,\n          name: '坐标点2',\n        },\n        {\n          lng: 120.163014,\n          lat: 30.251297,\n          value: 29.615472482876815,\n          name: '坐标点3',\n        },\n        {\n          lng: 120.15394,\n          lat: 30.231489,\n          value: 49.90316258911784,\n          name: '坐标点4',\n        },\n        {\n          lng: 120.154596,\n          lat: 30.24065,\n          value: 45.788587061188466,\n          name: '坐标点5',\n        },\n        {\n          lng: 120.150223,\n          lat: 30.235078,\n          value: 29.741111717098544,\n          name: '坐标点6',\n        },\n        {\n          lng: 120.143992,\n          lat: 30.229411,\n          value: 40.241555782182935,\n          name: '坐标点7',\n        },\n        {\n          lng: 120.136995,\n          lat: 30.237439,\n          value: 86.5369792415296,\n          name: '坐标点8',\n        },\n      ],\n      {\n        parser: {\n          type: 'json',\n          x: 'lng',\n          y: 'lat',\n        },\n      },\n    )\n    .color('value', ['#FFCCC6', '#CF1421'])\n    .size(10)\n    .shape('circle');\n  scene.addLayer(pointLayer);\n  const layerPopup = new LayerPopup({\n    items: [\n      {\n        layer: pointLayer,\n        fields: [\n          {\n            field: 'name',\n            formatField: () => '名称',\n          },\n          {\n            field: 'value',\n            formatField: () => '权值',\n            formatValue: (val) => val.toFixed(2),\n          },\n          'lng',\n          'lat',\n        ],\n      },\n    ],\n  });\n\n  scene.addPopup(layerPopup);\n});\n",title:{zh:"LayerPopup 图层气泡",en:"LayerPopup"},filename:"layerpopup.ts",isNew:!1},{id:"customContent",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orwHQKugIdIAAAAAAAAAAAAADmJ7AQ/original",source:"import * as G2 from '@antv/g2';\nimport { GaodeMap, LayerPopup, PointLayer, Scene } from '@antv/l7';\n\nconst data: any[] = [\n  {\n    lng: 120.132235,\n    lat: 30.250868,\n    value: 34.71314604052238,\n    name: '坐标点1',\n  },\n  {\n    lng: 120.156236,\n    lat: 30.260268,\n    value: 96.807880210153,\n    name: '坐标点2',\n  },\n  {\n    lng: 120.163014,\n    lat: 30.251297,\n    value: 29.615472482876815,\n    name: '坐标点3',\n  },\n  {\n    lng: 120.15394,\n    lat: 30.231489,\n    value: 49.90316258911784,\n    name: '坐标点4',\n  },\n  {\n    lng: 120.154596,\n    lat: 30.24065,\n    value: 45.788587061188466,\n    name: '坐标点5',\n  },\n  {\n    lng: 120.150223,\n    lat: 30.235078,\n    value: 29.741111717098544,\n    name: '坐标点6',\n  },\n  {\n    lng: 120.143992,\n    lat: 30.229411,\n    value: 40.241555782182935,\n    name: '坐标点7',\n  },\n  {\n    lng: 120.136995,\n    lat: 30.237439,\n    value: 86.5369792415296,\n    name: '坐标点8',\n  },\n];\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 0,\n    style: 'normal',\n    center: [120.154672, 30.241095],\n    zoom: 12,\n  }),\n  logoVisible: false,\n});\nscene.on('loaded', () => {\n  const pointLayer = new PointLayer({});\n  pointLayer\n    .source(data, {\n      parser: {\n        type: 'json',\n        x: 'lng',\n        y: 'lat',\n      },\n    })\n    .color('value', ['#FFCCC6', '#CF1421'])\n    .size(10)\n    .shape('circle');\n  scene.addLayer(pointLayer);\n\n  const div = document.createElement('div');\n  const chart = new G2.Chart({\n    container: div,\n    autoFit: true,\n    width: 200,\n    height: 200,\n  });\n  // 新建一个 view 用来单独渲染Annotation\n  chart.coordinate('theta', {\n    radius: 0.75,\n    innerRadius: 0.5,\n  });\n\n  chart.scale('percent', {\n    formatter: (val) => {\n      val = val * 100 + '%';\n      return val;\n    },\n  });\n\n  chart.tooltip(false);\n\n  // 声明需要进行自定义图例字段： 'item'\n  chart.legend(false);\n\n  chart.interval().adjust('stack').position('percent').color('item', ['#5B8FF9', '#797979']).style({\n    fillOpacity: 1,\n  });\n\n  const layerPopup = new LayerPopup({\n    items: [\n      {\n        layer: pointLayer,\n        customContent: (e) => {\n          const otherValue = 100 - e.value;\n          chart.data([\n            { item: '值', count: e.value, percent: e.value / 100 },\n            { item: '', count: otherValue, percent: otherValue / 100 },\n          ]);\n          chart.render();\n          return div;\n        },\n      },\n    ],\n  });\n\n  scene.addPopup(layerPopup);\n});\n",title:{zh:"图层气泡 自定义内容",en:"LayerPopup"},filename:"customContent.ts",isNew:!1}],icon:"",id:"popup",title:{en:"Popup",zh:"信息框"},api:null,childrenKey:"demos",order:1},{demos:[{id:"defaultmarker",screenshot:"https://mdn.alipayobjects.com/afts/img/A*Lwx2RoaXjmwAAAAAAAAAAAAADrd2AQ/20230207225205.jpg",source:"import { Marker, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [105.790327, 36.495636],\n    zoom: 4,\n  }),\n});\nscene.on('loaded', () => {\n  addMarkers();\n  scene.render();\n});\nfunction addMarkers() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/67f47049-8787-45fc-acfe-e19924afe032.json')\n    .then((res) => res.json())\n    .then((nodes) => {\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].g !== '1' || nodes[i].v === '') {\n          continue;\n        }\n\n        const marker = new Marker().setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });\n        scene.addMarker(marker);\n      }\n    });\n}\n",title:"默认 Marker",filename:"defaultmarker.js",isNew:!1},{id:"markerlayer",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*zb-0TrdH8wUAAAAAAAAAAAAAARQnAQ",source:"import { Marker, MarkerLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [105.790327, 36.495636],\n    zoom: 4,\n  }),\n});\nscene.on('loaded', () => {\n  addMarkers();\n  scene.render();\n});\nfunction addMarkers() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/67f47049-8787-45fc-acfe-e19924afe032.json')\n    .then((res) => res.json())\n    .then((nodes) => {\n      const markerLayer = new MarkerLayer();\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].g !== '1' || nodes[i].v === '') {\n          continue;\n        }\n        const el = document.createElement('label');\n        el.className = 'labelclass';\n        el.textContent = nodes[i].v + '℃';\n        el.style.background = getColor(nodes[i].v);\n        el.style.borderColor = getColor(nodes[i].v);\n        const marker = new Marker({\n          element: el,\n        }).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });\n        markerLayer.addMarker(marker);\n      }\n      scene.addMarkerLayer(markerLayer);\n    });\n}\n\nfunction getColor(v) {\n  const colors = [\n    '#ffffe5',\n    '#f7fcb9',\n    '#d9f0a3',\n    '#addd8e',\n    '#78c679',\n    '#41ab5d',\n    '#238443',\n    '#005a32',\n  ];\n  return v > 50\n    ? colors[7]\n    : v > 40\n      ? colors[6]\n      : v > 30\n        ? colors[5]\n        : v > 20\n          ? colors[4]\n          : v > 10\n            ? colors[3]\n            : v > 5\n              ? colors[2]\n              : v > 0\n                ? colors[1]\n                : colors[0];\n}\n",title:"MarkerLayer 统一管理Marker",filename:"markerlayer.js",isNew:!1},{id:"clustermarker",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*h6_kQKiM2cwAAAAAAAAAAAAAARQnAQ",source:"import { Marker, MarkerLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [105.790327, 30],\n    zoom: 2,\n  }),\n});\nscene.on('loaded', () => {\n  addMarkers();\n  scene.render();\n});\nfunction addMarkers() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((nodes) => {\n      const markerLayer = new MarkerLayer({\n        cluster: true,\n      });\n      for (let i = 0; i < nodes.features.length; i++) {\n        const { coordinates } = nodes.features[i].geometry;\n        const marker = new Marker().setLnglat({\n          lng: coordinates[0],\n          lat: coordinates[1],\n        });\n        markerLayer.addMarker(marker);\n      }\n      scene.addMarkerLayer(markerLayer);\n    });\n}\n",title:"MarkerLayer 聚合Marker",filename:"clustermarker.js",isNew:!1},{id:"marker",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*m0rwQZBpZ6MAAAAAAAAAAAAAARQnAQ",source:"import { Marker, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [105.790327, 36.495636],\n    zoom: 4,\n  }),\n});\nscene.on('loaded', () => {\n  addMarkers();\n  scene.render();\n});\nfunction addMarkers() {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/67f47049-8787-45fc-acfe-e19924afe032.json')\n    .then((res) => res.json())\n    .then((nodes) => {\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].g !== '1' || nodes[i].v === '') {\n          continue;\n        }\n        const el = document.createElement('label');\n        el.className = 'labelclass';\n        el.textContent = nodes[i].v + '℃';\n        el.style.background = getColor(nodes[i].v);\n        el.style.borderColor = getColor(nodes[i].v);\n        const marker = new Marker({\n          element: el,\n        }).setLnglat({ lng: nodes[i].x * 1, lat: nodes[i].y });\n        scene.addMarker(marker);\n      }\n    });\n}\n\nfunction getColor(v) {\n  return v > 50\n    ? '#800026'\n    : v > 40\n      ? '#BD0026'\n      : v > 30\n        ? '#E31A1C'\n        : v > 20\n          ? '#FC4E2A'\n          : v > 10\n            ? '#FD8D3C'\n            : v > 5\n              ? '#FEB24C'\n              : v > 0\n                ? '#FED976'\n                : '#FFEDA0';\n}\n",title:"温度",filename:"marker.js",isNew:!1}],icon:"",id:"marker",title:{en:"Marker",zh:"Marker 标注"},api:null,childrenKey:"demos",order:2}],childrenKey:"examples"},{id:"raster",title:{zh:"栅格图层",en:"Raster Layer"},icon:"raster",examples:[{demos:[{id:"radar",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*JDO-R5XU7xwAAAAAAAAAAAAAARQnAQ",source:"import { ImageLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [115.5268, 34.3628],\n    zoom: 7,\n  }),\n});\nscene.on('loaded', () => {\n  const layer = new ImageLayer({});\n  layer\n    .source(\n      'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*8SUaRr7bxNsAAAAAAAAAAABkARQnAQ',\n      {\n        parser: {\n          type: 'image',\n          extent: [113.1277263548, 32.3464238863, 118.1365790452, 36.4786759137],\n        },\n      },\n    )\n    .style({\n      brightness: 1,\n      gamma: 1.0,\n      opacity: 1.0,\n      saturation: 10,\n      contrast: 1,\n    });\n  scene.addLayer(layer);\n});\n",title:"雷达图",filename:"radar.js",isNew:!1},{id:"image",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*grFnRpfZJYkAAAAAAAAAAAAADmJ7AQ/original",source:"import { ImageLayer, RasterLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    style: 'light',\n    center: [121.268, 30.3628],\n    zoom: 10,\n  }),\n});\nscene.on('loaded', () => {\n  const baseLayer = new RasterLayer({\n    zIndex: 0,\n  });\n  baseLayer.source('https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      zoomOffset: 0,\n    },\n  });\n  const layer = new ImageLayer({});\n  layer.source('https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg', {\n    parser: {\n      type: 'image',\n      extent: [121.168, 30.2828, 121.384, 30.4219],\n    },\n  });\n  scene.addLayer(baseLayer);\n  scene.addLayer(layer);\n});\n",title:"矩形图片范围",filename:"image.js",isNew:!1},{id:"image-coord",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*6HwASIr0HmIAAAAAAAAAAAAADmJ7AQ/original",source:"import { ImageLayer, PolygonLayer, RasterLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [121.268, 30.3628],\n    zoom: 10,\n  }),\n});\nscene.on('loaded', () => {\n  const baseLayer = new RasterLayer({\n    zIndex: 0,\n  });\n  baseLayer.source('https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      zoomOffset: 0,\n    },\n  });\n\n  const fill = new PolygonLayer()\n    .source({\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [\n              [\n                [100.959388, 41.619522],\n                [101.229887, 41.572654],\n                [101.16971, 41.377836],\n                [100.900015, 41.424628],\n                [100.959388, 41.619522],\n              ],\n            ],\n          },\n        },\n      ],\n    })\n    .shape('line')\n    .color('red')\n    .size(1)\n    .style({ opacity: 1 });\n  const layer = new ImageLayer({\n    autoFit: true,\n  });\n  layer.source(\n    'https://mdn.alipayobjects.com/huamei_gjo0cl/afts/img/A*vm_9S64uA0UAAAAAAAAAAAAADjDHAQ/original',\n\n    {\n      parser: {\n        type: 'image',\n        coordinates: [\n          [100.959388, 41.619522],\n          [101.229887, 41.572654],\n          [101.16971, 41.377836],\n          [100.900015, 41.424628],\n        ],\n      },\n    },\n  );\n  scene.addLayer(baseLayer);\n  scene.addLayer(layer);\n  scene.addLayer(fill);\n});\n",title:"非矩形范围",filename:"image-coord.js",isNew:!1}],icon:"",id:"image",title:{en:"Raster Image",zh:"Raster Image"},api:null,childrenKey:"demos",order:0},{demos:[{id:"light_default",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*xznhSJFEAXYAAAAAAAAAAAAAARQnAQ",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [105, 37.5],\n    zoom: 2.5,\n  }),\n});\nscene.on('loaded', () => {\n  addLayer();\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/zos/antvdemo/assets/light_clip/lightF182013.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n  };\n}\n\nasync function addLayer() {\n  const tiffdata = await getTiffData();\n\n  const layer = new RasterLayer({});\n  layer\n    .source(tiffdata.data, {\n      parser: {\n        type: 'raster',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        extent: [\n          73.4821902409999979, 3.8150178409999995, 135.1066187319999869, 57.6300459959999998,\n        ],\n      },\n    })\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [0, 90],\n      noDataValue: 0,\n      rampColors: {\n        positions: [0, 0.05, 0.1, 0.25, 0.5, 1.0], // 数据需要换成 0-1\n        colors: [\n          'rgba(92,58,16,0)',\n          'rgba(92,58,16,0)',\n          '#fabd08',\n          '#f1e93f',\n          '#f1ff8f',\n          '#fcfff7',\n        ],\n      },\n    });\n\n  scene.addLayer(layer);\n}\n",title:"夜光图-默认线性",filename:"light_default.js",isNew:!1},{id:"light",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*xznhSJFEAXYAAAAAAAAAAAAAARQnAQ",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'dark',\n    center: [105, 37.5],\n    zoom: 2.5,\n  }),\n});\nscene.on('loaded', () => {\n  addLayer();\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/zos/antvdemo/assets/light_clip/lightF182013.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n  };\n}\n\nasync function addLayer() {\n  const tiffdata = await getTiffData();\n\n  const layer = new RasterLayer({});\n  layer\n    .source(tiffdata.data, {\n      parser: {\n        type: 'raster',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        extent: [\n          73.4821902409999979, 3.8150178409999995, 135.1066187319999869, 57.6300459959999998,\n        ],\n      },\n    })\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [0, 90],\n      noDataValue: 0,\n      rampColors: {\n        type: 'linear', // 2.13.0 及以后版本支持\n        colors: [\n          'rgba(92,58,16,0)',\n          'rgba(92,58,16,0)',\n          '#fabd08',\n          '#f1e93f',\n          '#f1ff8f',\n          '#fcfff7',\n        ],\n        positions: [0, 3, 9, 22.5, 45, 90],\n      },\n    });\n\n  scene.addLayer(layer);\n}\n",title:"夜光图-线性色带",filename:"light.js",isNew:!1},{id:"dem",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*_RtOTrYOOrUAAAAAAAAAAAAADmJ7AQ/original",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.268, 30.3628],\n    zoom: 3,\n  }),\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/rmsportal/XKgkjjGaAzRyKupCBiYW.dat',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  return arrayBuffer;\n}\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n  const tiff = await GeoTIFF.fromArrayBuffer(tiffdata);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n\n  const layer = new RasterLayer();\n  layer\n    .source(values[0], {\n      parser: {\n        type: 'raster',\n        width,\n        height,\n        extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],\n      },\n    })\n    .style({\n      opacity: 1,\n      clampLow: false,\n      clampHigh: false,\n      domain: [0, 10000],\n      rampColors: {\n        type: 'custom',\n        colors: [\n          '#b2182b',\n          '#d6604d',\n          '#f4a582',\n          '#fddbc7',\n          '#f7f7f7',\n          '#d1e5f0',\n          '#92c5de',\n          '#4393c3',\n          '#2166ac',\n        ],\n        positions: [0, 50, 200, 500, 2000, 3000, 4000, 5000, 8000, 10000],\n      },\n    });\n\n  scene.addLayer(layer);\n});\n",title:"高程图-自定义色带",filename:"dem.js",isNew:!1},{id:"dem_quantize",screenshot:"https://mdn.alipayobjects.com//huamei_qa8qxu/afts/img/A*DT1HQbl4JKMAAAAAAAAAAAAADmJ7AQ/original",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.268, 30.3628],\n    zoom: 3,\n  }),\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/rmsportal/XKgkjjGaAzRyKupCBiYW.dat',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  return arrayBuffer;\n}\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n  const tiff = await GeoTIFF.fromArrayBuffer(tiffdata);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n\n  const layer = new RasterLayer();\n  layer\n    .source(values[0], {\n      parser: {\n        type: 'raster',\n        width,\n        height,\n        extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],\n      },\n    })\n    .style({\n      opacity: 1,\n      clampLow: false,\n      clampHigh: false,\n      domain: [0, 10000],\n      rampColors: {\n        type: 'quantize', // 等间距 不需要设置 position\n        colors: [\n          '#b2182b',\n          '#d6604d',\n          '#f4a582',\n          '#fddbc7',\n          '#f7f7f7',\n          '#d1e5f0',\n          '#92c5de',\n          '#4393c3',\n          '#2166ac',\n        ],\n      },\n    });\n\n  scene.addLayer(layer);\n});\n",title:"高程图-等间距色带",filename:"dem_quantize.js",isNew:!1},{id:"aqi",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2WCrT6JRf6UAAAAAAAAAAAAADmJ7AQ/original",source:"// 空气质量\n// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.268, 30.3628],\n    zoom: 3,\n    token: '6f025e700cbacbb0bb866712d20bb35c',\n  }),\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://static.sencdn.com/stargazer/tiffs/forecast_aqi/2024020200_2024020211.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  return arrayBuffer;\n}\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n  const tiff = await GeoTIFF.fromArrayBuffer(tiffdata);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json')\n    .then((res) => res.json())\n    .then(async (maskData) => {\n      const polygonLayer = new PolygonLayer({\n        visible: false,\n      })\n        .source(maskData)\n        .shape('fill')\n        .color('#f00')\n        .style({ opacity: 0.5 });\n\n      const layer = new RasterLayer({\n        maskLayers: [polygonLayer],\n        autoFit: true,\n      });\n      layer\n        .source(values[0], {\n          parser: {\n            type: 'raster',\n            width,\n            height,\n            extent: [73, 17, 135.95, 53.95],\n          },\n        })\n        .style({\n          opacity: 1,\n          clampLow: false,\n          clampHigh: false,\n          domain: [-0, 500],\n          rampColors: {\n            type: 'linear',\n            colors: ['#d7191c', '#fdae61', '#ffffbf', '#a6d96a'].reverse(),\n            positions: [0, 50, 100, 150, 300, 500],\n          },\n        });\n\n      scene.addLayer(layer);\n      scene.addLayer(polygonLayer);\n    });\n});\n",title:"空气质量-栅格",filename:"aqi.js",isNew:!1},{id:"temp",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*1feZQ6uZyu4AAAAAAAAAAAAADmJ7AQ/original",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.268, 30.3628],\n    zoom: 3,\n    token: '6f025e700cbacbb0bb866712d20bb35c',\n  }),\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://static.sencdn.com/stargazer/tiffs/rtnc_tmp_tiff/2024020210.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  return arrayBuffer;\n}\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n  const tiff = await GeoTIFF.fromArrayBuffer(tiffdata);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json')\n    .then((res) => res.json())\n    .then(async (maskData) => {\n      const polygonLayer = new PolygonLayer({\n        visible: false,\n      })\n        .source(maskData)\n        .shape('fill')\n        .color('#f00')\n        .style({ opacity: 0.5 });\n\n      const layer = new RasterLayer({\n        maskLayers: [polygonLayer],\n      });\n      layer\n        .source(values[0], {\n          parser: {\n            type: 'raster',\n            width,\n            height,\n            extent: [73, 17, 135.95, 53.95],\n          },\n        })\n        .style({\n          opacity: 1,\n          clampLow: false,\n          clampHigh: false,\n          domain: [-400, 400],\n          rampColors: {\n            type: 'linear',\n            colors: [\n              '#b2182b',\n              '#d6604d',\n              '#f4a582',\n              '#fddbc7',\n              '#f7f7f7',\n              '#d1e5f0',\n              '#92c5de',\n              '#4393c3',\n              '#2166ac',\n            ],\n            positions: [-35, -20, -10, -5, 0, 5, 10, 15, 20, 40].map((v) => v * 10).reverse(),\n          },\n        });\n\n      scene.addLayer(layer);\n      scene.addLayer(polygonLayer);\n    });\n});\n",title:"温度-栅格",filename:"temp.js",isNew:!1}],icon:"",id:"data",title:{en:"Raster Data Map",zh:"Raster Data"},api:null,childrenKey:"demos",order:1},{demos:[{id:"543",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*uOX7RaIElMsAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 10.5,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url2 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\n\n  const layer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      wmtsOptions: {\n        layer: 'img',\n        tileMatrixset: 'w',\n        format: 'tiles',\n      },\n    },\n  });\n  scene.addLayer(layer2);\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\n  const bandsValues = await getTiffData(url1);\n\n  const layer = new RasterLayer({ zIndex: 10 });\n  layer\n    .source(bandsValues, {\n      parser: {\n        type: 'rgb',\n        width: bandsValues.width,\n        height: bandsValues.height,\n        bands: [4, 3, 2], // 从零开始\n        extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n      },\n    })\n    .style({\n      opacity: 1,\n    });\n  scene.addLayer(layer);\n});\n",title:"标准假彩色",filename:"543.ts",isNew:!1},{id:"432",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*JhucSo3pVVAAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 10.5,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url2 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\n\n  const layer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      wmtsOptions: {\n        layer: 'img',\n        tileMatrixset: 'w',\n        format: 'tiles',\n      },\n    },\n  });\n  scene.addLayer(layer2);\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\n  const bandsValues = await getTiffData(url1);\n\n  const layer = new RasterLayer({ zIndex: 10 });\n  layer\n    .source(bandsValues, {\n      parser: {\n        type: 'rgb',\n        bands: [3, 2, 1], // 从零开始\n        width: bandsValues.width,\n        height: bandsValues.height,\n        extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n      },\n    })\n    .style({\n      opacity: 1,\n    });\n  scene.addLayer(layer);\n});\n",title:"自然色彩",filename:"432.ts",isNew:!1},{id:"rgb",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kpd0TpM3wxAAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene, metersToLngLat } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 2,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667920165972/china.tif';\n  const tiffdata = await getTiffData(url1);\n  const maskData = await (\n    await fetch(\n      'https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json',\n    )\n  ).json();\n  const layer = new RasterLayer({\n    zIndex: 10,\n    mask: true,\n    maskfence: maskData,\n  });\n  layer\n    .source(tiffdata, {\n      parser: {\n        type: 'rgb',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        bands: [0, 1, 2],\n        extent: [\n          ...metersToLngLat([8182125.2558000003919005, 427435.8622000003233552]),\n          ...metersToLngLat([15038832.4410999994724989, 7087852.7587999999523163]),\n        ],\n      },\n    })\n    .style({\n      opacity: 1,\n    });\n  scene.addLayer(layer);\n});\n",title:"TiFF 正射影像",filename:"rgb.ts",isNew:!1}],icon:"",id:"rgb",title:{en:"Raster RGB",zh:"Raster RGB"},api:null,childrenKey:"demos",order:2},{demos:[{id:"ndbi",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Kd59RqRj0V0AAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 10.5,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\n  const tiffdata = await getTiffData(url1);\n  const url2 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\n\n  const layer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      zoomOffset: 1,\n      wmtsOptions: {\n        layer: 'img',\n        tileMatrixset: 'w',\n        format: 'tiles',\n      },\n    },\n  });\n  // NDBI 6,5\n  // NDWI 3,5\n  const layer = new RasterLayer({\n    zIndex: 10,\n  });\n\n  layer\n    .source(tiffdata, {\n      parser: {\n        type: 'ndi',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        bands: [5, 4],\n        extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n      },\n    })\n    .style({\n      domain: [-0.35, 0.6],\n      rampColors: {\n        colors: ['#276419', '#f7f7f7', '#ff0000'].reverse(),\n        positions: [0, 0.38, 1.0],\n      },\n    });\n\n  scene.addLayer(layer2);\n  scene.addLayer(layer);\n});\n",title:"建筑指数",filename:"ndbi.ts",isNew:!1},{id:"ndvi",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HWiES58tAhYAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 10.5,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\n  const tiffdata = await getTiffData(url1);\n  const url2 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\n\n  const layer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      wmtsOptions: {\n        layer: 'img',\n        tileMatrixset: 'w',\n        format: 'tiles',\n      },\n    },\n  });\n  // NDBI 6,5\n  // NDWI 3,5\n  const layer = new RasterLayer({\n    zIndex: 10,\n  });\n\n  layer\n    .source(tiffdata, {\n      parser: {\n        type: 'ndi',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        bands: [3, 4],\n        extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n      },\n    })\n    .style({\n      domain: [-0.3, 0.5],\n      rampColors: {\n        colors: ['#ce4a2e', '#f0a875', '#fff8ba', '#bddd8a', '#5da73e', '#235117'],\n        positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n      },\n    });\n\n  scene.addLayer(layer2);\n  scene.addLayer(layer);\n});\n",title:"植被指数",filename:"ndvi.ts",isNew:!1},{id:"ndwi",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*L4AcTbE69qcAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData(url: string) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image1 = await tiff.getImage();\n  const bandsValues = await image1.readRasters();\n  return bandsValues;\n}\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130.5, 47],\n    zoom: 10.5,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const url1 = 'https://gw.alipayobjects.com/zos/raptor/1667832825992/LC08_3857_clip_2.tif';\n  const tiffdata = await getTiffData(url1);\n  const url2 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\n\n  const layer2 = new RasterLayer({\n    zIndex: 1,\n  }).source(url2, {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      wmtsOptions: {\n        layer: 'img',\n        tileMatrixset: 'w',\n        format: 'tiles',\n      },\n    },\n  });\n  // NDBI 6,5\n  // NDWI 3,5\n  const layer = new RasterLayer({\n    zIndex: 10,\n  });\n\n  layer\n    .source(tiffdata, {\n      parser: {\n        type: 'ndi',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        bands: [2, 4],\n        extent: [130.39565357746957, 46.905730725742366, 130.73364094187343, 47.10217234153133],\n      },\n    })\n    .style({\n      domain: [0, 1],\n      rampColors: {\n        colors: ['#0000FF', '#FF0000'],\n        positions: [0, 1.0],\n      },\n    });\n\n  scene.addLayer(layer2);\n  scene.addLayer(layer);\n});\n",title:"水体指数",filename:"ndwi.ts",isNew:!1}],icon:"",id:"ndi",title:{en:"Raster NDI",zh:"Raster NDI"},api:null,childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"tile",title:{zh:"瓦片图层",en:"Tile Layer"},icon:"raster",examples:[{demos:[{id:"dem",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*3UcORbAv_zEAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [113.270854, 23.141717],\n    zoom: 5,\n  }),\n});\n\nconst url1 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/ter/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst url2 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/cat/{z}/{x}/{y}?format=png&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst layer1 = new RasterLayer({\n  zIndex: 1,\n}).source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 0,\n  },\n});\n\nconst layer2 = new RasterLayer({\n  zIndex: 1,\n}).source(url2, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 0,\n  },\n});\nscene.addLayer(layer1);\nscene.addLayer(layer2);\n",title:"地形图",filename:"dem.ts",isNew:!1},{id:"debug",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*9JUgRayP1qYAAAAAAAAAAAAADmJ7AQ/original",source:"import { RasterLayer, Scene, TileDebugLayer } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [90.268, 40.3628],\n    minZoom: 2,\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  const layer = new RasterLayer();\n  layer.source(\n    'https://webrd0{1-3}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n        minZoom: 2,\n        maxZoom: 18,\n      },\n    },\n  );\n  scene.addLayer(layer);\n  // 显示瓦片信息\n  const debugerLayer = new TileDebugLayer();\n  scene.addLayer(debugerLayer);\n});\n",title:"tile-debug",filename:"debug.ts",isNew:!1},{id:"amap-satellite",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/oRfnb3AR05/7866c85b-2d33-4ad2-a276-c52cbde041b0.png",source:"import { RasterLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [90.268, 40.3628],\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  // 影像底图服务\n  const baseLayer = new RasterLayer({\n    zIndex: 1,\n  });\n  baseLayer.source('https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      // minZoom: 6,\n      // maxZoom: 15,\n      zoomOffset: 0,\n      // extent: [-180, -85.051129, 179, 85.051129],\n    },\n  });\n\n  // 影像注记服务\n  const annotionLayer = new RasterLayer({\n    zIndex: 2,\n  });\n  annotionLayer.source('https://webst0{1-3}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}', {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n      // minZoom: 6,\n      // maxZoom: 15,\n      zoomOffset: 0,\n      // extent: [-180, -85.051129, 179, 85.051129],\n    },\n  });\n\n  scene.addLayer(baseLayer);\n  scene.addLayer(annotionLayer);\n});\n",title:"高德卫星影像",filename:"amap-satellite.js",isNew:!1},{id:"mask",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*UPwFRI5cUsoAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [112, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\n\nconst mask = new PolygonLayer({\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf', {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      maxZoom: 9,\n    },\n  })\n  .shape('fill');\n\nconst layer = new RasterLayer({\n  zIndex: 1,\n  maskLayers: [mask],\n}).source(\n  'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n  {\n    parser: {\n      type: 'rasterTile',\n      tileSize: 256,\n    },\n  },\n);\n\nscene.on('loaded', () => {\n  scene.addLayer(mask);\n  scene.addLayer(layer);\n});\n",title:"影像底图掩模",filename:"mask.ts",isNew:!1},{id:"raster",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Gg87TbHRYNcAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [113.270854, 23.141717],\n    zoom: 5,\n  }),\n});\n\nconst url1 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst url2 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/cia/{z}/{x}/{y}?format=png&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst layer1 = new RasterLayer({\n  zIndex: 1,\n}).source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n  },\n});\n\nconst layer2 = new RasterLayer({\n  zIndex: 1,\n}).source(url2, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n  },\n});\n\nscene.on('loaded', () => {\n  scene.addLayer(layer1);\n  scene.addLayer(layer2);\n});\n",title:"卫星图",filename:"raster.ts",isNew:!1},{id:"normal",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ZM2lR56TIwoAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [113.270854, 23.141717],\n    zoom: 5,\n  }),\n});\n\nconst url1 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/vec/{z}/{x}/{y}?format=png&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\n\nconst layer1 = new RasterLayer({\n  zIndex: 1,\n}).source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 0,\n  },\n});\n\nscene.on('loaded', () => {\n  scene.addLayer(layer1);\n});\n",title:"普通底图",filename:"normal.ts",isNew:!1},{id:"wms",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Ge03Qo2cKv0AAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [114.061677, 22.54899],\n    zoom: 11,\n  }),\n});\nconst url1 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst url2 =\n  'https://tiles{1-3}.geovisearth.com/base/v1/cia/{z}/{x}/{y}?format=png&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788';\nconst layer1 = new RasterLayer({\n  zIndex: 1,\n}).source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n  },\n});\n\nconst layer2 = new RasterLayer({\n  zIndex: 1,\n}).source(url2, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n  },\n});\n// WMS 底图 BBOX获取数据\nconst url =\n  'https://pnr.sz.gov.cn/d-suplicmap/dynamap_1/rest/services/LAND_CERTAIN/MapServer/export?F=image&FORMAT=PNG32&TRANSPARENT=true&layers=show:1&SIZE=256,256&BBOX={bbox}&BBOXSR=4326&IMAGESR=3857&DPI=90';\n\nconst layer = new RasterLayer({\n  zIndex: 3,\n}).source(url, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    zoomOffset: 0,\n  },\n});\n\nscene.on('loaded', () => {\n  scene.addLayer(layer1);\n  scene.addLayer(layer2);\n  scene.addLayer(layer);\n});\n",title:"WMS 底图",filename:"wms.ts",isNew:!1},{id:"wmts",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*afuwT64AJVYAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [113.270854, 23.141717],\n    zoom: 11,\n  }),\n});\n\nconst url1 = 'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';\nconst layer1 = new RasterLayer({\n  zIndex: 1,\n}).source(url1, {\n  parser: {\n    type: 'rasterTile',\n    tileSize: 256,\n    wmtsOptions: {\n      layer: 'img',\n      tileMatrixset: 'w',\n      format: 'tiles',\n    },\n  },\n});\n\nscene.on('loaded', () => {\n  scene.addLayer(layer1);\n});\n",title:"天地图 WMTS 底图",filename:"wmts.ts",isNew:!1}],icon:"",id:"basemap",title:{en:"BaseMap",zh:"地图底图"},api:null,childrenKey:"demos",order:0},{demos:[{id:"terrain",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*pNs4R6YVI54AAAAAAAAAAAAADmJ7AQ/original",source:"//@ts-ignore\nimport { RasterLayer, Scene } from '@antv/l7';\n//@ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [130, 30],\n    pitch: 0,\n    zoom: 1.5,\n  }),\n});\nscene.on('loaded', () => {\n  const layer = new RasterLayer()\n    .source(\n      'https://tiles{1-3}.geovisearth.com/base/v1/terrain_rgb/{z}/{x}/{y}?format=png&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n      {\n        parser: {\n          type: 'rasterTile',\n          dataType: 'terrainRGB',\n          tileSize: 256,\n          zoomOffset: 0,\n        },\n      },\n    )\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [0, 7000],\n      rampColors: {\n        colors: ['#d73027', '#fc8d59', '#fee08b', '#d9ef8b', '#91cf60', '#1a9850'],\n        positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n      },\n    });\n\n  scene.addLayer(layer);\n});\n",title:"Terrain-RGB 高程图",filename:"terrain.ts",isNew:!1},{id:"lerc",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Q2SlRZ8L2_sAAAAAAAAAAAAAARQnAQ",source:"import { RasterLayer, Scene, Source } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\nimport * as Lerc from 'lerc';\n\nconst colorList = [\n  '#fff7fb',\n  '#ece7f2',\n  '#d0d1e6',\n  '#a6bddb',\n  '#74a9cf',\n  '#3690c0',\n  '#0570b0',\n  '#045a8d',\n  '#023858',\n];\nconst positions = [0, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1.0];\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [90.268, 35.3628],\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  const layer = new RasterLayer();\n  const tileSource = new Source(\n    'https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer/tile/{z}/{y}/{x}',\n    {\n      parser: {\n        type: 'rasterTile',\n        dataType: 'arraybuffer',\n        tileSize: 256,\n        format: async (data) => {\n          const image = Lerc.decode(data);\n          return {\n            rasterData: image.pixels[0],\n            width: image.width,\n            height: image.height,\n          };\n        },\n      },\n    },\n  );\n\n  layer.source(tileSource).style({\n    domain: [0, 1024],\n    clampLow: true,\n    rampColors: {\n      colors: colorList,\n      positions,\n    },\n  });\n\n  scene.addLayer(layer);\n  return '';\n});\n\nconst wrap = document.getElementById('map');\nconst legend = document.createElement('div');\n\nconst data = [];\nfor (let i = 0; i < colorList.length; i++) {\n  data.push({\n    color: colorList[i],\n    text: positions[i],\n  });\n}\nconst strArr = [];\ndata.map(({ color, text }) => {\n  strArr.push(`  <div style=\"display:inline-block;background:#fff;padding:5px;\">\n  <div style=\"fontSize:12px;lineHeight:12px;\">\n    ${text}\n  </div>\n  <div style=\"width: 30px;height:8px; background: ${color};\"></div>\n  </div>`);\n  return '';\n});\nlegend.innerHTML = strArr.join('');\nlegend.style.position = 'absolute';\nlegend.style.left = '10px';\nlegend.style.bottom = '30px';\nlegend.style.background = '#fff';\nlegend.style.zIndex = 10;\n\nwrap.appendChild(legend);\n",title:"lerc 高程栅格",filename:"lerc.js",isNew:!1},{id:"tiff",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*QUb2TY71GjIAAAAAAAAAAAAAARQnAQ",source:"import { PolygonLayer, RasterLayer, Scene, Source } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\n\nconst colorList = [\n  '#419bdf', // Water\n\n  '#358221', // Tree\n\n  '#88b053', // Grass\n\n  '#7a87c6', // vegetation\n\n  '#e49635', // Crops\n\n  '#dfc35a', // shrub\n\n  '#ED022A', // Built Area\n\n  '#EDE9E4', // Bare ground\n\n  '#F2FAFF', // Snow\n\n  '#C8C8C8', // Clouds\n];\nconst positions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [116, 27],\n    zoom: 6,\n    style: 'dark',\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')\n    .then((res) => res.json())\n    .then((maskData) => {\n      const maskPolygon = new PolygonLayer({\n        visible: false, // 隐藏maskPolygon\n      })\n        .source(maskData)\n        .shape('fill')\n        .color('#f00')\n        .style({\n          opacity: 0.5,\n        });\n      const layer = new RasterLayer({\n        maskLayers: [maskPolygon],\n      });\n\n      const tileSource = new Source(\n        'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n        {\n          parser: {\n            type: 'rasterTile',\n            dataType: 'arraybuffer',\n            tileSize: 256,\n            maxZoom: 13.1,\n            format: async (data) => {\n              const tiff = await GeoTIFF.fromArrayBuffer(data);\n              const image = await tiff.getImage();\n              const width = image.getWidth();\n              const height = image.getHeight();\n              const values = await image.readRasters();\n              return { rasterData: values[0], width, height };\n            },\n          },\n        },\n      );\n\n      layer.source(tileSource).style({\n        domain: [0, 255], // 枚举类型domain 必须为0-255\n        clampLow: false,\n        rampColors: {\n          type: 'cat',\n          colors: colorList,\n          positions,\n        },\n      });\n\n      scene.addLayer(layer);\n      scene.addLayer(maskPolygon);\n      return '';\n    });\n  return '';\n});\n\nconst wrap = document.getElementById('map');\nconst legend = document.createElement('div');\n\nconst data = [];\nfor (let i = 0; i < colorList.length; i += 1) {\n  data.push({\n    color: colorList[i],\n    text: [\n      'Water',\n      'Trees',\n      'Grass',\n      'Vegetation',\n      'Crops',\n      'Shrub',\n      'Built Area',\n      'Bare ground',\n      'Snow',\n      'Clouds',\n    ][i],\n  });\n}\nconst strArr = [];\ndata.map(({ color, text }) => {\n  strArr.push(`  <div style=\"display:inline-block;background:#fff:padding:5px;\">\n  <div style=\"fontSize:12px;lineHeight:12px;color: #fff\">\n    ${text}\n  </div>\n  <div style=\"height:8px; background: ${color};\"></div>\n  </div>`);\n  return '';\n});\nlegend.innerHTML = strArr.join('');\nlegend.style.position = 'absolute';\nlegend.style.left = '10px';\nlegend.style.bottom = '30px';\nlegend.style.zIndex = 10;\n\nwrap.appendChild(legend);\n",title:"TIFF 土地覆盖",filename:"tiff.js",isNew:!1}],icon:"",id:"raster",title:{en:"Raster Tile",zh:"栅格瓦片"},api:null,childrenKey:"demos",order:0},{demos:[{id:"chinadistrictmap",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*QlNPTpxjWEAAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    zoom: 4.5,\n    center: [116.412427, 39.303573],\n  }),\n});\n\nconst url =\n  'https://mvt.amap.com/district/CHN3/{z}/{x}/{y}/4096?key=309f07ac6bc48160e80b480ae511e1e9&version=';\nconst source = new Source(url, {\n  parser: {\n    type: 'mvt',\n    tileSize: 256,\n    warp: false,\n  },\n});\n\nscene.on('loaded', () => {\n  const colors = {};\n  const getColorByAdcode = function (adcode) {\n    if (!colors[adcode]) {\n      const gb = Math.floor(Math.random() * 155 + 50);\n      colors[adcode] = 'rgb(' + gb + ',' + gb + ',255)';\n    }\n\n    return colors[adcode];\n  };\n  // 绿地\n  const fill = new PolygonLayer({\n    sourceLayer: 'CHN_Districts',\n  })\n    .source(source)\n    .shape('fill')\n    .color('adcode', getColorByAdcode);\n\n  const line = new LineLayer({\n    sourceLayer: 'CHN_Districts_L',\n  })\n    .source(source)\n    .shape('simple')\n    .color('#fee0d2');\n\n  const line2 = new LineLayer({\n    sourceLayer: 'CHN_Citys_L',\n  })\n    .source(source)\n    .shape('line')\n    .size(0.6)\n    .color('#fc9272');\n\n  const line3 = new LineLayer({\n    sourceLayer: 'CHN_Provinces_L',\n  })\n    .source(source)\n    .shape('line')\n    .size(0.6)\n    .color('#de2d26');\n\n  scene.addLayer(fill);\n  scene.addLayer(line);\n  scene.addLayer(line2);\n  scene.addLayer(line3);\n  //   scene.addLayer(line2);\n  // const debugerLayer = new TileDebugLayer({ usage: 'basemap' });\n  // scene.addLayer(debugerLayer);\n});\n",title:"中国区县地图",filename:"chinadistrictmap.ts",isNew:!1},{id:"chinamap",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kY2sRLu2sTYAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, PointLayer, PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst colors = {};\nconst GDPSpeed = {\n  '520000': 10, //贵州\n  '540000': 10, //西藏\n  '530000': 8.5, //云南\n  '500000': 8.5, //重庆\n  '360000': 8.5, //江西\n  '340000': 8.0, //安徽\n  '510000': 7.5, //四川\n  '350000': 8.5, //福建\n  '430000': 8.0, //湖南\n  '420000': 7.5, //湖北\n  '410000': 7.5, //河南\n  '330000': 7.0, //浙江\n  '640000': 7.5, //宁夏\n  '650000': 7.0, //新疆\n  '440000': 7.0, //广东\n  '370000': 7.0, //山东\n  '450000': 7.3, //广西\n  '630000': 7.0, //青海\n  '320000': 7.0, //江苏\n  '140000': 6.5, //山西\n  '460000': 7, // 海南\n  '310000': 6.5, //上海\n  '110000': 6.5, // 北京\n  '130000': 6.5, // 河北\n  '230000': 6, // 黑龙江\n  '220000': 6, // 吉林\n  '210000': 6.5, //辽宁\n  '150000': 6.5, //内蒙古\n  '120000': 5, // 天津\n  '620000': 6, // 甘肃\n  '610000': 8.5, // 甘肃\n  '710000': 6.64, //台湾\n  '810000': 6.0, //香港\n  '820000': 6.7, //澳门\n};\nconst getColorByDGP = function (adcode) {\n  if (!colors[adcode]) {\n    const gdp = GDPSpeed[adcode];\n    if (!gdp) {\n      colors[adcode] = 'rgb(227,227,227)';\n    } else {\n      const rg = 255 - Math.floor(((gdp - 5) / 5) * 255);\n      colors[adcode] = 'rgb(' + rg + ',' + rg + ',255)';\n    }\n  }\n  return colors[adcode];\n};\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [112, 30],\n\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\n\nconst url =\n  'https://mvt.amap.com/district/CHN2/{z}/{x}/{y}/4096?key=309f07ac6bc48160e80b480ae511e1e9&version=';\nconst source = new Source(url, {\n  parser: {\n    type: 'mvt',\n    tileSize: 256,\n    warp: false,\n  },\n});\n\nscene.on('loaded', () => {\n  // 绿地\n  const fill = new PolygonLayer({\n    sourceLayer: 'CHN_Cities',\n  })\n    .source(source)\n    .shape('fill')\n    .color('adcode_pro', getColorByDGP);\n\n  const line = new LineLayer({\n    sourceLayer: 'CHN_Cities_L',\n  })\n    .source(source)\n    .shape('line')\n    .color('#FFA500');\n\n  const line2 = new LineLayer({\n    sourceLayer: 'CHN_L',\n  })\n    .source(source)\n    .shape('line')\n    .size(0.6)\n    .color('#053061');\n\n  const text = new PointLayer({\n    sourceLayer: 'CHN_Cities',\n    blend: 'normal',\n  })\n    .source(source)\n    .shape('id', 'text')\n    .size(12)\n    .color('#000');\n  scene.addLayer(fill);\n  scene.addLayer(line);\n  scene.addLayer(line2);\n  scene.addLayer(text);\n});\n",title:"中国城市地图",filename:"chinamap.ts",isNew:!1},{id:"point",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*LF3vSbPk2ZEAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PointLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [112, 30],\n    zoom: 3,\n    style: 'normal',\n  }),\n});\n\nconst layer = new PointLayer({\n  featureId: 'COLOR',\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n});\nlayer\n  .source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf', {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      zoomOffset: 0,\n      maxZoom: 9,\n      extent: [-180, -85.051129, 179, 85.051129],\n    },\n  })\n  .shape('circle')\n  .color('COLOR')\n  .size(10);\n// .select(true);\n\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n});\n",title:"瓦片点图层",filename:"point.ts",isNew:!1},{id:"polygon",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*OLv5T4PTzH4AAAAAAAAAAAAADmJ7AQ/fmt.webp",source:"// @ts-ignore\nimport { PointLayer, PolygonLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [112, 30],\n    zoom: 3,\n  }),\n});\n\nconst layer = new PolygonLayer({\n  featureId: 'COLOR',\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n});\nlayer\n  .source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf', {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      maxZoom: 9,\n      extent: [-180, -85.051129, 179, 85.051129],\n    },\n  })\n  // .shape('line')\n  .color('COLOR')\n  // .active(true)\n  .size(10)\n  .select(true)\n\n  .style({\n    // opacity: 0.3\n  });\n\nconst point = new PointLayer({ zIndex: 1 })\n  .source(\n    [\n      {\n        lng: 120,\n        lat: 30,\n      },\n    ],\n    {\n      parser: {\n        type: 'json',\n        x: 'lng',\n        y: 'lat',\n      },\n    },\n  )\n  .shape('circle')\n  .size(40)\n  .active(true)\n  .color('#f00');\n\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n\n  setTimeout(() => {\n    point.setData([\n      {\n        lng: 123,\n        lat: 30,\n      },\n    ]);\n\n    point.color('#ff0');\n    scene.render();\n    console.log('update');\n  }, 3000);\n  // layer.on('inited', () => {\n  //   console.log(\n  //     'layer.getLayerConfig().enableHighlight',\n  //     layer.getLayerConfig().enableHighlight,\n  //   );\n  // });\n\n  layer.on('click', (e) => {\n    console.log('click');\n    console.log(e);\n  });\n\n  scene.addLayer(point);\n});\n",title:"面图层",filename:"polygon.ts",isNew:!1},{id:"simple-line",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*cF8gRqAdXTMAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    style: 'light',\n    center: [112, 30],\n    zoom: 6,\n  }),\n});\n\nconst layer = new LineLayer({\n  featureId: 'COLOR',\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n});\nlayer\n  .source('https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf', {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      zoomOffset: 0,\n      maxZoom: 9,\n    },\n  })\n  .shape('simple')\n  .color('COLOR')\n  .size(1)\n  .select(true);\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n});\n",title:"线图层",filename:"simple-line.ts",isNew:!1},{id:"worldmap",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*v9uTSJpdeksAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { LineLayer, PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst data = [\n  { name: '美国', qz: '82404' },\n  { name: '格陵兰（丹）', qz: '18' },\n  { name: '中国', qz: '79404' },\n  { name: '意大利', qz: '80539' },\n  { name: '西班牙', qz: '56188' },\n  { name: '德国', qz: '36508' },\n  { name: '伊朗', qz: '29406' },\n  { name: '法国', qz: '29155' },\n  { name: '英国', qz: '11658' },\n  { name: '韩国', qz: '9232' },\n  { name: '瑞士', qz: '8789' },\n  { name: '荷兰', qz: '7431' },\n  { name: '比利时', qz: '6235' },\n  { name: '奥地利', qz: '5888' },\n  { name: '土耳其', qz: '3629' },\n  { name: '加拿大', qz: '3409' },\n  { name: '葡萄牙', qz: '2995' },\n  { name: '挪威', qz: '2916' },\n  { name: '澳大利亚', qz: '2799' },\n  { name: '瑞典', qz: '2510' },\n  { name: '巴西', qz: '2433' },\n  { name: '以色列', qz: '2369' },\n  { name: '马来西亚', qz: '2031' },\n  { name: '爱尔兰', qz: '1819' },\n  { name: '丹麦', qz: '1724' },\n  { name: '捷克', qz: '1654' },\n  { name: '卢森堡', qz: '1453' },\n  { name: '日本', qz: '1313' },\n  { name: '厄瓜多尔', qz: '1211' },\n  { name: '智利', qz: '1142' },\n  { name: '巴基斯坦', qz: '1057' },\n  { name: '波兰', qz: '1051' },\n  { name: '泰国', qz: '1045' },\n  { name: '罗马尼亚', qz: '906' },\n  { name: '沙特阿拉伯', qz: '900' },\n  { name: '印度尼西亚', qz: '893' },\n  { name: '芬兰', qz: '880' },\n  { name: '俄罗斯', qz: '840' },\n  { name: '希腊', qz: '821' },\n  { name: '冰岛', qz: '737' },\n  { name: '钻石公主号邮轮', qz: '712' },\n  { name: '南非', qz: '709' },\n  { name: '印度', qz: '694' },\n  { name: '菲律宾', qz: '636' },\n  { name: '新加坡', qz: '631' },\n  { name: '巴拿马', qz: '558' },\n  { name: '卡塔尔', qz: '537' },\n  { name: '斯洛文尼亚', qz: '528' },\n  { name: '阿根廷', qz: '502' },\n  { name: '秘鲁', qz: '480' },\n  { name: '墨西哥', qz: '478' },\n  { name: '哥伦比亚', qz: '470' },\n  { name: '埃及', qz: '456' },\n  { name: '巴林', qz: '419' },\n  { name: '克罗地亚', qz: '418' },\n  { name: '爱沙尼亚', qz: '404' },\n  { name: '多米尼加共和国', qz: '392' },\n  { name: '塞尔维亚', qz: '384' },\n  { name: '黎巴嫩', qz: '368' },\n  { name: '伊拉克', qz: '346' },\n  { name: '阿拉伯联合酋长国', qz: '333' },\n  { name: '亚美尼亚', qz: '290' },\n  { name: '立陶宛', qz: '290' },\n  { name: '新西兰', qz: '262' },\n  { name: '匈牙利', qz: '261' },\n  { name: '阿尔及利亚', qz: '246' },\n  { name: '保加利亚', qz: '242' },\n  { name: '摩洛哥', qz: '225' },\n  { name: '拉脱维亚', qz: '221' },\n  { name: '乌拉圭', qz: '217' },\n  { name: '斯洛伐克', qz: '216' },\n  { name: '安道尔共和国', qz: '213' },\n  { name: '圣马力诺', qz: '208' },\n  { name: '科威特', qz: '208' },\n  { name: '哥斯达黎加', qz: '201' },\n  { name: '北马其顿共和国', qz: '177' },\n  { name: '阿尔巴尼亚', qz: '174' },\n  { name: '波斯尼亚和黑塞哥维那', qz: '173' },\n  { name: '突尼斯', qz: '173' },\n  { name: '约旦', qz: '172' },\n  { name: '乌克兰', qz: '156' },\n  { name: '摩尔多瓦', qz: '149' },\n  { name: '布基纳法索', qz: '146' },\n  { name: '越南', qz: '141' },\n  { name: '塞浦路斯', qz: '132' },\n  { name: '法罗群岛', qz: '132' },\n  { name: '马耳他', qz: '129' },\n  { name: '文莱', qz: '109' },\n  { name: '委内瑞拉', qz: '107' },\n  { name: '塞内加尔', qz: '105' },\n  { name: '斯里兰卡', qz: '102' },\n  { name: '阿曼', qz: '99' },\n  { name: '柬埔寨', qz: '98' },\n  { name: '哈萨克斯坦', qz: '97' },\n  { name: '阿塞拜疆', qz: '93' },\n  { name: '白俄罗斯', qz: '86' },\n  { name: '留尼汪岛', qz: '83' },\n  { name: '阿富汗', qz: '80' },\n  { name: '科特迪瓦', qz: '80' },\n  { name: '格鲁吉亚', qz: '77' },\n  { name: '瓜德罗普', qz: '76' },\n  { name: '喀麦隆', qz: '72' },\n  { name: '科索沃地区', qz: '71' },\n  { name: '加纳', qz: '68' },\n  { name: '马提尼克', qz: '66' },\n  { name: '乌兹别克斯坦', qz: '65' },\n  { name: '巴勒斯坦', qz: '64' },\n  { name: '特立尼达和多巴哥', qz: '60' },\n  { name: '古巴', qz: '57' },\n  { name: '黑山', qz: '52' },\n  { name: '洪都拉斯', qz: '52' },\n  { name: '波多黎各', qz: '51' },\n  { name: '刚果（金）', qz: '51' },\n  { name: '列支敦士登', qz: '51' },\n  { name: '毛里求斯', qz: '47' },\n  { name: '尼日利亚', qz: '46' },\n  { name: '吉尔吉斯斯坦', qz: '44' },\n  { name: '巴拉圭', qz: '41' },\n  { name: '卢旺达', qz: '41' },\n  { name: '玻利维亚', qz: '39' },\n  { name: '孟加拉国', qz: '39' },\n  { name: '关岛', qz: '37' },\n  { name: '马约特岛', qz: '35' },\n  { name: '肯尼亚', qz: '31' },\n  { name: '根西岛', qz: '30' },\n  { name: '法属圭亚那', qz: '28' },\n  { name: '牙买加', qz: '26' },\n  { name: '直布罗陀', qz: '26' },\n  { name: '法属玻利尼西亚', qz: '25' },\n  { name: '危地马拉', qz: '24' },\n  { name: '多哥', qz: '23' },\n  { name: '马恩岛', qz: '23' },\n  { name: '摩纳哥', qz: '23' },\n  { name: '阿鲁巴岛', qz: '19' },\n  { name: '马达加斯加', qz: '19' },\n  { name: '巴巴多斯', qz: '18' },\n  { name: '泽西岛', qz: '18' },\n  { name: '美属维尔京群岛', qz: '17' },\n  { name: '新喀里多尼亚', qz: '14' },\n  { name: '乌干达', qz: '14' },\n  { name: '马尔代夫', qz: '13' },\n  { name: '坦桑尼亚', qz: '13' },\n  { name: '萨尔瓦多', qz: '13' },\n  { name: '吉布提', qz: '12' },\n  { name: '埃塞俄比亚', qz: '12' },\n  { name: '赤道几内亚', qz: '11' },\n  { name: '法属圣马丁岛', qz: '11' },\n  { name: '蒙古', qz: '10' },\n  { name: '海地', qz: '8' },\n  { name: '开曼群岛', qz: '8' },\n  { name: '塞舌尔', qz: '7' },\n  { name: '百慕大群岛', qz: '7' },\n  { name: '苏里南', qz: '7' },\n  { name: '加蓬', qz: '6' },\n  { name: '库拉索', qz: '6' },\n  { name: '圭亚那', qz: '5' },\n  { name: '叙利亚', qz: '5' },\n  { name: '格林兰岛', qz: '5' },\n  { name: '中非共和国', qz: '5' },\n  { name: '莫桑比克', qz: '5' },\n  { name: '斐济', qz: '5' },\n  { name: '贝宁', qz: '5' },\n  { name: '纳米比亚', qz: '5' },\n  { name: '巴哈马', qz: '5' },\n  { name: '缅甸', qz: '5' },\n  { name: '几内亚', qz: '5' },\n  { name: '史瓦帝尼', qz: '4' },\n  { name: '斯威士兰', qz: '4' },\n  { name: '厄立特里亚', qz: '4' },\n  { name: '梵蒂冈', qz: '4' },\n  { name: '刚果（布）', qz: '4' },\n  { name: '尼日尔', qz: '4' },\n  { name: '老挝', qz: '3' },\n  { name: '安提瓜和巴布达', qz: '3' },\n  { name: '圣卢西亚', qz: '3' },\n  { name: '圣巴泰勒米岛', qz: '3' },\n  { name: '尼泊尔', qz: '3' },\n  { name: '乍得', qz: '3' },\n  { name: '苏丹', qz: '3' },\n  { name: '利比里亚', qz: '3' },\n  { name: '佛得角', qz: '3' },\n  { name: '赞比亚', qz: '3' },\n  { name: '毛里塔尼亚', qz: '2' },\n  { name: '索马里', qz: '2' },\n  { name: '尼加拉瓜', qz: '2' },\n  { name: '马里', qz: '2' },\n  { name: '几内亚比绍', qz: '2' },\n  { name: '多米尼克', qz: '2' },\n  { name: '圣基茨和尼維斯', qz: '2' },\n  { name: '蒙特塞拉特', qz: '2' },\n  { name: '冈比亚', qz: '2' },\n  { name: '伯利兹', qz: '2' },\n  { name: '安哥拉', qz: '2' },\n  { name: '津巴布韦', qz: '2' },\n  { name: '不丹', qz: '2' },\n  { name: '荷属圣马丁', qz: '2' },\n  { name: '圣文森特和格林纳丁斯', qz: '1' },\n  { name: '东帝汶', qz: '1' },\n  { name: '格林纳达', qz: '1' },\n  { name: '特克斯和凯科斯群岛', qz: '1' },\n  { name: '利比亚', qz: '1' },\n  { name: '巴布亚新几内亚', qz: '1' },\n];\n\nconst counts = [10000, 5000, 1000, 500, 100];\nconst color = [\n  '#fcfbfd',\n  '#efedf5',\n  '#dadaeb',\n  '#bcbddc',\n  '#9e9ac8',\n  '#807dba',\n  '#6a51a3',\n  '#4a1486',\n].reverse();\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [100, 30],\n    minZoom: 0,\n    zoom: 2,\n  }),\n});\n\nconst url =\n  'https://mvt.amap.com/district/WLD/{z}/{x}/{y}/4096?key=309f07ac6bc48160e80b480ae511e1e9&version=';\nconst source = new Source(url, {\n  parser: {\n    type: 'mvt',\n    tileSize: 256,\n    warp: false,\n  },\n});\nfunction unicode2Char(name) {\n  const code = name\n    .split('/')\n    .slice(1)\n    .map((c) => {\n      return String.fromCharCode('0x' + c);\n    });\n  return code.join('');\n}\n\nscene.on('loaded', () => {\n  // 绿地\n  const water_surface = new PolygonLayer({\n    sourceLayer: 'WLD',\n    zIndex: 1,\n  })\n    .source(source)\n    .select(true)\n    .active(false)\n    .shape('fill')\n    // .color('red')\n    .color('NAME_CHN', (NAME_CHN) => {\n      const namestr = unicode2Char(NAME_CHN);\n      const country = data.find((c) => {\n        return c.name == namestr;\n      });\n      if (!country) {\n        return '#ffff33';\n      }\n      const qz = (country.qz as unknown as number) * 1;\n      if (qz > counts[0]) {\n        return color[0];\n      } else if (qz > counts[1]) {\n        return color[1];\n      } else if (qz > counts[2]) {\n        return color[2];\n      } else if (qz > counts[3]) {\n        return color[3];\n      } else {\n        return color[4];\n      }\n    });\n\n  const line = new LineLayer({\n    sourceLayer: 'WLD_L',\n    zIndex: 2,\n  })\n    .source(source)\n    .shape('line')\n    .size(0.6)\n    .color('type', (t) => {\n      if (t === '0') {\n        return 'red';\n      }\n      if (t === '2') {\n        return '#09f';\n      }\n      return '#fc9272';\n    });\n\n  // water_surface.on('click', (e) => {\n  //   console.log(e);\n  // });\n\n  scene.addLayer(water_surface);\n  scene.addLayer(line);\n});\n",title:"世界地图-瓦片",filename:"worldmap.ts",isNew:!1},{id:"geojson-vt",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*amqiQaYHIKYAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [121.268, 30.3628],\n    pitch: 0,\n    zoom: 4,\n  }),\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/2b7aae6e-5f40-437f-8047-100e9a0d2808.json')\n  .then((d) => d.json())\n  .then((data) => {\n    const source = new Source(data, {\n      parser: {\n        type: 'geojsonvt',\n        tileSize: 256,\n        zoomOffset: 0,\n        maxZoom: 9,\n        // extent: [-180, -85.051129, 179, 85.051129],\n      },\n    });\n\n    const polygon = new PolygonLayer({\n      featureId: 'COLOR',\n    })\n      .source(source)\n      .color('COLOR')\n      .shape('fill')\n      // .active(true)\n      // .select(true)\n      .style({\n        opacity: 0.6,\n      });\n    scene.addLayer(polygon);\n  });\n",title:"GeoJSON-Vt",filename:"geojson-vt.ts",isNew:!1},{id:"pmtiles",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ZEC8Q52nhn4AAAAAAAAAAAAADmJ7AQ/fmt.webp",source:"// @ts-ignore\nimport { PointLayer, PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\nimport { Protocol } from 'pmtiles';\nconst protocol = new Protocol();\nScene.addProtocol('pmtiles', protocol.tile);\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [11.2438, 43.7799],\n    zoom: 12,\n  }),\n});\n\nconst source = new Source(\n  'pmtiles://https://mdn.alipayobjects.com/afts/file/A*HYvHSZ-wQmIAAAAAAAAAAAAADrd2AQ/protomaps(vector)ODbL_firenze.bin',\n  {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      maxZoom: 14,\n      extent: [-180, -85.051129, 179, 85.051129],\n    },\n  },\n);\n\nconst layer = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'earth', // woods hillshade contour ecoregions ecoregions2 city\n});\nlayer\n  .source(source)\n  .color('#f7f7f7')\n\n  .style({\n    opacity: 0.5,\n  });\nconst boundaries = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'boundaries', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#ffffbf')\n  .shape('line')\n  .size(1)\n  .style({\n    opacity: 1,\n  });\n\nconst buildings = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'buildings', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#f1b6da')\n  .shape('fill')\n  .style({\n    opacity: 1,\n  });\n\nconst natural = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'natural', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#e6f5d0')\n  .shape('fill')\n\n  .style({\n    opacity: 1,\n  });\n\nconst water = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'water', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#92c5de')\n  .shape('fill')\n\n  .style({\n    opacity: 1,\n  });\nconst roads = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'roads', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#bababa')\n  .shape('line')\n  .size(0.5)\n  .style({\n    opacity: 1,\n  });\nconst transit = new PolygonLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'transit', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#542788')\n  .shape('line')\n  .size(0.5)\n  .style({\n    opacity: 1,\n  });\n\nconst point = new PointLayer({\n  //   featureId: 'COLOR',\n  sourceLayer: 'places', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(source)\n  .color('#542788')\n  .shape('circle')\n  .size(5)\n  .style({\n    opacity: 1,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n  scene.addLayer(boundaries);\n  scene.addLayer(natural);\n  scene.addLayer(buildings);\n  scene.addLayer(transit);\n  scene.addLayer(roads);\n  scene.addLayer(water);\n  scene.addLayer(point);\n});\n",title:"pmtiles",filename:"pmtiles.ts",isNew:!1}],icon:"",id:"vector",title:{en:"Vector Tile",zh:"矢量瓦片"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"mask",title:{zh:"图层掩膜",en:"Layer Mask"},icon:"raster",examples:[{demos:[{id:"raster",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ErY5Rp9GY-YAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/rmsportal/XKgkjjGaAzRyKupCBiYW.dat',\n    // 'https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n    min: 0,\n    max: 8000,\n  };\n}\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [120.165, 30.26],\n    pitch: 0,\n    zoom: 2,\n    style: 'dark',\n  }),\n});\nscene.addImage(\n  '00',\n  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n);\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json')\n  .then((res) => res.json())\n  .then(async (maskData) => {\n    const tiffdata = await getTiffData();\n    const polygonLayer = new PolygonLayer({\n      visible: false,\n    })\n      .source(maskData)\n      .shape('fill')\n      .color('#f00')\n      .style({ opacity: 0.5 });\n    const layer = new RasterLayer({\n      maskLayers: [polygonLayer],\n    });\n    const mindata = -0;\n    const maxdata = 8000;\n    layer\n      .source(tiffdata.data, {\n        parser: {\n          type: 'raster',\n          width: tiffdata.width,\n          height: tiffdata.height,\n          extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],\n        },\n      })\n      .style({\n        opacity: 0.8,\n        domain: [mindata, maxdata],\n        clampLow: true,\n        rampColors: {\n          colors: [\n            'rgb(166,97,26)',\n            'rgb(223,194,125)',\n            'rgb(245,245,245)',\n            'rgb(128,205,193)',\n            'rgb(1,133,113)',\n          ],\n          positions: [0, 0.25, 0.5, 0.75, 1.0],\n        },\n      });\n    scene.addLayer(layer);\n    scene.addLayer(polygonLayer);\n  });\n",title:"栅格-多边形掩模",filename:"raster.ts",isNew:!1},{id:"heatmap",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*m32ARZNA1mQAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { HeatmapLayer, PolygonLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [120.165, 30.26],\n    pitch: 0,\n    zoom: 2,\n    style: 'dark',\n  }),\n});\nscene.addImage(\n  '00',\n  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n);\nconst maskData = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      geometry: {\n        type: 'MultiPolygon',\n        coordinates: [\n          [\n            [\n              [125.15625000000001, 8.407168163601076],\n              [116.54296874999999, -21.289374355860424],\n              [156.26953125, -20.632784250388013],\n              [150.29296875, 2.1088986592431382],\n            ],\n          ],\n          [\n            [\n              [78.57421875, 46.92025531537451],\n              [51.67968749999999, 37.020098201368114],\n              [87.890625, 28.76765910569123],\n            ],\n          ],\n        ],\n      },\n    },\n  ],\n};\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/d3564b06-670f-46ea-8edb-842f7010a7c6.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const polygonLayer = new PolygonLayer({ visible: true })\n        .source(maskData)\n        .shape('fill')\n        .color('#f00')\n        .style({ opacity: 0.4 });\n      const heatmapLayer = new HeatmapLayer({\n        maskLayers: [polygonLayer],\n        mask: false,\n      })\n        .source(data)\n        .shape('heatmap') // heatmap3D heatmap\n        .size('mag', [0, 1.0]) // weight映射通道\n        .style({\n          intensity: 2,\n          radius: 20,\n          opacity: 1.0,\n          rampColors: {\n            colors: ['#FF4818', '#F7B74A', '#FFF598', '#91EABC', '#2EA9A1', '#206C7C'].reverse(),\n            positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0],\n          },\n        });\n      scene.addLayer(polygonLayer);\n      scene.addLayer(heatmapLayer);\n    });\n});\n",title:"热力图-多边形掩模",filename:"heatmap.ts",isNew:!1},{id:"raster_vector",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Kkn2TYXvX6UAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [110, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\nconst worldSource = new Source(\n  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf',\n  {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      maxZoom: 9,\n      extent: [-180, -85.051129, 179, 85.051129],\n    },\n  },\n);\n\nconst fillLayer = new PolygonLayer({\n  zIndex: 3,\n  visible: false,\n  featureId: 'COLOR',\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(worldSource)\n  .shape('fill')\n  .color('COLOR')\n  .style({\n    opacity: 0.5,\n  });\n\nconst layer = new RasterLayer({\n  zIndex: 2,\n  maskLayers: [fillLayer],\n  enableMask: true,\n})\n  .source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n      },\n    },\n  )\n  .style({\n    opacity: 1,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(fillLayer);\n\n  scene.addLayer(layer);\n});\n",title:"栅格瓦片-矢量瓦片掩模",filename:"raster_vector.ts",isNew:!1},{id:"vector_polygon",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*0mVdRZs08HsAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, Scene, Source } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [110, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\nconst worldSource = new Source(\n  'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/rs_l7/{z}/{x}/{y}.pbf',\n  {\n    parser: {\n      type: 'mvt',\n      tileSize: 256,\n      maxZoom: 9,\n      extent: [-180, -85.051129, 179, 85.051129],\n    },\n  },\n);\nconst maskData = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      geometry: {\n        type: 'MultiPolygon',\n        coordinates: [\n          [\n            [\n              [125.15625000000001, 8.407168163601076],\n              [116.54296874999999, -21.289374355860424],\n              [156.26953125, -20.632784250388013],\n              [150.29296875, 2.1088986592431382],\n            ],\n          ],\n          [\n            [\n              [78.57421875, 46.92025531537451],\n              [51.67968749999999, 37.020098201368114],\n              [87.890625, 28.76765910569123],\n            ],\n          ],\n        ],\n      },\n    },\n  ],\n};\n\nconst polygonLayer = new PolygonLayer({ visible: true })\n  .source(maskData)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\n\nconst fillLayer = new PolygonLayer({\n  zIndex: 3,\n  visible: true,\n  maskLayers: [polygonLayer],\n  featureId: 'COLOR',\n  sourceLayer: 'ecoregions2', // woods hillshade contour ecoregions ecoregions2 city\n})\n  .source(worldSource)\n  .shape('fill')\n  .color('COLOR')\n  .style({\n    opacity: 0.5,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(fillLayer);\n\n  scene.addLayer(polygonLayer);\n});\n",title:"矢量瓦片-多边形掩模",filename:"vector_polygon.ts",isNew:!1},{id:"raster_polygon",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*n0y_TZ2gr5AAAAAAAAAAAAAADmJ7AQ/original",source:"import { PolygonLayer, RasterLayer, Scene, Source } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\n\nconst colorList = [\n  '#419bdf', // Water\n\n  '#358221', // Tree\n\n  '#88b053', // Grass\n\n  '#7a87c6', // vegetation\n\n  '#e49635', // Crops\n\n  '#dfc35a', // shrub\n\n  '#ED022A', // Built Area\n\n  '#EDE9E4', // Bare ground\n\n  '#F2FAFF', // Snow\n\n  '#C8C8C8', // Clouds\n];\nconst positions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [116, 27],\n    zoom: 6,\n    style: 'dark',\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/fccd80c0-2611-49f9-9a9f-e2a4dd12226f.json')\n    .then((res) => res.json())\n    .then((maskData) => {\n      const maskPolygon = new PolygonLayer({\n        visible: false, // 隐藏maskPolygon\n      })\n        .source(maskData)\n        .shape('fill')\n        .color('#f00')\n        .style({\n          opacity: 0.5,\n        });\n      const layer = new RasterLayer({\n        maskLayers: [maskPolygon],\n      });\n\n      const tileSource = new Source(\n        'https://ganos.oss-cn-hangzhou.aliyuncs.com/m2/l7/tiff_jx/{z}/{x}/{y}.tiff',\n        {\n          parser: {\n            type: 'rasterTile',\n            dataType: 'arraybuffer',\n            tileSize: 256,\n            maxZoom: 13.1,\n            format: async (data) => {\n              const tiff = await GeoTIFF.fromArrayBuffer(data);\n              const image = await tiff.getImage();\n              const width = image.getWidth();\n              const height = image.getHeight();\n              const values = await image.readRasters();\n              return { rasterData: values[0], width, height };\n            },\n          },\n        },\n      );\n\n      layer.source(tileSource).style({\n        domain: [0, 255], // 枚举类型domain 必须为0-255\n        clampLow: false,\n        rampColors: {\n          type: 'cat',\n          colors: colorList,\n          positions,\n        },\n      });\n\n      scene.addLayer(layer);\n      scene.addLayer(maskPolygon);\n      return '';\n    });\n  return '';\n});\n\nconst wrap = document.getElementById('map');\nconst legend = document.createElement('div');\n\nconst data = [];\nfor (let i = 0; i < colorList.length; i += 1) {\n  data.push({\n    color: colorList[i],\n    text: [\n      'Water',\n      'Trees',\n      'Grass',\n      'Vegetation',\n      'Crops',\n      'Shrub',\n      'Built Area',\n      'Bare ground',\n      'Snow',\n      'Clouds',\n    ][i],\n  });\n}\nconst strArr = [];\ndata.map(({ color, text }) => {\n  strArr.push(`  <div style=\"display:inline-block;background:#fff:padding:5px;\">\n  <div style=\"fontSize:12px;lineHeight:12px;color: #fff\">\n    ${text}\n  </div>\n  <div style=\"height:8px; background: ${color};\"></div>\n  </div>`);\n  return '';\n});\nlegend.innerHTML = strArr.join('');\nlegend.style.position = 'absolute';\nlegend.style.left = '10px';\nlegend.style.bottom = '30px';\nlegend.style.zIndex = 10;\n\nwrap.appendChild(legend);\n",title:"栅格瓦片-多边形掩模",filename:"raster_polygon.js",isNew:!1},{id:"multi_mask_or",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*09_KQZqe8L8AAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [110, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\n\nconst maskData = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [99.70402975806178, 36.598520593127276],\n            [99.70402975806178, 23.990050715201292],\n            [114.1889649431626, 23.990050715201292],\n            [114.1889649431626, 36.598520593127276],\n            [99.70402975806178, 36.598520593127276],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData2 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [109.50019979654019, 32.46162165361247],\n            [125.99460575876572, 29.37353862575138],\n            [127.50170884160855, 39.24004564990585],\n            [114.69133263744305, 41.22139040282963],\n            [109.50019979654019, 32.46162165361247],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData3 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [111.67712647175739, 27.533314060876805],\n            [131.7718342429976, 27.533314060876805],\n            [131.7718342429976, 34.55577879114256],\n            [111.67712647175739, 34.55577879114256],\n            [111.67712647175739, 27.533314060876805],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\n\nconst maskLayer1 = new PolygonLayer({\n  visible: true,\n  maskOperation: 'or',\n  zIndex: 14,\n})\n  .source(maskData)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer2 = new PolygonLayer({ visible: true, maskOperation: 'or', zIndex: 14 })\n  .source(maskData2)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer3 = new PolygonLayer({ visible: true, maskOperation: 'or', zIndex: 14 })\n  .source(maskData3)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\n\nconst layer = new RasterLayer({\n  zIndex: 1,\n  maskLayers: [maskLayer1, maskLayer2, maskLayer3],\n  enableMask: true,\n  maskInside: true,\n  maskOperation: 'or',\n})\n  .source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n      },\n    },\n  )\n  .style({\n    opacity: 1,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(layer);\n  scene.addLayer(maskLayer1);\n  scene.addLayer(maskLayer2);\n  scene.addLayer(maskLayer3);\n});\n",title:"栅格瓦片-多个Plolygon掩模-并集",filename:"multi_mask_or.ts",isNew:!1},{id:"multi_mask_and",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*n4nwQ7ZgbDYAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [110, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\nconst maskData = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [99.70402975806178, 36.598520593127276],\n            [99.70402975806178, 23.990050715201292],\n            [114.1889649431626, 23.990050715201292],\n            [114.1889649431626, 36.598520593127276],\n            [99.70402975806178, 36.598520593127276],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData2 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [109.50019979654019, 32.46162165361247],\n            [125.99460575876572, 29.37353862575138],\n            [127.50170884160855, 39.24004564990585],\n            [114.69133263744305, 41.22139040282963],\n            [109.50019979654019, 32.46162165361247],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData3 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [111.67712647175739, 27.533314060876805],\n            [131.7718342429976, 27.533314060876805],\n            [131.7718342429976, 34.55577879114256],\n            [111.67712647175739, 34.55577879114256],\n            [111.67712647175739, 27.533314060876805],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\n\nconst maskLayer1 = new PolygonLayer({\n  visible: true,\n  maskOperation: 'and',\n  zIndex: 4,\n})\n  .source(maskData)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer2 = new PolygonLayer({ visible: true, maskOperation: 'and', zIndex: 4 })\n  .source(maskData2)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer3 = new PolygonLayer({ visible: true, maskOperation: 'and', zIndex: 4 })\n  .source(maskData3)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\n\nconst layer = new RasterLayer({\n  zIndex: 5,\n  maskLayers: [maskLayer1, maskLayer2, maskLayer3],\n  enableMask: true,\n  maskInside: true,\n  maskOperation: 'or',\n})\n  .source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n      },\n    },\n  )\n  .style({\n    opacity: 1,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(maskLayer1);\n  scene.addLayer(maskLayer2);\n  scene.addLayer(maskLayer3);\n  scene.addLayer(layer);\n});\n",title:"栅格瓦片-多个Polygon掩模-交集",filename:"multi_mask_and.ts",isNew:!1},{id:"multi_mask_or_not",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*bytjT7JNtekAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PolygonLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { Map } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new Map({\n    center: [110, 30],\n    // zoom: 12,\n    zoom: 3,\n  }),\n});\nconst maskData = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [99.70402975806178, 36.598520593127276],\n            [99.70402975806178, 23.990050715201292],\n            [114.1889649431626, 23.990050715201292],\n            [114.1889649431626, 36.598520593127276],\n            [99.70402975806178, 36.598520593127276],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData2 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [109.50019979654019, 32.46162165361247],\n            [125.99460575876572, 29.37353862575138],\n            [127.50170884160855, 39.24004564990585],\n            [114.69133263744305, 41.22139040282963],\n            [109.50019979654019, 32.46162165361247],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\nconst maskData3 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [\n          [\n            [111.67712647175739, 27.533314060876805],\n            [131.7718342429976, 27.533314060876805],\n            [131.7718342429976, 34.55577879114256],\n            [111.67712647175739, 34.55577879114256],\n            [111.67712647175739, 27.533314060876805],\n          ],\n        ],\n        type: 'Polygon',\n      },\n    },\n  ],\n};\n\nconst maskLayer1 = new PolygonLayer({\n  visible: false,\n  maskOperation: 'or',\n  zIndex: 4,\n})\n  .source(maskData)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer2 = new PolygonLayer({ visible: false, maskOperation: 'or', zIndex: 4 })\n  .source(maskData2)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\nconst maskLayer3 = new PolygonLayer({ visible: false, maskOperation: 'or', zIndex: 4 })\n  .source(maskData3)\n  .shape('fill')\n  .color('#f00')\n  .style({ opacity: 0.4 });\n\nconst layer = new RasterLayer({\n  zIndex: 5,\n  maskLayers: [maskLayer1, maskLayer2, maskLayer3],\n  enableMask: true,\n  maskInside: false, // 并集取反 notALL\n})\n  .source(\n    'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n    {\n      parser: {\n        type: 'rasterTile',\n        tileSize: 256,\n      },\n    },\n  )\n  .style({\n    opacity: 1,\n  });\n\nscene.on('loaded', () => {\n  scene.addLayer(maskLayer1);\n  scene.addLayer(maskLayer2);\n  scene.addLayer(maskLayer3);\n  scene.addLayer(layer);\n});\n",title:"栅格瓦片-多个Plolygon掩模-并集取反",filename:"multi_mask_or_not.ts",isNew:!1},{id:"rastertile_raster",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*vde4QYTTVhUAAAAAAAAAAAAADmJ7AQ/original",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { RasterLayer, Scene } from '@antv/l7';\nimport { Map } from '@antv/l7-maps';\nimport * as GeoTIFF from 'geotiff';\nconst scene = new Scene({\n  id: 'map',\n  map: new Map({\n    center: [105, 37.5],\n    zoom: 2.5,\n  }),\n});\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n\n  const masklayer = new RasterLayer({\n    zIndex: 3,\n    visible: false,\n  });\n  masklayer\n    .source(tiffdata.data, {\n      parser: {\n        type: 'raster',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        extent: [\n          73.4821902409999979, 3.8150178409999995, 135.1066187319999869, 57.6300459959999998,\n        ],\n      },\n    })\n    .style({\n      clampLow: false,\n      clampHigh: false,\n      domain: [10, 60],\n      noDataValue: 0,\n      rampColors: {\n        positions: [0, 0.05, 0.1, 0.25, 0.5, 1.0], // 数据需要换成 0-1\n        colors: ['rgba(0,0,0,0)', 'rgba(92,58,16,0)', '#fabd08', '#f1e93f', '#f1ff8f', '#fcfff7'],\n      },\n    });\n\n  const raster = new RasterLayer({\n    zIndex: 2,\n    maskLayers: [masklayer],\n    visible: true,\n    enableMask: true,\n  })\n    .source(\n      'https://tiles{1-3}.geovisearth.com/base/v1/img/{z}/{x}/{y}?format=webp&tmsIds=w&token=b2a0cfc132cd60b61391b9dd63c15711eadb9b38a9943e3f98160d5710aef788',\n      {\n        parser: {\n          type: 'rasterTile',\n          tileSize: 256,\n        },\n      },\n    )\n    .style({\n      opacity: 1,\n    });\n  scene.addLayer(raster);\n\n  scene.addLayer(masklayer);\n  addLayer();\n});\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/zos/antvdemo/assets/light_clip/lightF182013.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n  };\n}\n\nasync function addLayer() {}\n",title:"栅格瓦片-栅格掩模",filename:"rastertile_raster.ts",isNew:!1},{id:"raster_point",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d2DcTbImPOwAAAAAAAAAAAAADmJ7AQ/original",source:"// @ts-ignore\nimport { PointLayer, RasterLayer, Scene } from '@antv/l7';\n// @ts-ignore\nimport { GaodeMap } from '@antv/l7-maps';\n\nimport * as GeoTIFF from 'geotiff';\n\nasync function getTiffData() {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/rmsportal/XKgkjjGaAzRyKupCBiYW.dat',\n    // 'https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tiff',\n  );\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await GeoTIFF.fromArrayBuffer(arrayBuffer);\n  const image = await tiff.getImage();\n  const width = image.getWidth();\n  const height = image.getHeight();\n  const values = await image.readRasters();\n  return {\n    data: values[0],\n    width,\n    height,\n    min: 0,\n    max: 8000,\n  };\n}\n\nconst scene = new Scene({\n  id: 'map',\n\n  map: new GaodeMap({\n    center: [120.165, 30.26],\n    pitch: 0,\n    zoom: 2,\n    style: 'dark',\n  }),\n});\nscene.addImage(\n  '00',\n  'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n);\nscene.on('loaded', async () => {\n  const tiffdata = await getTiffData();\n  const maskPointData = {\n    type: 'FeatureCollection',\n    features: [\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          coordinates: [110.64070700180974, 38.725170221383365],\n          type: 'Point',\n        },\n      },\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          coordinates: [117.05859241946035, 41.44428218345186],\n          type: 'Point',\n        },\n      },\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          coordinates: [114.98363698367831, 37.113784885036424],\n          type: 'Point',\n        },\n      },\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          coordinates: [118.77967948635097, 37.47208097958061],\n          type: 'Point',\n        },\n      },\n      {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          coordinates: [113.729012766695, 39.22535473120385],\n          type: 'Point',\n        },\n      },\n    ],\n  };\n\n  const maskPoint = new PointLayer({\n    visible: false,\n  })\n    .source(maskPointData)\n    .shape('circle')\n    .size(100000)\n    .color('#f00')\n    .style({\n      opacity: 0.5,\n      unit: 'meter',\n    });\n  const layer = new RasterLayer({\n    maskLayers: [maskPoint],\n  });\n  const mindata = -0;\n  const maxdata = 8000;\n  layer\n    .source(tiffdata.data, {\n      parser: {\n        type: 'raster',\n        width: tiffdata.width,\n        height: tiffdata.height,\n        extent: [73.482190241, 3.82501784112, 135.106618732, 57.6300459963],\n      },\n    })\n    .style({\n      opacity: 0.8,\n      domain: [mindata, maxdata],\n      clampLow: true,\n      rampColors: {\n        colors: [\n          'rgb(166,97,26)',\n          'rgb(223,194,125)',\n          'rgb(245,245,245)',\n          'rgb(128,205,193)',\n          'rgb(1,133,113)',\n        ],\n        positions: [0, 0.25, 0.5, 0.75, 1.0],\n      },\n    });\n  scene.addLayer(layer);\n  scene.addLayer(maskPoint);\n});\n",title:"栅格-点图层",filename:"raster_point.ts",isNew:!1}],icon:"",id:"basic",title:{en:"Layer Mask",zh:"图层掩模"},api:null,childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"composite-layers",title:{zh:"复合图层",en:"CompositeLayers"},icon:"map",examples:[{demos:[{id:"flow-layer",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2xNaSYdoHVsAAAAAAAAAAAAADmJ7AQ/original",source:"import { GaodeMapV2, LayerPopup, Scene } from '@antv/l7';\nimport { FlowLayer } from '@antv/l7-composite-layers';\n\n// 详情可见：https://l7plot.antv.antgroup.com/api/composite-layers/flow-layer\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMapV2({\n    pitch: 0,\n    style: 'dark',\n    center: [121.458794, 31.205302],\n    zoom: 10.95,\n  }),\n});\n\nscene.on('loaded', async () => {\n  const response = await fetch(\n    'https://gw.alipayobjects.com/os/bmw-prod/f4f3e99a-1d6c-4ab0-b08f-ec730c576b62.json',\n  );\n  const data = await response.json();\n\n  const flowLayer = new FlowLayer({\n    source: {\n      data,\n      parser: {\n        type: 'json',\n        x: 'f_lon',\n        y: 'f_lat',\n        x1: 't_lon',\n        y1: 't_lat',\n        weight: 'weight',\n      },\n    },\n  });\n\n  flowLayer.on('circleLayer:click', (e) => console.log('circle layer click', e));\n  flowLayer.on('lineLayer:click', (e) => console.log('line layer click', e));\n  scene && flowLayer.addTo(scene);\n\n  const layerPopup = new LayerPopup({\n    items: [\n      {\n        layer: 'circleLayer',\n        fields: ['id', 'weight'],\n      },\n      {\n        layer: 'lineLayer',\n        fields: ['id', 'weight'],\n      },\n    ],\n  });\n  scene.addPopup(layerPopup);\n});\n",title:"客流图层",filename:"flow-layer.js",isNew:!1},{id:"image-layer",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*Z2rJS6ri3akAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { IconImageLayer } from '@antv/l7-composite-layers';\n\n// 详情可见：https://l7plot.antv.antgroup.com/api/composite-layers/icon-image-layer\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'dark',\n        zoom: 3,\n        center: [120.19660949707033, 30.234747338474293],\n      }),\n    });\n    scene.on('loaded', () => {\n      const iconLayer = new IconImageLayer({\n        id: 'iconImageLayer1',\n        autoFit: true,\n        source: {\n          data,\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        },\n        // color:{\n        //   value:'red',\n        // },\n        iconAtlas: {\n          icon1:\n            'https://gw.alipayobjects.com/zos/basement_prod/604b5e7f-309e-40db-b95b-4fac746c5153.svg',\n          icon2:\n            'https://gw.alipayobjects.com/zos/basement_prod/7aa1f460-9f9f-499f-afdf-13424aa26bbf.svg',\n        },\n        icon: 'icon1',\n        radius: {\n          field: 'unit_price',\n          value: [1, 20],\n        },\n        opacity: 1,\n        label: {\n          field: 'name',\n          state: {\n            active: {\n              color: 'blue',\n            },\n          },\n          style: {\n            fill: '#fff',\n            opacity: 0.6,\n            fontSize: 12,\n            textAnchor: 'top',\n            textOffset: [0, -40],\n            spacing: 1,\n            padding: [5, 5],\n            stroke: '#ffffff',\n            strokeWidth: 0.3,\n            strokeOpacity: 1.0,\n          },\n        },\n        state: {\n          active: false,\n          select: {\n            radius: 20,\n            opacity: 1,\n            icon: 'icon2',\n          },\n        },\n      });\n      scene && iconLayer.addTo(scene);\n    });\n  });\n",title:"图片标注图层",filename:"image-layer.js",isNew:!1},{id:"icon-layer",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-h7LT4wcutAAAAAAAAAAAAAAARQnAQ",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { IconFontLayer } from '@antv/l7-composite-layers';\n\n// 详情可见：https://l7plot.antv.antgroup.com/api/composite-layers/icon-font-layer\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/9eb3f1b5-0c3b-49b2-8221-191d4ba8aa5e.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'dark',\n        zoom: 3,\n        center: [120.19660949707033, 30.234747338474293],\n      }),\n    });\n    scene.on('loaded', () => {\n      const iconLayer = new IconFontLayer({\n        id: 'iconImageLayer1',\n        autoFit: true,\n        source: {\n          data,\n          parser: {\n            type: 'json',\n            x: 'lng',\n            y: 'lat',\n          },\n        },\n        // color:{\n        //   value:'red',\n        // },\n        iconAtlas: {\n          fontFamily: 'iconfont',\n          fontPath: '//at.alicdn.com/t/font_2534097_ao9soua2obv.woff2?t=1622021146076',\n          iconFonts: [\n            ['smallRain', '&#xe6f7;'],\n            ['middleRain', '&#xe61c;'],\n            ['hugeRain', '&#xe6a6;'],\n            ['sun', '&#xe6da;'],\n            ['cloud', '&#xe8da;'],\n          ],\n        },\n        icon: {\n          field: 'iconType',\n          value: 'text',\n        },\n        iconStyle: {\n          textAnchor: 'center', // 文本相对锚点的位置 center|left|right|top|bottom|top-left\n          textOffset: [-10, 10], // 文本相对锚点的偏移量 [水平, 垂直]\n          fontFamily: 'iconfont',\n          textAllowOverlap: true,\n          iconfont: true,\n        },\n        fillColor: 'blue',\n        radius: 40,\n        opacity: 1,\n        label: {\n          visible: false,\n          field: 'weather',\n          style: {\n            fill: '#fff',\n            opacity: 0.6,\n            fontSize: 12,\n            textAnchor: 'top',\n            textOffset: [0, 20],\n            spacing: 1,\n            padding: [5, 5],\n            stroke: '#ffffff',\n            strokeWidth: 0.3,\n            strokeOpacity: 1.0,\n          },\n        },\n        state: {\n          active: {\n            color: 'red',\n          },\n          select: {\n            radius: 20,\n            opacity: 1,\n          },\n        },\n      });\n      scene && iconLayer.addTo(scene);\n    });\n  });\n",title:"字体标注图层",filename:"icon-layer.js",isNew:!1}],icon:"",id:"l7plot",title:{en:"L7Plot",zh:"L7Plot"},api:null,childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"draw",title:{zh:"绘制组件",en:"L7Draw"},icon:"map",examples:[{demos:[{id:"draw_point",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*9UalSKnKqOAAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { DrawEvent, DrawPoint } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.211944, 30.288946],\n    zoom: 7.05,\n  }),\n});\nscene.on('loaded', () => {\n  const drawPoint = new DrawPoint(scene, {});\n  drawPoint.enable();\n\n  drawPoint.on(DrawEvent.Change, (allFeatures) => {\n    console.log(allFeatures);\n  });\n\n  setInterval(() => {\n    console.log(scene.getZoom(), scene.getCenter());\n  }, 2000);\n});\n",title:"绘制点",filename:"draw_point.js",isNew:!1},{id:"draw_line",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*y68yToJoy34AAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { DrawEvent, DrawLine } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.211944, 30.288946],\n    zoom: 7.05,\n  }),\n});\nscene.on('loaded', () => {\n  const drawLine = new DrawLine(scene, {\n    distanceOptions: {},\n  });\n  drawLine.enable();\n\n  drawLine.on(DrawEvent.Change, (allFeatures) => {\n    console.log(allFeatures);\n  });\n});\n",title:"绘制线",filename:"draw_line.js",isNew:!1},{id:"draw_polygon",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*YmIPSK2bY0oAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { DrawEvent, DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.211944, 30.288946],\n    zoom: 7.05,\n  }),\n});\nscene.on('loaded', () => {\n  const drawPolygon = new DrawPolygon(scene, {\n    areaOptions: {},\n  });\n  drawPolygon.enable();\n\n  drawPolygon.on(DrawEvent.Change, (allFeatures) => {\n    console.log(allFeatures);\n  });\n});\n",title:"绘制面",filename:"draw_polygon.js",isNew:!1},{id:"draw_rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*X_IGRrjsPCoAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { DrawEvent, DrawRect } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.211944, 30.288946],\n    zoom: 7.05,\n  }),\n});\nscene.on('loaded', () => {\n  const drawRect = new DrawRect(scene, {});\n  drawRect.enable();\n\n  drawRect.on(DrawEvent.Change, (allFeatures) => {\n    console.log(allFeatures);\n  });\n});\n",title:"绘制矩形",filename:"draw_rect.js",isNew:!1},{id:"draw_circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*bnaxRLpYvdwAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { DrawCircle, DrawEvent } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.211944, 30.288946],\n    zoom: 7.05,\n  }),\n});\nscene.on('loaded', () => {\n  const drawCircle = new DrawCircle(scene, {});\n  drawCircle.enable();\n\n  drawCircle.on(DrawEvent.Change, (allFeatures) => {\n    console.log(allFeatures);\n  });\n});\n",title:"绘制圆",filename:"draw_circle.js",isNew:!1}],icon:"",id:"basic",title:{en:"L7Draw",zh:"地图绘制"},api:null,childrenKey:"demos",order:3},{demos:[{id:"amap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-5KDT6d7pLcAAAAAAAAAAAAAARQnAQ",source:"// https://gw.alipayobjects.com/zos/antvdemo/assets/2019_clip/ndvi_201905.tif\nimport { Scene } from '@antv/l7';\nimport { ControlEvent, DrawControl } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [116.1608, 40.1119],\n    zoom: 15,\n  }),\n});\nscene.on('loaded', () => {\n  const tileLayer = new AMap.TileLayer.Satellite();\n  tileLayer.setMap(scene.map);\n\n  const drawControl = new DrawControl(scene, {});\n  scene.addControl(drawControl);\n  drawControl.on(ControlEvent.DrawChange, (changeType) => {\n    console.log(changeType);\n  });\n});\n",title:"高德地图绘制",filename:"amap.js",isNew:!1}],icon:"",id:"control",title:{en:"Draw Control",zh:"绘制控件"},api:null,childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"earth",title:{zh:"地球模式",en:"Earth Mode"},icon:"map",examples:[{demos:[{id:"flyline",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*hak1RaMjp1MAAAAAAAAAAAAAARQnAQ",source:"import { EarthLayer, LineLayer, Scene } from '@antv/l7';\nimport { Earth } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new Earth({}),\n});\n\n// 地球模式下背景色默认为 #000 通过 setBgColor 方法我们可以设置可视化层的背景色\nscene.setBgColor('#333');\n\nconst earthlayer = new EarthLayer()\n  .source('https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*3-3NSpqRqUoAAAAAAAAAAAAAARQnAQ', {\n    parser: {\n      type: 'image',\n    },\n  })\n  .color('#2E8AE6')\n  .shape('fill')\n  .style({\n    globalOptions: {\n      ambientRatio: 0.6, // 环境光\n      diffuseRatio: 0.4, // 漫反射\n      specularRatio: 0.1, // 高光反射\n    },\n  })\n  .animate(true);\n\nconst atomLayer = new EarthLayer().color('#2E8AE6').shape('atomSphere');\n\nconst bloomLayer = new EarthLayer().color('#fff').shape('bloomSphere').style({\n  opacity: 0.7,\n});\n\nscene.on('loaded', () => {\n  scene.addLayer(earthlayer);\n\n  scene.addLayer(atomLayer);\n  scene.addLayer(bloomLayer);\n\n  fetch('https://gw.alipayobjects.com/os/bmw-prod/20a69b46-3d6d-4ab5-b8b5-150b6aa52c88.json')\n    .then((res) => res.json())\n    .then((flydata) => {\n      const flyLine = new LineLayer({ blend: 'normal' })\n        .source(flydata, {\n          parser: {\n            type: 'json',\n            coordinates: 'coord',\n          },\n        })\n        .color('#b97feb')\n        .shape('arc3d')\n        .size(0.5)\n        .active(true)\n        .animate({\n          interval: 2,\n          trailLength: 2,\n          duration: 1,\n        })\n        .style({\n          segmentNumber: 60,\n          globalArcHeight: 20,\n        });\n      scene.addLayer(flyLine);\n    });\n\n  earthlayer.setEarthTime(4.0);\n});\n",title:"飞线",filename:"flyline.js",isNew:!1}],icon:"",id:"arc3d",title:{en:"flyline",zh:"飞线"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"geometry",title:{zh:"几何体图层",en:"Geometry Layer"},icon:"raster",examples:[{demos:[{id:"plane",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*BMVzSrx9TpEAAAAAAAAAAAAAARQnAQ",source:"import { GeometryLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.1025, 30.2594],\n    style: 'dark',\n    zoom: 10,\n  }),\n});\n\nscene.on('loaded', () => {\n  const layer = new GeometryLayer()\n    .shape('plane')\n    .style({\n      opacity: 0.8,\n      width: 0.074,\n      height: 0.061,\n      center: [120.1025, 30.2594],\n    })\n    .active(true)\n    .color('#ff0');\n  scene.addLayer(layer);\n});\n",title:"平面图层",filename:"plane.js",isNew:!1},{id:"terrain",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*DIb4TaijKIAAAAAAAAAAAAAAARQnAQ",source:"import { GeometryLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [120.1025, 30.2594],\n    style: 'dark',\n    pitch: 65,\n    rotation: 180,\n    zoom: 14,\n  }),\n});\nlet currentZoom = 14,\n  currentModelData = '100x100';\n\nscene.on('loaded', () => {\n  const layer = new GeometryLayer().shape('plane').style({\n    width: 0.074,\n    height: 0.061,\n    center: [120.1025, 30.2594],\n    widthSegments: 100,\n    heightSegments: 100,\n    terrainClipHeight: 1,\n    mapTexture:\n      'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*gA0NRbuOF5cAAAAAAAAAAAAAARQnAQ',\n    terrainTexture:\n      'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*eYFaRYlnnOUAAAAAAAAAAAAAARQnAQ',\n    rgb2height: (r, g, b) => {\n      let h = (r * 255.0 * 256.0 * 256.0 + g * 255.0 * 256.0 + b * 255.0) * 0.1;\n      h = h / 200 - 12750;\n      h = Math.max(0, h);\n      return h;\n    },\n  });\n  scene.addLayer(layer);\n\n  let modelData10,\n    modelData20 = null,\n    modelData100;\n\n  layer.on('terrainImageLoaded', () => {\n    modelData10 = layer.layerModel.createModelData({\n      widthSegments: 10,\n      heightSegments: 10,\n    });\n\n    modelData20 = layer.layerModel.createModelData({\n      widthSegments: 20,\n      heightSegments: 20,\n    });\n\n    modelData100 = layer.layerModel.createModelData({\n      widthSegments: 100,\n      heightSegments: 100,\n    });\n  });\n\n  scene.on('zoom', () => {\n    const zoom = Math.floor(scene.getZoom());\n    if (currentZoom !== zoom) {\n      if (zoom > 13) {\n        if (currentModelData !== '100x100') {\n          layer.updateModelData(modelData100);\n          currentModelData = '100x100';\n        }\n      } else if (zoom > 12) {\n        if (currentModelData !== '20x20') {\n          layer.updateModelData(modelData20);\n          currentModelData = '20x20';\n        }\n      } else {\n        if (currentModelData !== '10x10') {\n          layer.updateModelData(modelData10);\n          currentModelData = '10x10';\n        }\n      }\n      currentZoom = zoom;\n    }\n  });\n});\n",title:"自定义 3D 地形（LOD）",filename:"terrain.js",isNew:!1},{id:"snow",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*jJQtRqa6_f8AAAAAAAAAAAAAARQnAQ",source:"import { GeometryLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 40,\n    style: 'dark',\n    center: [120, 30],\n    zoom: 6,\n  }),\n});\n\nscene.on('loaded', () => {\n  const layer = new GeometryLayer()\n    .shape('sprite')\n    .size(10)\n    .style({\n      mapTexture:\n        'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*zLQwQKBSagYAAAAAAAAAAAAAARQnAQ', // snow\n      center: [120, 30],\n      spriteCount: 60,\n      spriteRadius: 10,\n      spriteTop: 300,\n      spriteUpdate: 5,\n    });\n  scene.addLayer(layer);\n});\n",title:"雪花粒子",filename:"snow.js",isNew:!1},{id:"rain",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*rmcvQ5iwyZAAAAAAAAAAAAAAARQnAQ",source:"import { GeometryLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    pitch: 90,\n    style: 'dark',\n    center: [120, 30],\n    zoom: 6,\n  }),\n});\n\nscene.on('loaded', () => {\n  const layer = new GeometryLayer()\n    .shape('sprite')\n    .size(10)\n    .style({\n      opacity: 0.3,\n      mapTexture:\n        'https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*w2SFSZJp4nIAAAAAAAAAAAAAARQnAQ', // rain\n      center: [120, 30],\n      spriteCount: 120,\n      spriteRadius: 10,\n      spriteTop: 400,\n      spriteUpdate: 10,\n      spriteScale: 0.8,\n    });\n  scene.addLayer(layer);\n});\n",title:"雨滴粒子",filename:"rain.js",isNew:!1}],icon:"",id:"geometry",title:{en:"Geometry Layer",zh:"几何体图层"},api:null,childrenKey:"demos",order:7}],childrenKey:"examples"},{id:"engine",title:{zh:"第三方引擎",en:"other engine"},icon:"map",examples:[{demos:[{id:"amap_ant",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*mjmxT7DaVQgAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { ThreeLayer, ThreeRender } from '@antv/l7-three';\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [111.4453125, 32.84267363195431],\n    pitch: 45,\n    rotation: 30,\n    zoom: 12,\n  }),\n});\n\nscene.on('loaded', () => {\n  scene.registerRenderService(ThreeRender);\n\n  const threeJSLayer = new ThreeLayer({\n    enableMultiPassRenderer: false,\n    onAddMeshes: (threeScene, layer) => {\n      threeScene.add(new THREE.AmbientLight(0xffffff));\n      const sunlight = new THREE.DirectionalLight(0xffffff, 0.25);\n      sunlight.position.set(0, 80000000, 100000000);\n      sunlight.matrixWorldNeedsUpdate = true;\n      threeScene.add(sunlight);\n\n      const center = scene.getCenter();\n\n      const cubeGeometry = new THREE.BoxBufferGeometry(10000, 10000, 10000);\n      const cubeMaterial = new THREE.MeshNormalMaterial({ side: THREE.DoubleSide });\n      const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n      layer.setObjectLngLat(cube, [center.lng + 0.05, center.lat], 0);\n      threeScene.add(cube);\n\n      // 使用 Three.js glTFLoader 加载模型\n      const loader = new GLTFLoader();\n      loader.load(\n        'https://gw.alipayobjects.com/os/bmw-prod/3ca0a546-92d8-4ba0-a89c-017c218d5bea.gltf',\n        (gltf) => {\n          const gltfScene = gltf.scene;\n          setDouble(gltfScene);\n          layer.adjustMeshToMap(gltfScene);\n          // gltfScene.scale.set(1000, 1000, 1000)\n          layer.setMeshScale(gltfScene, 1000, 1000, 1000);\n\n          layer.setObjectLngLat(gltfScene, [center.lng, center.lat], 0);\n\n          const animations = gltf.animations;\n          if (animations && animations.length) {\n            const mixer = new THREE.AnimationMixer(gltfScene);\n\n            const animation = animations[2];\n\n            const action = mixer.clipAction(animation);\n\n            action.play();\n            layer.addAnimateMixer(mixer);\n          }\n          // layer.setObjectLngLat(gltfScene, [center.lng + 0.05, center.lat] as ILngLat, 0)\n          let t = 0;\n          setInterval(() => {\n            t += 0.01;\n            layer.setObjectLngLat(gltfScene, [center.lng, center.lat + Math.sin(t) * 0.1], 0);\n          }, 16);\n\n          // 向场景中添加模型\n          threeScene.add(gltfScene);\n          // 重绘图层\n          layer.render();\n        },\n      );\n    },\n  }).animate(true);\n  scene.addLayer(threeJSLayer);\n});\n\nfunction setDouble(object) {\n  if (object.children && object.children.length && object.children.length > 0) {\n    object.children.map((child) => setDouble(child));\n  } else if (object.material) {\n    object.material.side = THREE.DoubleSide;\n  }\n}\n",title:"高德地图",filename:"amap_ant.js",isNew:!1},{id:"space_click",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ilK5R4SidkMAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { ThreeLayer, ThreeRender } from '@antv/l7-three';\nimport { animate, easeInOut } from 'popmotion';\nimport * as THREE from 'three';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nfunction changeValue(startValue, endValue, duration = 500, callback, complete) {\n  if (typeof startValue === 'number') {\n    animate({\n      from: {\n        v: startValue,\n      },\n      to: {\n        v: endValue,\n      },\n      ease: easeInOut,\n      duration,\n      onUpdate: (o) => {\n        callback(o.v);\n        return '';\n      },\n      onComplete: () => {\n        complete && complete();\n        return '';\n      },\n    });\n  } else {\n    animate({\n      from: {\n        lng: startValue.lng,\n        lat: startValue.lat,\n        pitch: startValue.pitch,\n        rotation: startValue.rotation,\n        zoom: startValue.zoom,\n      },\n      to: {\n        lng: endValue.lng,\n        lat: endValue.lat,\n        pitch: endValue.pitch,\n        rotation: endValue.rotation,\n        zoom: endValue.zoom,\n      },\n      ease: easeInOut,\n      duration,\n      onUpdate: (o) => {\n        callback(o);\n        return '';\n      },\n      onComplete: () => {\n        complete && complete();\n        return '';\n      },\n    });\n  }\n  return '';\n}\n\nconst raycaster = new THREE.Raycaster();\nconst lng = 120.1;\nconst lat = 30.265;\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [lng, lat],\n    pitch: 70,\n    rotation: 220,\n    zoom: 16,\n  }),\n});\n\nscene.on('loaded', () => {\n  const mouse = new THREE.Vector2();\n  let zspace, aspace, ASpaceTextMesh, ZSpaceTextMesh;\n\n  scene.registerRenderService(ThreeRender);\n\n  const center = scene.getCenter();\n\n  const threeJSLayer = new ThreeLayer({\n    enableMultiPassRenderer: false,\n    // @ts-ignore\n    onAddMeshes: (threeScene, layer) => {\n      threeScene.add(new THREE.AmbientLight(0xffffff));\n      const sunlight = new THREE.DirectionalLight(0xffffff, 0.25);\n      sunlight.position.set(0, 80000000, 100000000);\n      sunlight.matrixWorldNeedsUpdate = true;\n      threeScene.add(sunlight);\n\n      // map\n      // https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*gA0NRbuOF5cAAAAAAAAAAAAAARQnAQ\n\n      // height\n      // https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*eYFaRYlnnOUAAAAAAAAAAAAAARQnAQ\n\n      const image = new Image();\n      image.crossOrigin = '';\n      image.src =\n        'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*eYFaRYlnnOUAAAAAAAAAAAAAARQnAQ';\n      image.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, image.width, image.height);\n        const heightData = ctx.getImageData(0, 0, image.width, image.height).data;\n\n        const s = 53000;\n\n        const geometry = new THREE.PlaneGeometry(s, s, 255, 255);\n\n        geometry.vertices.map((v, i) => {\n          const r = heightData[i * 4];\n          const g = heightData[i * 4 + 1];\n          const b = heightData[i * 4 + 2];\n          let h = -10000.0 + (r * 255.0 * 256.0 * 256.0 + g * 255.0 * 256.0 + b * 255.0) * 0.1;\n          h = h / 20 - 127600;\n          h = Math.max(0, h);\n\n          v.z = h;\n          return '';\n        });\n        const material = new THREE.MeshPhongMaterial({\n          transparent: true,\n          // opacity: 0.6,\n          map: new THREE.TextureLoader().load(\n            'https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*gA0NRbuOF5cAAAAAAAAAAAAAARQnAQ',\n          ),\n          side: THREE.DoubleSide,\n        });\n        const plane = new THREE.Mesh(geometry, material);\n        layer.setObjectLngLat(plane, [120.1008, 30.2573], 0);\n        plane.position.z = 10;\n        threeScene.add(plane);\n\n        return '';\n      };\n\n      // 使用 Three.js glTFLoader 加载模型\n      const loader = new GLTFLoader();\n      loader.load(\n        'https://gw.alipayobjects.com/os/bmw-prod/3ca0a546-92d8-4ba0-a89c-017c218d5bea.gltf',\n        (gltf) => {\n          const antModel = gltf.scene;\n          setDouble(antModel);\n          // antModel.children[0].material.side = THREE.DoubleSide\n          layer.adjustMeshToMap(antModel);\n          layer.setMeshScale(antModel, 20, 20, 20);\n          layer.setObjectLngLat(antModel, [center.lng - 0.002, center.lat], 0);\n\n          const animations = gltf.animations;\n          if (animations && animations.length) {\n            const mixer = new THREE.AnimationMixer(antModel);\n            const animation = animations[1];\n            const action = mixer.clipAction(animation);\n            action.play();\n            layer.addAnimateMixer(mixer);\n          }\n          antModel.rotation.y = Math.PI;\n          // 向场景中添加模型\n          threeScene.add(antModel);\n          // 重绘图层\n          layer.render();\n          return '';\n        },\n      );\n\n      const v = `\n      varying vec2 vUv;\n      varying vec4 worldPosition;\n      void main() {\n          vUv = uv;\n          worldPosition = modelMatrix * vec4(position, 1.0);\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }`;\n      const f = `\n      varying vec2 vUv;\n      varying vec4 worldPosition;\n      uniform vec3 color;\n      void main() {\n        gl_FragColor = vec4(color, fract(worldPosition.z / 50.0));\n      }`;\n      const shadermaterial = new THREE.ShaderMaterial({\n        uniforms: {\n          color: {\n            value: new THREE.Vector3(0.21372549, 0.34705882, 0.56470588),\n          },\n        },\n        vertexShader: v,\n        fragmentShader: f,\n        side: THREE.DoubleSide,\n      });\n\n      const fbxLoaded = new FBXLoader();\n      // load ZSpace\n      fbxLoaded.load(\n        'https://gw.alipayobjects.com/os/bmw-prod/af1652c9-3c4f-4e73-ac4c-1f78fefbaf6a.fbx',\n        (gltf) => {\n          zspace = gltf;\n          layer.adjustMeshToMap(zspace);\n          // @ts-ignore\n          zspace.children[0].material = shadermaterial;\n          layer.setMeshScale(zspace, 10, 10, 10);\n\n          layer.setObjectLngLat(zspace, [120.1015, 30.2661], 0);\n          zspace.rotation.x = Math.PI * 2;\n          zspace.rotation.z = -Math.PI * (-2 / 15);\n          threeScene.add(zspace);\n\n          return '';\n        },\n      );\n\n      fbxLoaded.load(\n        'https://gw.alipayobjects.com/os/bmw-prod/11d6e4c1-bd5b-4dc1-bae5-ac51c14e9056.fbx',\n        (model) => {\n          aspace = model;\n          layer.adjustMeshToMap(aspace);\n          // @ts-ignore\n          aspace.children[0].material = shadermaterial;\n\n          layer.setMeshScale(aspace, 8, 8, 8);\n          layer.setObjectLngLat(aspace, [120.099, 30.261], 0);\n          aspace.rotation.x = Math.PI * 2;\n          aspace.rotation.z = -Math.PI * (3 / 15);\n          threeScene.add(aspace);\n\n          return '';\n        },\n      );\n      console.log(THREE.FontLoader);\n      const textLoader = new THREE.FontLoader();\n      textLoader.load(\n        'https://gw.alipayobjects.com/os/bmw-prod/0a3f46eb-294e-4d95-87f2-052c26ad4bf1.json',\n        (font) => {\n          const fontOptions = {\n            size: 360, // 字号大小，一般为大写字母的高度\n            height: 50, // 文字的厚度\n            font, // 字体，默认是'helvetiker'，需对应引用的字体文件\n            bevelThickness: 10, // 倒角厚度\n            bevelSize: 10, // 倒角宽度\n            curveSegments: 30, // 弧线分段数，使得文字的曲线更加光滑\n            bevelEnabled: true, // 布尔值，是否使用倒角，意为在边缘处斜切\n          };\n          const aspaceGeo = new THREE.TextGeometry('ASpace', fontOptions);\n          aspaceGeo.center();\n          const zspaceGeo = new THREE.TextGeometry('ZSpace', fontOptions);\n          zspaceGeo.center();\n\n          const fontMat = new THREE.MeshPhongMaterial({\n            color: 0xcccccc,\n            shininess: 60,\n            specular: 0xcccccc,\n            side: THREE.DoubleSide,\n          });\n\n          const testHeight = 900;\n\n          ASpaceTextMesh = new THREE.Mesh(aspaceGeo, fontMat);\n          ASpaceTextMesh.rotation.x = Math.PI / 2;\n          ASpaceTextMesh.rotation.y = (-Math.PI * 3) / 4;\n          layer.setObjectLngLat(ASpaceTextMesh, [120.099, 30.261], testHeight);\n          threeScene.add(ASpaceTextMesh);\n\n          ZSpaceTextMesh = new THREE.Mesh(zspaceGeo, fontMat);\n          ZSpaceTextMesh.rotation.x = Math.PI / 2;\n          ZSpaceTextMesh.rotation.y = (-Math.PI * 3) / 4;\n          layer.setObjectLngLat(ZSpaceTextMesh, [120.103, 30.2661], testHeight);\n          threeScene.add(ZSpaceTextMesh);\n\n          getH(0, 200);\n          function getH(h1, h2) {\n            changeValue(\n              h1,\n              h2,\n              1000,\n              (h) => {\n                ASpaceTextMesh.position.z = testHeight + h;\n                ZSpaceTextMesh.position.z = testHeight + h;\n                return '';\n              },\n              () => {\n                setTimeout(() => getH(h2, h1), 10);\n                return '';\n              },\n            );\n          }\n\n          return '';\n        },\n      );\n    },\n  }).animate(true);\n  scene.addLayer(threeJSLayer);\n  // @ts-ignore\n  let currentCamera = threeJSLayer.threeRenderService?.getRenderCamera();\n  const currentView = {\n    lng: center.lng,\n    lat: center.lat,\n    pitch: 70,\n    rotation: 220,\n    zoom: 16,\n  };\n\n  scene.on('zoom', () => {\n    const cen = scene.getCenter();\n    currentView.lng = cen.lng;\n    currentView.lat = cen.lat;\n    currentView.pitch = scene.getPitch();\n    currentView.zoom = scene.getZoom();\n    return '';\n  });\n\n  scene.map.on('mapchange', () => {\n    // @ts-ignore\n    currentCamera = threeJSLayer.getRenderCamera();\n    currentView.pitch = scene.getPitch();\n    return '';\n  });\n\n  const ASpaceView = {\n    lng: 120.109509,\n    lat: 30.251529,\n    pitch: 83,\n    rotation: 225,\n    zoom: 15,\n  };\n  const ZSpaceView = {\n    lng: 120.112026,\n    lat: 30.256881,\n    pitch: 80,\n    rotation: 220,\n    zoom: 15,\n  };\n\n  scene.on('click', (ev) => {\n    // @ts-ignore\n    const size = scene?.map?.getSize();\n    mouse.x = (ev.pixel.x / size.width) * 2 - 1;\n    mouse.y = -(ev.pixel.y / size.height) * 2 + 1;\n    raycaster.setFromCamera(mouse, currentCamera);\n    const intersects = raycaster.intersectObjects([zspace, aspace], true);\n    if (intersects.length > 0) {\n      const object = intersects[0].object;\n      if (object.name === 'Z空间') {\n        selectSpace(currentView, ZSpaceView, ZSpaceTextMesh);\n      } else {\n        selectSpace(currentView, ASpaceView, ASpaceTextMesh);\n      }\n    }\n    return '';\n  });\n\n  function selectSpace(currentView, targetView, spaceText) {\n    if (spaceText) {\n      changeValue(spaceText.rotation.y, spaceText.rotation.y + Math.PI * 2, 500, (r) => {\n        spaceText.rotation.y = r;\n        return '';\n      });\n    }\n\n    changeValue(currentView, targetView, 500, (view) => {\n      scene.setCenter([view.lng, view.lat]);\n      scene.setPitch(view.pitch);\n      scene.setRotation(view.rotation);\n      scene.setZoom(view.zoom);\n\n      currentView.lng = view.lng;\n      currentView.lat = view.lat;\n      currentView.pitch = view.pitch;\n      currentView.rotation = view.rotation;\n      currentView.zoom = view.zoom;\n\n      return '';\n    });\n  }\n  return '';\n});\n\nfunction setDouble(object) {\n  if (object.children && object.children.length && object.children.length > 0) {\n    object.children.map((child) => setDouble(child));\n  } else if (object.material) {\n    object.material.side = THREE.DoubleSide;\n  }\n}\n",title:"点击建筑",filename:"space_click.js",isNew:!1},{id:"basic_geometry",screenshot:"https://github.com/antvis/L7/assets/58084743/c22afe38-4d67-4577-a229-5b329b2bd5ef",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { ThreeLayer, ThreeRender } from '@antv/l7-three';\nimport * as THREE from 'three';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [111.4453125, 32.84267363195431],\n    pitch: 45,\n    rotation: 30,\n    zoom: 12,\n    mapStyle: 'amap://styles/darkblue',\n  }),\n});\n\nscene.on('loaded', () => {\n  scene.registerRenderService(ThreeRender);\n\n  const threeJSLayer = new ThreeLayer({\n    enableMultiPassRenderer: false,\n    onAddMeshes: (threeScene, layer) => {\n      // 当前场景的中心\n      const center = scene.getCenter();\n\n      // 环境光照\n      threeScene.add(new THREE.AmbientLight(0xffffff, 0.2));\n      const sunlight = new THREE.DirectionalLight(0xff0000, 0.8);\n      layer.setObjectLngLat(sunlight, [center.lng + 0.3, center.lat + 0.08], 1000);\n      sunlight.matrixWorldNeedsUpdate = true;\n      threeScene.add(sunlight);\n\n      const directionalLightHelper = new THREE.DirectionalLightHelper(sunlight, 5);\n      threeScene.add(directionalLightHelper);\n\n      const box = createBoxGeometry();\n      box.scale.set(1000, 1000, 1000);\n      box.rotation.set(0, 90, 0);\n      layer.setObjectLngLat(box, [center.lng - 0.05, center.lat], 0);\n      threeScene.add(box);\n\n      const circle = createCircleGeometry();\n      circle.scale.set(100, 100, 1000);\n      layer.setObjectLngLat(circle, [center.lng - 0.03, center.lat], 0);\n      threeScene.add(circle);\n\n      const cylinder = createCylinderGeometry();\n      cylinder.scale.set(100, 100, 100);\n      layer.setObjectLngLat(cylinder, [center.lng - 0.015, center.lat], 0);\n      threeScene.add(cylinder);\n\n      const cone = createConeGeometry();\n      cone.scale.set(100, 100, 100);\n      layer.setObjectLngLat(cone, [center.lng + 0.01, center.lat], 0);\n      threeScene.add(cone);\n\n      const plane = createPlaneGeometry();\n      plane.scale.set(1000, 1000, 1000);\n      layer.setObjectLngLat(plane, [center.lng + 0.03, center.lat], 0);\n      threeScene.add(plane);\n\n      const shape = createShape();\n      shape.scale.set(100, 100, 100);\n      layer.setObjectLngLat(shape, [center.lng + 0.03, center.lat], 0);\n      threeScene.add(shape);\n\n      const sphere = createSphereGeometry();\n      sphere.scale.set(10, 10, 10);\n      layer.setObjectLngLat(sphere, [center.lng + 0.07, center.lat], 0);\n      threeScene.add(sphere);\n\n      const tube = createTube();\n      tube.scale.set(100, 100, 100);\n      layer.setObjectLngLat(tube, [center.lng + 0.07, center.lat], 0);\n      threeScene.add(tube);\n\n      const points = createPoints();\n      points.scale.set(100, 100, 100);\n      layer.setObjectLngLat(points, [center.lng + 0.11, center.lat], 0);\n      threeScene.add(points);\n\n      const line = createLine();\n      line.scale.set(100, 100, 100);\n      layer.setObjectLngLat(line, [center.lng + 0.13, center.lat], 0);\n      threeScene.add(line);\n\n      const camera = layer.threeRenderService.getRenderCamera();\n      const cameraHelper = createCameraHelper(camera);\n      layer.setObjectLngLat(plane, [center.lng, center.lat], 0);\n      threeScene.add(cameraHelper);\n    },\n  }).animate(true);\n  scene.addLayer(threeJSLayer);\n});\n\nfunction createBoxGeometry() {\n  const geometry = new THREE.BoxGeometry(1, 1, 1);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const cube = new THREE.Mesh(geometry, material);\n  return cube;\n}\n\nfunction createCircleGeometry() {\n  const geometry = new THREE.CircleGeometry(5, 32);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const circle = new THREE.Mesh(geometry, material);\n  return circle;\n}\n\nfunction createCylinderGeometry() {\n  const geometry = new THREE.CylinderGeometry(5, 5, 20, 32);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const cylinder = new THREE.Mesh(geometry, material);\n  return cylinder;\n}\n\nfunction createConeGeometry() {\n  const geometry = new THREE.ConeGeometry(5, 20, 32);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const cone = new THREE.Mesh(geometry, material);\n  return cone;\n}\n\nfunction createPlaneGeometry() {\n  const geometry = new THREE.PlaneGeometry(1, 1);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const plane = new THREE.Mesh(geometry, material);\n  return plane;\n}\n\nfunction createShape() {\n  const x = 0,\n    y = 0;\n\n  const heartShape = new THREE.Shape();\n\n  heartShape.moveTo(x + 5, y + 5);\n  heartShape.bezierCurveTo(x + 5, y + 5, x + 4, y, x, y);\n  heartShape.bezierCurveTo(x - 6, y, x - 6, y + 7, x - 6, y + 7);\n  heartShape.bezierCurveTo(x - 6, y + 11, x - 3, y + 15.4, x + 5, y + 19);\n  heartShape.bezierCurveTo(x + 12, y + 15.4, x + 16, y + 11, x + 16, y + 7);\n  heartShape.bezierCurveTo(x + 16, y + 7, x + 16, y, x + 10, y);\n  heartShape.bezierCurveTo(x + 7, y, x + 5, y + 5, x + 5, y + 5);\n\n  const geometry = new THREE.ShapeGeometry(heartShape);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const mesh = new THREE.Mesh(geometry, material);\n  return mesh;\n}\n\nfunction createSphereGeometry() {\n  const geometry = new THREE.SphereGeometry(15, 32, 16);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const sphere = new THREE.Mesh(geometry, material);\n  return sphere;\n}\n\nfunction createTube() {\n  class CustomSinCurve extends THREE.Curve {\n    constructor(scale = 1) {\n      super();\n      this.scale = scale;\n    }\n\n    getPoint(t, optionalTarget = new THREE.Vector3()) {\n      const tx = t * 3 - 1.5;\n      const ty = Math.sin(2 * Math.PI * t);\n      const tz = 0;\n      return optionalTarget.set(tx, ty, tz).multiplyScalar(this.scale);\n    }\n  }\n\n  const path = new CustomSinCurve(10);\n  const geometry = new THREE.TubeGeometry(path, 20, 2, 8, false);\n  const material = new THREE.MeshPhongMaterial({\n    color: 0xffffff,\n    reflectivity: 0.8,\n    shininess: 80,\n    emissive: 0x049ef4,\n    specular: 0x049ef4,\n  });\n  const mesh = new THREE.Mesh(geometry, material);\n  return mesh;\n}\n\nfunction createCameraHelper(camera = undefined) {\n  const cameraObj =\n    camera ?? new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  const helper = new THREE.CameraHelper(cameraObj);\n  return helper;\n}\n\nfunction createPoints() {\n  const points = [];\n  points.push(new THREE.Vector3(-10, 0, 0));\n  points.push(new THREE.Vector3(0, 10, 0));\n  points.push(new THREE.Vector3(10, 0, 0));\n\n  const geometry = new THREE.BufferGeometry().setFromPoints(points);\n  const material = new THREE.PointsMaterial({ size: 200, color: 0x049ef4 });\n  const pointsGeometry = new THREE.Points(geometry, material);\n  return pointsGeometry;\n}\n\nfunction createLine() {\n  const material = new THREE.LineBasicMaterial({\n    color: 0x049ef4,\n    linewidth: 6,\n  });\n\n  const points = [];\n  points.push(new THREE.Vector3(-10, 0, 0));\n  points.push(new THREE.Vector3(0, 10, 0));\n  points.push(new THREE.Vector3(10, 0, 0));\n\n  const geometry = new THREE.BufferGeometry().setFromPoints(points);\n\n  const line = new THREE.Line(geometry, material);\n  return line;\n}\n",title:"基础图形与光照",filename:"basic_geometry.js",isNew:!1}],icon:"",id:"three",title:{en:"ThreeJS",zh:"ThreeJS"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"amap-plugin",title:{zh:"高德地图插件",en:"Amap Plugin"},icon:"map",examples:[{demos:[{id:"busstop",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*9MHrRZTvaiAAAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PointLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [116.475, 39.985],\n    zoom: 12.2,\n    plugin: ['AMap.ToolBar', 'AMap.LineSearch'],\n  }),\n});\n\nscene.addImage(\n  'road',\n  'https://gw.alipayobjects.com/zos/bmw-prod/ce83fc30-701f-415b-9750-4b146f4b3dd6.svg',\n);\nscene.addImage(\n  'start',\n  'https://gw.alipayobjects.com/zos/bmw-prod/1c301f25-9bb8-4e67-8d5c-41117c877caf.svg',\n);\nscene.addImage(\n  'end',\n  'https://gw.alipayobjects.com/zos/bmw-prod/f3db4998-e657-4c46-b5ab-205ddc12031f.svg',\n);\n\nscene.addImage(\n  'busStop',\n  'https://gw.alipayobjects.com/zos/bmw-prod/54345af2-1d01-43e1-9d11-cd9bb953202c.svg',\n);\n\nscene.on('loaded', () => {\n  window.AMap.plugin(['AMap.ToolBar', 'AMap.LineSearch'], () => {\n    scene.map.addControl(new AMap.ToolBar());\n\n    const linesearch = new AMap.LineSearch({\n      pageIndex: 1, // 页码，默认值为1\n      pageSize: 1, // 单页显示结果条数，默认值为20，最大值为50\n      city: '北京', // 限定查询城市，可以是城市名（中文/中文全拼）、城市编码，默认值为『全国』\n      extensions: 'all', // 是否返回公交线路详细信息，默认值为『base』\n    });\n\n    // 执行公交路线关键字查询\n    linesearch.search('536', function (status, result) {\n      // 打印状态信息status和结果信息result\n\n      const { path, via_stops } = result.lineInfo[0];\n      const startPoint = [path[0]];\n      const endpoint = [path[path.length - 1]];\n      const budStopsData = via_stops.map((stop) => ({\n        lng: stop.location.lng,\n        lat: stop.location.lat,\n        name: stop.name,\n      }));\n      const data = [\n        {\n          id: '1',\n          coord: path.map((p) => [p.lng, p.lat]),\n        },\n      ];\n\n      const busLine = new LineLayer({ blend: 'normal' })\n        .source(data, {\n          parser: {\n            type: 'json',\n            coordinates: 'coord',\n          },\n        })\n        .size(5)\n        .shape('line')\n        .color('rgb(99, 166, 242)')\n        .texture('road')\n        .animate({\n          interval: 1, // 间隔\n          duration: 1, // 持续时间，延时\n          trailLength: 2, // 流线长度\n        })\n        .style({\n          lineTexture: true,\n          iconStep: 25,\n        });\n\n      scene.addLayer(busLine);\n\n      const startPointLayer = new PointLayer({ zIndex: 1 })\n        .source(startPoint, {\n          parser: {\n            x: 'lng',\n            y: 'lat',\n            type: 'json',\n          },\n        })\n        .shape('start')\n        .size(20)\n        .style({\n          offsets: [0, 25],\n        });\n      scene.addLayer(startPointLayer);\n\n      const endPointLayer = new PointLayer({ zIndex: 1 })\n        .source(endpoint, {\n          parser: {\n            x: 'lng',\n            y: 'lat',\n            type: 'json',\n          },\n        })\n        .shape('end')\n        .size(25)\n        .style({\n          offsets: [0, 25],\n        });\n      scene.addLayer(endPointLayer);\n\n      const busStops = new PointLayer()\n        .source(budStopsData, {\n          parser: {\n            x: 'lng',\n            y: 'lat',\n            type: 'json',\n          },\n        })\n        .shape('busStop')\n        .size(13)\n        .style({\n          offsets: [20, 0],\n        });\n      scene.addLayer(busStops);\n\n      const busStopsName = new PointLayer()\n        .source(budStopsData, {\n          parser: {\n            x: 'lng',\n            y: 'lat',\n            type: 'json',\n          },\n        })\n        .shape('name', 'text')\n        .size(12)\n        .color('#000')\n        .style({\n          textAnchor: 'left',\n          textOffset: [80, 0],\n          stroke: '#fff',\n          strokeWidth: 1,\n        });\n      scene.addLayer(busStopsName);\n    });\n  });\n});\n",title:"公交线路插件",filename:"busstop.js",isNew:!1},{id:"xyztile",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*ydN_QpzVraQAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [105, 30],\n    zoom: 2,\n  }),\n});\n\nscene.on('loaded', () => {\n  const xyzTileLayer = new window.AMap.TileLayer({\n    getTileUrl:\n      'https://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&size=1&scl=1&style=8&ltype=11',\n    zIndex: 100,\n  });\n  scene.map.add(xyzTileLayer);\n});\n",title:"xyz瓦片地图",filename:"xyztile.js",isNew:!1},{id:"satellite",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*bYbdT6N6IGwAAAAAAAAAAAAAARQnAQ",source:"import { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    center: [105, 30],\n    zoom: 2,\n  }),\n});\n\nscene.on('loaded', () => {\n  scene.map.add(new window.AMap.TileLayer.Satellite());\n});\n",title:"卫星地图",filename:"satellite.js",isNew:!1}],icon:"",id:"bus",title:{en:"amapPlugin",zh:"高德插件"},api:null,childrenKey:"demos",order:"0‘"}],childrenKey:"examples"},{id:"choropleth",title:{zh:"行政区划",en:"Choropleth"},icon:"map",examples:[{demos:[{id:"zhejiang-province",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/tX2zfzui76/821b3d1d-421c-4f09-a44e-53422db302f6.png",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { Choropleth } from '@antv/l7plot';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'blank',\n    center: [120.19382669582967, 30.258134],\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/alisis/geo-data-v0.1.1/administrative-data/area-list.json')\n    .then((response) => response.json())\n    .then((list) => {\n      const data = list\n        .filter(({ level, parent }) => level === 'city' && parent === 330000)\n        .map((item) => ({ ...item, value: Math.random() * 5000 }));\n\n      const choropleth = new Choropleth({\n        source: {\n          data,\n          joinBy: {\n            sourceField: 'adcode',\n            geoField: 'adcode',\n          },\n        },\n        viewLevel: {\n          level: 'province',\n          adcode: 330000,\n        },\n        autoFit: true,\n        color: {\n          field: 'value',\n          value: ['#B8E1FF', '#7DAAFF', '#3D76DD', '#0047A5', '#001D70'],\n          scale: { type: 'quantize' },\n        },\n        style: {\n          opacity: 1,\n          stroke: '#ccc',\n          lineWidth: 0.6,\n          lineOpacity: 1,\n        },\n        label: {\n          visible: true,\n          field: 'name',\n          style: {\n            fill: '#000',\n            opacity: 0.8,\n            fontSize: 10,\n            stroke: '#fff',\n            strokeWidth: 1.5,\n            textAllowOverlap: false,\n            padding: [5, 5],\n          },\n        },\n        state: {\n          active: { stroke: 'black', lineWidth: 1 },\n        },\n        tooltip: {\n          items: ['name', 'adcode', 'value'],\n        },\n        zoom: {\n          position: 'bottomright',\n        },\n        legend: {\n          position: 'bottomleft',\n        },\n      });\n\n      choropleth.addToScene(scene);\n    });\n});\n",title:{zh:"浙江省地图",en:"Zhejiang Province Map"},filename:"zhejiang-province.ts",isNew:!1},{id:"zhejiang-province-district",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/YQU0%24nl0gh/c9a9a70d-8abc-42f6-8795-856646346326.png",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { Choropleth } from '@antv/l7plot';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'blank',\n    center: [120.19382669582967, 30.258134],\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/alisis/geo-data-v0.1.1/administrative-data/area-list.json')\n    .then((response) => response.json())\n    .then((list) => {\n      const data = list\n        .filter(({ level }) => level === 'district')\n        .map((item) => ({ ...item, value: Math.random() * 5000 }));\n\n      const choropleth = new Choropleth({\n        source: {\n          data,\n          joinBy: {\n            sourceField: 'adcode',\n            geoField: 'adcode',\n          },\n        },\n        viewLevel: {\n          level: 'province',\n          adcode: 330000,\n          granularity: 'district',\n        },\n        autoFit: true,\n        color: {\n          field: 'value',\n          value: ['#B8E1FF', '#7DAAFF', '#3D76DD', '#0047A5', '#001D70'],\n          scale: { type: 'quantize' },\n        },\n        style: {\n          opacity: 1,\n          stroke: '#ccc',\n          lineWidth: 0.6,\n          lineOpacity: 1,\n        },\n        label: {\n          visible: true,\n          field: 'name',\n          style: {\n            fill: '#000',\n            opacity: 0.8,\n            fontSize: 10,\n            stroke: '#fff',\n            strokeWidth: 1.5,\n            textAllowOverlap: false,\n            padding: [5, 5],\n          },\n        },\n        state: {\n          active: { stroke: 'black', lineWidth: 1 },\n        },\n        tooltip: {\n          items: ['name', 'adcode', 'value'],\n        },\n        zoom: {\n          position: 'bottomright',\n        },\n        legend: {\n          position: 'bottomleft',\n        },\n      });\n\n      choropleth.addToScene(scene);\n    });\n});\n",title:{zh:"浙江省县级地图",en:"Zhejiang District Map"},filename:"zhejiang-province-district.ts",isNew:!1},{id:"hangzhou-city",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/kagsfItG%26g/49861247-bc88-4d64-b5b1-0913c8ff55f8.png",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { Choropleth } from '@antv/l7plot';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'blank',\n    center: [120.19382669582967, 30.258134],\n    zoom: 3,\n  }),\n});\n\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/alisis/geo-data-v0.1.1/administrative-data/area-list.json')\n    .then((response) => response.json())\n    .then((list) => {\n      const data = list\n        .filter(({ level, parent }) => level === 'district' && parent === 330100)\n        .map((item) => ({ ...item, value: Math.random() * 5000 }));\n\n      const choropleth = new Choropleth({\n        source: {\n          data,\n          joinBy: {\n            sourceField: 'adcode',\n            geoField: 'adcode',\n          },\n        },\n        viewLevel: {\n          level: 'city',\n          adcode: 330100,\n        },\n        autoFit: true,\n        color: {\n          field: 'value',\n          value: ['#B8E1FF', '#7DAAFF', '#3D76DD', '#0047A5', '#001D70'],\n          scale: { type: 'quantize' },\n        },\n        style: {\n          opacity: 1,\n          stroke: '#ccc',\n          lineWidth: 0.6,\n          lineOpacity: 1,\n        },\n        label: {\n          visible: true,\n          field: 'name',\n          style: {\n            fill: '#000',\n            opacity: 0.8,\n            fontSize: 10,\n            stroke: '#fff',\n            strokeWidth: 1.5,\n            textAllowOverlap: false,\n            padding: [5, 5],\n          },\n        },\n        state: {\n          active: { stroke: 'black', lineWidth: 1 },\n        },\n        tooltip: {\n          items: ['name', 'adcode', 'value'],\n        },\n        zoom: {\n          position: 'bottomright',\n        },\n        legend: {\n          position: 'bottomleft',\n        },\n      });\n\n      choropleth.addToScene(scene);\n    });\n});\n",title:{zh:"杭州市地图",en:"Hangzhou City Map"},filename:"hangzhou-city.ts",isNew:!1},{id:"xihu-district",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/04xm5U4yvt/828e6055-f005-4dba-8936-aaf451487db9.png",source:"import { GaodeMap, Scene } from '@antv/l7';\nimport { Choropleth } from '@antv/l7plot';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'blank',\n    center: [120.19382669582967, 30.258134],\n    zoom: 3,\n  }),\n});\n\nconst choropleth = new Choropleth({\n  source: {\n    data: [{ adcode: 330106, value: 200 }],\n    joinBy: {\n      sourceField: 'adcode',\n      geoField: 'adcode',\n    },\n  },\n  viewLevel: {\n    level: 'district',\n    adcode: 330106,\n  },\n  autoFit: true,\n  color: {\n    field: 'value',\n    value: ['#B8E1FF', '#7DAAFF', '#3D76DD', '#0047A5', '#001D70'],\n    scale: { type: 'quantize' },\n  },\n  style: {\n    opacity: 1,\n    stroke: '#ccc',\n    lineWidth: 0.6,\n    lineOpacity: 1,\n  },\n  label: {\n    visible: true,\n    field: 'name',\n    style: {\n      fill: '#000',\n      opacity: 0.8,\n      fontSize: 10,\n      stroke: '#fff',\n      strokeWidth: 1.5,\n      textAllowOverlap: false,\n      padding: [5, 5],\n    },\n  },\n  state: {\n    active: { stroke: 'black', lineWidth: 1 },\n  },\n  tooltip: {\n    items: ['name', 'adcode', 'value'],\n  },\n  zoom: {\n    position: 'bottomright',\n  },\n  legend: {\n    position: 'bottomleft',\n  },\n});\n\nscene.on('loaded', () => {\n  choropleth.addToScene(scene);\n});\n",title:{zh:"西湖区地图",en:"Xihu District Map"},filename:"xihu-district.ts",isNew:!1}],icon:"",id:"administrative",title:{en:"Administrative Division",zh:"行政区域"},api:null,childrenKey:"demos",order:0}],childrenKey:"examples"},{id:"tutorial",title:{zh:"教程示例",en:"Tutorial demo"},icon:"map",examples:[{demos:[{id:"amap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4Jj2RJQIQTAAAAAAAAAAAAAAARQnAQ",source:"import { LayerSwitch, PointLayer, Scale, Scene, Zoom } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [121.4316962, 31.26082325],\n    zoom: 15.056,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const pointLayer = new PointLayer({})\n        .source(data, {\n          parser: {\n            type: 'json',\n            x: 'longitude',\n            y: 'latitude',\n          },\n        })\n        .shape('circle')\n        .size('unit_price', [5, 25])\n        .color('name', ['#49B5AD', '#5B8FF9'])\n        .style({\n          opacity: 0.3,\n          strokeWidth: 1,\n        });\n\n      scene.addLayer(pointLayer);\n    });\n\n  const layerSwitch = new LayerSwitch({\n    position: 'rightcenter',\n  });\n  scene.addControl(layerSwitch);\n\n  const zoomControl = new Zoom({\n    position: 'rightcenter',\n  });\n\n  const scaleControl = new Scale({\n    position: 'bottomright',\n  });\n  scene.addControl(zoomControl);\n  scene.addControl(scaleControl);\n});\n",title:"高德底图组件",filename:"amap.js",isNew:!1}],icon:"",id:"control",title:{en:"Control",zh:"组件"},api:null,childrenKey:"demos",order:2},{demos:[{id:"layer_highlight",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*CnSaSaPwyX8AAAAAAAAAAAAAARQnAQ",source:"import { LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [118.7368, 32.056],\n    zoom: 9,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://gw.alipayobjects.com/os/basement_prod/91247d10-585b-4406-b1e2-93b001e3a0e4.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const filllayer = new PolygonLayer({\n        name: 'fill',\n      })\n        .source(data)\n        .shape('fill')\n        .color('unit_price', ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#43a2ca', '#0868ac']);\n      const linelayer = new LineLayer({\n        zIndex: 1,\n        name: 'line',\n      })\n        .source(data)\n        .shape('line')\n        .size(0.5)\n        .color('#fff')\n        .style({\n          opacity: 0.5,\n        });\n      const hightLayer = new LineLayer({\n        zIndex: 4, // 设置显示层级\n        name: 'hightlight',\n      })\n        .source({\n          type: 'FeatureCollection',\n          features: [],\n        })\n        .shape('line')\n        .size(2)\n        .color('red');\n      scene.addLayer(filllayer);\n      scene.addLayer(linelayer);\n      scene.addLayer(hightLayer);\n      filllayer.on('click', (feature) => {\n        console.log(feature);\n        hightLayer.setData({\n          type: 'FeatureCollection',\n          features: [feature.feature],\n        });\n      });\n    });\n});\n",title:"交互高亮图层",filename:"layer_highlight.js",isNew:!1},{id:"layer_boxselect",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*5kzJQYS_N20AAAAAAAAAAAAADmJ7AQ/original",source:"import { LineLayer, PolygonLayer, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\n\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [120.13618469238281, 30.247352897833554],\n    zoom: 9,\n  }),\n});\nscene.on('loaded', () => {\n  fetch('https://mdn.alipayobjects.com/afts/file/A*nNheQL3Z-FUAAAAAAAAAAAAADrd2AQ/330100_full.json')\n    .then((res) => res.json())\n    .then((data) => {\n      const fillLayer = new PolygonLayer({\n        name: 'fill',\n        autoFit: true,\n      })\n        .source(data)\n        .shape('fill')\n        .color('adcode', ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#43a2ca', '#0868ac']);\n\n      const lineLayer = new LineLayer({\n        zIndex: 1,\n        name: 'line',\n      })\n        .source(data)\n        .shape('line')\n        .size(1)\n        .color('#fff');\n\n      const selectLayer = new LineLayer({\n        zIndex: 2,\n        name: 'select',\n      })\n        .source([])\n        .shape('line')\n        .size(2)\n        .color('#f00');\n\n      scene.addLayer(fillLayer);\n      scene.addLayer(lineLayer);\n      scene.addLayer(selectLayer);\n\n      scene.enableBoxSelect(false);\n\n      const onBoxSelect = (bbox, startEvent, endEvent) => {\n        const { x: x1, y: y1 } = startEvent;\n        const { x: x2, y: y2 } = endEvent;\n        fillLayer.boxSelect(\n          [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)],\n          (features) => {\n            selectLayer.setData({\n              type: 'FeatureCollection',\n              features: features ?? [],\n            });\n          },\n        );\n      };\n\n      scene.on('selecting', onBoxSelect);\n      scene.on('selectend', onBoxSelect);\n    });\n});\n",title:"框选图层",filename:"layer_boxselect.js",isNew:!1}],icon:"",id:"layer",title:{en:"Layer",zh:"图层"},api:null,childrenKey:"demos",order:2},{demos:[{id:"amap",screenshot:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*VEy6S6UrAV8AAAAAAAAAAAAAARQnAQ",source:"import { Marker, Popup, Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nconst scene = new Scene({\n  id: 'map',\n  map: new GaodeMap({\n    style: 'light',\n    center: [121.4316962, 31.26082325],\n    zoom: 12.056,\n  }),\n});\nscene.on('loaded', () => {\n  // 创建默认 marker\n  const popup = new Popup({\n    offsets: [0, 20],\n  }).setText('hello');\n\n  const marker = new Marker().setLnglat([121.4316962, 31.26082325]).setPopup(popup);\n\n  scene.addMarker(marker);\n});\n",title:"添加默认Marker",filename:"amap.js",isNew:!1}],icon:"",id:"marker",title:{en:"Marker",zh:"Marker"},api:null,childrenKey:"demos",order:2}],childrenKey:"examples"}]}},children:n})}}}]);